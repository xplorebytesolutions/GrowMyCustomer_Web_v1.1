{"version":3,"file":"static/js/124.446a087b.chunk.js","mappings":"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","sources":["pages/CRM/Timeline/timelineUtils.js","pages/CRM/Timeline/TimelineEventCard.jsx","pages/CRM/Timeline/LeadTimeline.jsx"],"sourcesContent":["// üìÖ Utility functions for Timeline\r\n\r\nexport function formatAgo(dateString) {\r\n  const date = new Date(dateString);\r\n  const now = new Date();\r\n\r\n  const diffMs = now - date;\r\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n\r\n  if (diffDays === 0) {\r\n    return `Today at ${date.toLocaleTimeString([], {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    })}`;\r\n  } else if (diffDays === 1) {\r\n    return `Yesterday at ${date.toLocaleTimeString([], {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    })}`;\r\n  } else if (diffDays < 7) {\r\n    return `${diffDays} days ago`;\r\n  } else {\r\n    return date.toLocaleDateString();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { formatAgo } from \"./timelineUtils\"; // ‚úÖ Correct import\r\n\r\nfunction TimelineEventCard({ entry }) {\r\n  // üîµ Pick Icon based on eventType\r\n  const getIcon = () => {\r\n    if (entry.eventType === \"CatalogCTA\") return \"üõçÔ∏è\";\r\n    if (entry.eventType === \"CampaignSend\") return \"‚úâÔ∏è\"; // ‚úÖ New: Campaign Send icon\r\n    if (entry.eventType === \"ReminderSet\") return \"‚è∞\";\r\n    if (entry.eventType === \"NoteAdded\") return \"üìù\";\r\n    if (entry.eventType === \"CustomActivity\") return \"‚öôÔ∏è\";\r\n    return \"üìå\"; // default for unknown event types\r\n  };\r\n\r\n  // üè∑Ô∏è Pick badge color\r\n  const getBadgeStyle = () => {\r\n    if (entry.eventType === \"CatalogCTA\") return \"bg-green-100 text-green-800\";\r\n    if (entry.eventType === \"CampaignSend\")\r\n      return \"bg-indigo-100 text-indigo-800\"; // ‚úÖ New: Campaign Send badge\r\n    if (entry.eventType === \"ReminderSet\")\r\n      return \"bg-yellow-100 text-yellow-800\";\r\n    if (entry.eventType === \"NoteAdded\") return \"bg-blue-100 text-blue-800\";\r\n    if (entry.eventType === \"CustomActivity\")\r\n      return \"bg-purple-100 text-purple-800\";\r\n    return \"bg-gray-100 text-gray-800\"; // default style\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {/* üîµ Dot */}\r\n      <div className=\"absolute -left-7 top-5 w-4 h-4 bg-emerald-600 rounded-full border-2 border-white shadow\"></div>\n\r\n      {/* üß© Event Card */}\r\n      <div className=\"bg-white rounded-xl shadow-md p-4\">\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n          {/* üß† Icon + Event Type */}\r\n          <div className=\"flex items-center gap-2 text-emerald-800 font-semibold\">\n            <span className=\"text-xl\">{getIcon()}</span>\r\n            <span>{entry.eventType}</span>\r\n          </div>\r\n\r\n          {/* üè∑Ô∏è Badge */}\r\n          <div\r\n            className={`text-xs font-bold px-2 py-1 rounded ${getBadgeStyle()}`}\r\n          >\r\n            {entry.eventType}\r\n          </div>\r\n        </div>\r\n\r\n        {/* üìù Description */}\r\n        <div className=\"text-gray-700 text-sm mb-2\">\r\n          {entry.description || \"(No description provided)\"}\r\n        </div>\r\n\r\n        {/* üïë Timestamp */}\r\n        <div className=\"text-xs text-gray-400\">\r\n          {formatAgo(entry.createdAt)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TimelineEventCard;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axiosClient from \"../../../api/axiosClient\";\r\nimport TimelineEventCard from \"./TimelineEventCard\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction LeadTimeline() {\r\n  const { contactId } = useParams();\r\n  const [timeline, setTimeline] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState(null);\r\n\r\n  // ‚úÖ Fetch Contact Info (wrapped in useCallback)\r\n  const fetchContactInfo = useCallback(async () => {\r\n    try {\r\n      const res = await axiosClient.get(`/contacts/${contactId}`);\r\n      setContact(res.data);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch contact info\", error);\r\n      toast.error(\"‚ùå Failed to load contact info\");\r\n    }\r\n  }, [contactId]);\r\n\r\n  // ‚úÖ Fetch Timeline Events (wrapped in useCallback)\r\n  const fetchTimeline = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axiosClient.get(`/leadtimeline/contact/${contactId}`);\r\n      setTimeline(res.data || []);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch timeline\", error);\r\n      toast.error(\"‚ùå Failed to load timeline events\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [contactId]);\r\n\r\n  useEffect(() => {\r\n    if (contactId) {\r\n      fetchContactInfo();\r\n      fetchTimeline();\r\n    }\r\n  }, [contactId, fetchContactInfo, fetchTimeline]);\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-5xl mx-auto bg-[#f5f6f7] min-h-[calc(100vh-80px)]\">\r\n      {/* Top Bar */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800\">üïì Lead Timeline</h2>\r\n          {contact && (\r\n            <p className=\"text-gray-600 text-sm mt-1\">\r\n              <span className=\"font-semibold\">{contact.name || \"Unknown\"}</span>{\" \"}\r\n              ‚Ä¢ {contact.phoneNumber}\r\n            </p>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={() => fetchTimeline()}\r\n          className=\"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded shadow text-sm\"\n        >\r\n          üîÑ Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {/* Timeline Section */}\r\n      <div className=\"relative pl-10 border-l-2 border-gray-200 space-y-8\">\r\n        {loading ? (\r\n          <p className=\"text-gray-500\">‚è≥ Loading timeline...</p>\r\n        ) : timeline.length === 0 ? (\r\n          <p className=\"text-gray-400 italic\">\r\n            No timeline activities found for this contact.\r\n          </p>\r\n        ) : (\r\n          timeline.map(entry => (\r\n            <TimelineEventCard key={entry.id} entry={entry} />\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LeadTimeline;\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import axiosClient from \"../../api/axiosClient\";\r\n// import TimelineEventCard from \"./TimelineEventCard\";\r\n// import { useParams } from \"react-router-dom\";\r\n// import { toast } from \"react-toastify\";\r\n\r\n// function LeadTimeline() {\r\n//   const { contactId } = useParams();\r\n//   const [timeline, setTimeline] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [contact, setContact] = useState(null);\r\n\r\n//   // ‚úÖ Fetch Contact Info\r\n//   const fetchContactInfo = async () => {\r\n//     try {\r\n//       const res = await axiosClient.get(`/contacts/${contactId}`);\r\n//       setContact(res.data);\r\n//     } catch (error) {\r\n//       console.error(\"Failed to fetch contact info\", error);\r\n//       toast.error(\"‚ùå Failed to load contact info\");\r\n//     }\r\n//   };\r\n\r\n//   // ‚úÖ Fetch Timeline Events\r\n//   const fetchTimeline = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axiosClient.get(`/leadtimeline/contact/${contactId}`);\r\n//       setTimeline(res.data || []);\r\n//     } catch (error) {\r\n//       console.error(\"Failed to fetch timeline\", error);\r\n//       toast.error(\"‚ùå Failed to load timeline events\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     if (contactId) {\r\n//       fetchContactInfo();\r\n//       fetchTimeline();\r\n//     }\r\n//   }, [contactId]);\r\n\r\n//   return (\r\n//     <div className=\"p-6 max-w-5xl mx-auto\">\r\n//       {/* Top Bar */}\r\n//       <div className=\"flex items-center justify-between mb-6\">\r\n//         <div>\r\n//           <h2 className=\"text-2xl font-bold text-gray-800\">üïì Lead Timeline</h2>\r\n//           {contact && (\r\n//             <p className=\"text-gray-600 text-sm mt-1\">\r\n//               <span className=\"font-semibold\">{contact.name || \"Unknown\"}</span>{\" \"}\r\n//               ‚Ä¢ {contact.phoneNumber}\r\n//             </p>\r\n//           )}\r\n//         </div>\r\n//         <button\r\n//           onClick={() => fetchTimeline()}\r\n//           className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded shadow text-sm\"\r\n//         >\r\n//           üîÑ Refresh\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* Timeline Section */}\r\n//       <div className=\"relative pl-10 border-l-2 border-gray-200 space-y-8\">\r\n//         {loading ? (\r\n//           <p className=\"text-gray-500\">‚è≥ Loading timeline...</p>\r\n//         ) : timeline.length === 0 ? (\r\n//           <p className=\"text-gray-400 italic\">\r\n//             No timeline activities found for this contact.\r\n//           </p>\r\n//         ) : (\r\n//           timeline.map(entry => (\r\n//             <TimelineEventCard key={entry.id} entry={entry} />\r\n//           ))\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default LeadTimeline;\r\n"],"names":["formatAgo","dateString","date","Date","diffMs","diffDays","Math","floor","concat","toLocaleTimeString","hour","minute","toLocaleDateString","_ref","entry","_jsxs","className","children","_jsx","eventType","description","createdAt","contactId","useParams","timeline","setTimeline","useState","loading","setLoading","contact","setContact","fetchContactInfo","useCallback","async","res","axiosClient","get","data","error","console","toast","fetchTimeline","useEffect","name","phoneNumber","onClick","length","map","TimelineEventCard","id"],"sourceRoot":""}