{"version":3,"file":"static/js/178.60229689.chunk.js","mappings":"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","sources":["capabilities/quotaKeys.js","../node_modules/lucide-react/src/icons/layout-grid.ts","pages/admin/FeatureAccess/PlanManagement.jsx"],"sourcesContent":["// ðŸ“„ src/capabilities/quotaKeys.js\r\n\r\nexport const QUOTA_KEYS = Object.freeze({\r\n  MESSAGES_PER_MONTH: \"MESSAGES_PER_MONTH\",\r\n  CAMPAIGNS_PER_DAY: \"CAMPAIGNS_PER_DAY\",\r\n  TEMPLATES_TOTAL: \"TEMPLATES_TOTAL\",\r\n  MESSAGES_PER_DAY: \"MESSAGES_PER_DAY\",\r\n  // future:\r\n  // AI_TOKENS_PER_MONTH: \"AI_TOKENS_PER_MONTH\",\r\n});\r\n\r\n// Optional: definition list with labels & defaults\r\nexport const QUOTA_DEFINITIONS = [\r\n  {\r\n    key: QUOTA_KEYS.MESSAGES_PER_MONTH,\r\n    label: \"Messages / month\",\r\n    defaultLimit: 10000,\r\n    defaultPeriod: 2,\r\n  },\r\n  {\r\n    key: QUOTA_KEYS.CAMPAIGNS_PER_DAY,\r\n    label: \"Campaigns / day\",\r\n    defaultLimit: 50,\r\n    defaultPeriod: 1,\r\n  },\r\n  {\r\n    key: QUOTA_KEYS.TEMPLATES_TOTAL,\r\n    label: \"Templates total\",\r\n    defaultLimit: 100,\r\n    defaultPeriod: 0,\r\n  },\r\n  {\r\n    key: QUOTA_KEYS.MESSAGES_PER_DAY,\r\n    label: \"Messages / day\",\r\n    defaultLimit: 500,\r\n    defaultPeriod: 1,\r\n  },\r\n];\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '7', height: '7', x: '3', y: '3', rx: '1', key: '1g98yp' }],\n  ['rect', { width: '7', height: '7', x: '14', y: '3', rx: '1', key: '6d4xhi' }],\n  ['rect', { width: '7', height: '7', x: '14', y: '14', rx: '1', key: 'nxv5o0' }],\n  ['rect', { width: '7', height: '7', x: '3', y: '14', rx: '1', key: '1bb6yr' }],\n];\n\n/**\n * @component @name LayoutGrid\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIxNCIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iNyIgeD0iMTQiIHk9IjE0IiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIxNCIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layout-grid\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LayoutGrid = createLucideIcon('layout-grid', __iconNode);\n\nexport default LayoutGrid;\n","// ðŸ“„ src/pages/admin/FeatureAccess/PlanManagement.jsx\r\n\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { QUOTA_DEFINITIONS } from \"../../../capabilities/quotaKeys\";\r\n// Icons\r\nimport {\r\n  Check,\r\n  ShieldCheck,\r\n  Settings2,\r\n  Loader2,\r\n  Plus,\r\n  Edit3,\r\n  Trash2,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Filter,\r\n  AlertTriangle,\r\n  Clock4,\r\n  ChevronRight,\r\n  ChevronDown,\r\n  Search,\r\n  Layers,\r\n  Sparkles,\r\n  Shield,\r\n  LayoutGrid,\r\n} from \"lucide-react\";\r\n\r\n// API helpers\r\nimport {\r\n  getPlans,\r\n  createPlan,\r\n  updatePlan,\r\n  deletePlan,\r\n  getPlanPermissions,\r\n  updatePlanPermissions,\r\n  getPlanQuotas,\r\n  updatePlanQuotas,\r\n  assignPlanToBusiness,\r\n  getApprovedBusinessesForAssignment,\r\n} from \"../../../api/plans\";\r\n\r\nimport { getGroupedPermissions } from \"../../../api/permissions\";\r\nimport axiosClient from \"../../../api/axiosClient\";\r\n\r\n// Small helpers\r\nconst STATUS_COLORS = {\r\n  active: \"bg-emerald-100 text-emerald-700 border-emerald-200\",\r\n  inactive: \"bg-rose-100 text-rose-700 border-rose-200\",\r\n};\r\n\r\nconst QUOTA_PERIOD_LABELS = {\r\n  0: \"Lifetime\",\r\n  1: \"Daily\",\r\n  2: \"Monthly\",\r\n};\r\n\r\nconst KNOWN_QUOTA_LABELS = QUOTA_DEFINITIONS.reduce((acc, def) => {\r\n  acc[def.key] = def.label;\r\n  return acc;\r\n}, {});\r\n\r\n// --- Specialized UI Components ---\r\n\r\nconst Skeleton = ({ className }) => (\r\n  <div className={`animate-pulse bg-slate-200 rounded ${className}`} />\r\n);\r\n\r\nconst GlassCard = ({ children, className = \"\" }) => (\r\n  <div className={`bg-white/70 backdrop-blur-md border border-white/40 shadow-xl shadow-slate-200/50 rounded-2xl ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst QUOTA_PRESETS = [\r\n  { label: \"Free Tier\", values: { MESSAGES_PER_MONTH: 100, CRM_CONTACTS: 100, CATALOG_ITEMS: 10 } },\r\n  { label: \"Business\", values: { MESSAGES_PER_MONTH: 10000, CRM_CONTACTS: 5000, CATALOG_ITEMS: 200 } },\r\n  { label: \"Enterprise\", values: { MESSAGES_PER_MONTH: 100000, CRM_CONTACTS: 50000, CATALOG_ITEMS: 1000 } },\r\n  { label: \"Unlimited\", values: { MESSAGES_PER_MONTH: -1, CRM_CONTACTS: -1, CATALOG_ITEMS: -1 } },\r\n];\r\n\r\nfunction formatCompactNumber(value) {\r\n  if (value === -1) return \"âˆž\";\r\n  if (value >= 1_000_000)\r\n    return `${(value / 1_000_000).toFixed(1).replace(/\\.0$/, \"\")}M`;\r\n  if (value >= 1000) return `${(value / 1000).toFixed(1).replace(/\\.0$/, \"\")}k`;\r\n  return String(value);\r\n}\r\n\r\nfunction StatusPill({ isActive }) {\r\n  const label = isActive ? \"Active\" : \"Inactive\";\r\n  const color = isActive ? STATUS_COLORS.active : STATUS_COLORS.inactive;\r\n\r\n  return (\r\n    <span\r\n      className={`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${color}`}\r\n    >\r\n      <span\r\n        className={`h-1.5 w-1.5 rounded-full ${\r\n          isActive ? \"bg-emerald-500\" : \"bg-rose-500\"\r\n        }`}\r\n      />\r\n      {isActive ? \"Active\" : \"Inactive\"}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction TabButton({ id, label, active, onClick }) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={() => onClick(id)}\r\n      className={`relative px-2 py-2.5 text-sm font-semibold transition-all outline-none rounded-t-lg hover:bg-slate-50 ${\r\n        active ? \"text-emerald-600\" : \"text-slate-500 hover:text-slate-700\"\r\n      }`}\r\n    >\r\n      <span className=\"relative z-10\">{label}</span>\r\n      {active && (\r\n        <motion.div\r\n          layoutId=\"activeTabUnderline\"\r\n          className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-600 rounded-full\"\r\n          transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\r\n        />\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default function PlanManagementPage() {\r\n  const navigate = useNavigate();\r\n\r\n  // Plans\r\n  const [plans, setPlans] = useState([]);\r\n  const [loadingPlans, setLoadingPlans] = useState(false);\r\n  const [selectedPlan, setSelectedPlan] = useState(null);\r\n\r\n  // Active tab: plan | features | quotas\r\n\r\n  const [activeTab, setActiveTab] = useState(\"plan\");\r\n  // Plan form (create/update)\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [planForm, setPlanForm] = useState({\r\n    id: null,\r\n    name: \"\",\r\n    code: \"\",\r\n    description: \"\",\r\n    isActive: true,\r\n  });\r\n  const [savingPlan, setSavingPlan] = useState(false);\r\n  const [planModalOpen, setPlanModalOpen] = useState(false);\r\n\r\n  // Permissions\r\n  const [groupedPermissions, setGroupedPermissions] = useState([]);\r\n  const [loadingPermissions, setLoadingPermissions] = useState(false);\r\n  const [savingPermissions, setSavingPermissions] = useState(false);\r\n  const [selectedPermissionIds, setSelectedPermissionIds] = useState(new Set());\r\n  const [permissionFilter, setPermissionFilter] = useState(\"\");\r\n  const [expandedGroups, setExpandedGroups] = useState(new Set());\r\n\r\n  // Quotas\r\n  const [quotaRows, setQuotaRows] = useState([]);\r\n  const [quotaLoading, setQuotaLoading] = useState(false);\r\n  const [savingQuotas, setSavingQuotas] = useState(false);\r\n  const [showQuotaPresets, setShowQuotaPresets] = useState(false);\r\n\r\n  // Per-plan quota summary (for Plan tab)\r\n  const [planQuotaSummaries, setPlanQuotaSummaries] = useState({});\r\n \r\n  // Business assignment state\r\n  const [businesses, setBusinesses] = useState([]);\r\n  const [loadingBusinesses, setLoadingBusinesses] = useState(false);\r\n  const [businessFilter, setBusinessFilter] = useState(\"\");\r\n  const [savingBusinessPlan, setSavingBusinessPlan] = useState({}); // { businessId: bool }\r\n\r\n  // --- helpers for quota summaries ---\r\n  const buildQuotaSummary = useCallback(list => {\r\n    const normalizeKey = key => (key ?? \"\").toString().trim().toUpperCase();\r\n    const findRow = quotaKey => {\r\n      const row = list.find(\r\n        q => normalizeKey(q.quotaKey ?? q.QuotaKey) === quotaKey\r\n      );\r\n      if (!row) return null;\r\n      const limit =\r\n        typeof row.limit === \"number\"\r\n          ? row.limit\r\n          : typeof row.Limit === \"number\"\r\n          ? row.Limit\r\n          : undefined;\r\n      const period =\r\n        typeof row.period === \"number\"\r\n          ? row.period\r\n          : typeof row.Period === \"number\"\r\n          ? row.Period\r\n          : undefined;\r\n      if (limit === undefined) return null;\r\n      return { limit, period };\r\n    };\r\n\r\n    return {\r\n      messagesPerMonth: findRow(\"MESSAGES_PER_MONTH\"),\r\n      campaignsPerDay: findRow(\"CAMPAIGNS_PER_DAY\"),\r\n    };\r\n  }, []);\r\n\r\n  const prefetchPlanQuotaSummaries = useCallback(\r\n    async plansArray => {\r\n      try {\r\n        const entries = await Promise.all(\r\n          plansArray.map(async p => {\r\n            try {\r\n              const data = await getPlanQuotas(p.id);\r\n              const list = Array.isArray(data) ? data : data?.data ?? [];\r\n              return [p.id, buildQuotaSummary(list)];\r\n            } catch (err) {\r\n              console.error(\"Failed to prefetch quotas for plan\", p.id, err);\r\n              return [p.id, null];\r\n            }\r\n          })\r\n        );\r\n\r\n        setPlanQuotaSummaries(prev => {\r\n          const next = { ...prev };\r\n          for (const [id, summary] of entries) {\r\n            if (summary) next[id] = summary;\r\n          }\r\n          return next;\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Prefetch quota summaries failed\", err);\r\n      }\r\n    },\r\n    [buildQuotaSummary]\r\n  );\r\n\r\n  // Effects â€“ initial load\r\n  useEffect(() => {\r\n    loadPlans();\r\n    loadPermissions();\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const loadPlans = useCallback(async () => {\r\n    setLoadingPlans(true);\r\n    try {\r\n      const res = await getPlans();\r\n      const data = Array.isArray(res?.data ?? res) ? res.data ?? res : res;\r\n      const safe = data || [];\r\n      setPlans(safe);\r\n\r\n      if ((!selectedPlan || !selectedPlan.id) && safe.length > 0) {\r\n        setSelectedPlan(safe[0]);\r\n      }\r\n\r\n      if (Array.isArray(safe) && safe.length > 0) {\r\n        prefetchPlanQuotaSummaries(safe);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to load plans\");\r\n    } finally {\r\n      setLoadingPlans(false);\r\n    }\r\n  }, [selectedPlan, prefetchPlanQuotaSummaries]);\r\n\r\n  const loadPermissions = useCallback(async () => {\r\n    try {\r\n      const res = await getGroupedPermissions();\r\n      const payload = res?.data?.data ?? res?.data ?? res;\r\n      const groups = payload?.groups ?? payload ?? [];\r\n      setGroupedPermissions(groups);\r\n\r\n      const allGroups = new Set(groups.map(g => g.group ?? g.Group ?? \"Other\"));\r\n      setExpandedGroups(allGroups);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to load permissions catalog\");\r\n    }\r\n  }, []);\r\n\r\n  const loadPlanPermissions = useCallback(async planId => {\r\n    if (!planId) {\r\n      setSelectedPermissionIds(new Set());\r\n      return;\r\n    }\r\n    setLoadingPermissions(true);\r\n    try {\r\n      const res = await getPlanPermissions(planId);\r\n      const payload = res?.data ?? res;\r\n      const ids = new Set(payload.map(p => p.id ?? p.Id));\r\n      setSelectedPermissionIds(ids);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to load permissions for this plan\");\r\n    } finally {\r\n      setLoadingPermissions(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadPlanQuotas = useCallback(\r\n    async planId => {\r\n      if (planId === undefined || planId === null) {\r\n        setQuotaRows([]);\r\n        return;\r\n      }\r\n      setQuotaLoading(true);\r\n      try {\r\n        const data = await getPlanQuotas(planId);\r\n        const list = Array.isArray(data) ? data : data?.data ?? [];\r\n\r\n        const normalized = list.map(q => ({\r\n          id: q.id ?? q.Id,\r\n          planId: q.planId ?? q.PlanId,\r\n          quotaKey: (q.quotaKey ?? q.QuotaKey ?? \"\").toUpperCase(),\r\n          limit:\r\n            typeof q.limit === \"number\"\r\n              ? q.limit\r\n              : typeof q.Limit === \"number\"\r\n              ? q.Limit\r\n              : 0,\r\n          period:\r\n            typeof q.period === \"number\"\r\n              ? q.period\r\n              : typeof q.Period === \"number\"\r\n              ? q.Period\r\n              : 2,\r\n          denialMessage: q.denialMessage ?? q.DenialMessage ?? \"\",\r\n        }));\r\n\r\n        setQuotaRows(normalized);\r\n\r\n        setPlanQuotaSummaries(prev => ({\r\n          ...prev,\r\n          [planId]: buildQuotaSummary(normalized),\r\n        }));\r\n      } catch (err) {\r\n        console.error(err);\r\n        toast.error(\"Failed to load plan quotas\");\r\n        setQuotaRows([]);\r\n      } finally {\r\n        setQuotaLoading(false);\r\n      }\r\n    },\r\n    [buildQuotaSummary]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (selectedPlan?.id != null) {\r\n      loadPlanPermissions(selectedPlan.id);\r\n      loadPlanQuotas(selectedPlan.id);\r\n    } else {\r\n      setSelectedPermissionIds(new Set());\r\n      setQuotaRows([]);\r\n    }\r\n  }, [selectedPlan, loadPlanPermissions, loadPlanQuotas]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === \"assignment\") {\r\n      loadBusinesses();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const loadBusinesses = async () => {\r\n    setLoadingBusinesses(true);\r\n    try {\r\n      const res = await getApprovedBusinessesForAssignment();\r\n      setBusinesses(res?.data ?? []);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to load businesses\");\r\n    } finally {\r\n      setLoadingBusinesses(false);\r\n    }\r\n  };\r\n\r\n  const handleAssignPlan = async (businessId, planId) => {\r\n    if (!planId) return;\r\n    setSavingBusinessPlan(prev => ({ ...prev, [businessId]: true }));\r\n    try {\r\n      await assignPlanToBusiness(businessId, planId);\r\n      toast.success(\"Plan assigned successfully\");\r\n      loadBusinesses(); // refresh list\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(err?.response?.data?.message || \"Failed to assign plan\");\r\n    } finally {\r\n      setSavingBusinessPlan(prev => ({ ...prev, [businessId]: false }));\r\n    }\r\n  };\r\n\r\n  // ---- Plan selection + modal handlers ----\r\n  const handlePlanSelectChange = e => {\r\n    const id = e.target.value;\r\n    const found = plans.find(p => String(p.id) === String(id));\r\n    if (found) {\r\n      setSelectedPlan(found);\r\n    } else {\r\n      setSelectedPlan(null);\r\n    }\r\n  };\r\n\r\n  const openCreatePlan = () => {\r\n    setIsEditing(false);\r\n    setPlanForm({\r\n      id: null,\r\n      name: \"\",\r\n      code: \"\",\r\n      description: \"\",\r\n      isActive: true,\r\n    });\r\n    setPlanModalOpen(true);\r\n  };\r\n\r\n  const openEditPlan = plan => {\r\n    setIsEditing(true);\r\n    setPlanForm({\r\n      id: plan.id,\r\n      name: plan.name,\r\n      code: plan.code,\r\n      description: plan.description ?? \"\",\r\n      isActive: plan.isActive,\r\n    });\r\n    setPlanModalOpen(true);\r\n  };\r\n\r\n  const closePlanModal = () => {\r\n    setPlanModalOpen(false);\r\n  };\r\n\r\n  const handlePlanFormChange = (field, value) => {\r\n    setPlanForm(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSavePlan = async e => {\r\n    e.preventDefault();\r\n    if (!planForm.name?.trim() || !planForm.code?.trim()) {\r\n      toast.warn(\"Code and Name are required\");\r\n      return;\r\n    }\r\n\r\n    setSavingPlan(true);\r\n    try {\r\n      if (isEditing && planForm.id) {\r\n        await updatePlan(planForm.id, {\r\n          name: planForm.name.trim(),\r\n          code: planForm.code.trim(),\r\n          description: planForm.description?.trim() ?? \"\",\r\n          isActive: planForm.isActive,\r\n        });\r\n        toast.success(\"Plan updated\");\r\n      } else {\r\n        const res = await createPlan({\r\n          name: planForm.name.trim(),\r\n          code: planForm.code.trim(),\r\n          description: planForm.description?.trim() ?? \"\",\r\n          isActive: planForm.isActive,\r\n        });\r\n\r\n        const newId = res?.data?.id ?? res?.id;\r\n        toast.success(\"Plan created\");\r\n\r\n        if (newId) {\r\n          const newPlan = {\r\n            id: newId,\r\n            name: planForm.name.trim(),\r\n            code: planForm.code.trim(),\r\n            description: planForm.description?.trim() ?? \"\",\r\n            isActive: planForm.isActive,\r\n          };\r\n          setSelectedPlan(newPlan);\r\n        }\r\n      }\r\n\r\n      await loadPlans();\r\n      setPlanModalOpen(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to save plan\");\r\n    } finally {\r\n      setSavingPlan(false);\r\n    }\r\n  };\r\n\r\n  const handleDeletePlan = async plan => {\r\n    if (\r\n      !window.confirm(\r\n        `Are you sure you want to delete plan \"${plan.name}\"? This will not delete businesses, only the plan definition.`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deletePlan(plan.id);\r\n      toast.success(\"Plan deleted\");\r\n      await loadPlans();\r\n      if (selectedPlan?.id === plan.id) {\r\n        setSelectedPlan(null);\r\n        setSelectedPermissionIds(new Set());\r\n        setQuotaRows([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to delete plan\");\r\n    }\r\n  };\r\n\r\n  // ---- Permission mapping handlers ----\r\n  const togglePermissionForPlan = (permissionId, checked) => {\r\n    if (!permissionId) return;\r\n    setSelectedPermissionIds(prev => {\r\n      const next = new Set(prev);\r\n      if (checked) next.add(permissionId);\r\n      else next.delete(permissionId);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const toggleGroupPermissions = (features, enable) => {\r\n    const ids = features\r\n      .map(f => f.id ?? f.Id)\r\n      .filter(id => id !== undefined && id !== null);\r\n\r\n    setSelectedPermissionIds(prev => {\r\n      const next = new Set(prev);\r\n      if (enable) {\r\n        ids.forEach(id => next.add(id));\r\n      } else {\r\n        ids.forEach(id => next.delete(id));\r\n      }\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const handleSavePermissions = async () => {\r\n    if (!selectedPlan?.id) {\r\n      toast.warn(\"Select a plan first\");\r\n      return;\r\n    }\r\n\r\n    const enabledPermissionIds = Array.from(selectedPermissionIds);\r\n\r\n    setSavingPermissions(true);\r\n    try {\r\n      await updatePlanPermissions(selectedPlan.id, {\r\n        enabledPermissionIds,\r\n        replaceAll: true,\r\n      });\r\n\r\n      toast.success(\"Permissions updated for plan\");\r\n      await loadPlanPermissions(selectedPlan.id);\r\n    } catch (err) {\r\n      console.error(\"Failed to update plan permissions\", err);\r\n      toast.error(\"Failed to update plan permissions\");\r\n    } finally {\r\n      setSavingPermissions(false);\r\n    }\r\n  };\r\n\r\n  const toggleGroupExpanded = groupName => {\r\n    setExpandedGroups(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(groupName)) next.delete(groupName);\r\n      else next.add(groupName);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const filteredGroups = groupedPermissions.map(group => {\r\n    const name = group.group ?? group.Group ?? \"Other\";\r\n    const features = group.features ?? group.Features ?? [];\r\n    if (!permissionFilter.trim()) return { name, features };\r\n\r\n    const needle = permissionFilter.trim().toLowerCase();\r\n    const filtered = features.filter(p => {\r\n      const label = `${p.name ?? \"\"} ${p.code ?? \"\"} ${\r\n        p.description ?? \"\"\r\n      }`.toLowerCase();\r\n      return label.includes(needle);\r\n    });\r\n    return { name, features: filtered };\r\n  });\r\n\r\n  // ---- Quotas handlers ----\r\n  const handleQuotaFieldChange = (index, field, value) => {\r\n    setQuotaRows(prev => {\r\n      const next = [...prev];\r\n      const row = { ...next[index] };\r\n\r\n      if (field === \"quotaKey\") {\r\n        row.quotaKey = value.toUpperCase();\r\n      } else if (field === \"limit\") {\r\n        const parsed = Number(value);\r\n        row.limit = Number.isNaN(parsed) ? 0 : parsed;\r\n      } else if (field === \"period\") {\r\n        row.period = Number(value);\r\n      } else if (field === \"denialMessage\") {\r\n        row.denialMessage = value;\r\n      }\r\n\r\n      next[index] = row;\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const handleAddQuotaRow = () => {\r\n    if (!selectedPlan?.id) {\r\n      toast.warn(\"Select a plan first\");\r\n      return;\r\n    }\r\n    setQuotaRows(prev => [\r\n      ...prev,\r\n      {\r\n        id: null,\r\n        planId: selectedPlan.id,\r\n        quotaKey: \"\",\r\n        limit: 0,\r\n        period: 2,\r\n        denialMessage: \"\",\r\n      },\r\n    ]);\r\n  };\r\n\r\n  // âœ… NEW: remove quota row (for mistakes)\r\n  const handleRemoveQuotaRow = index => {\r\n    setQuotaRows(prev => prev.filter((_, i) => i !== index));\r\n    toast.success(\"Quota rule removed. Click â€œSave quotasâ€ to apply changes.\");\r\n  };\r\n\r\n  const applyQuotaPreset = values => {\r\n    if (!selectedPlan?.id) {\r\n      toast.warn(\"Select a plan first\");\r\n      return;\r\n    }\r\n\r\n    setQuotaRows(prev => {\r\n      // Create a map of existing rows for easy lookup\r\n      const next = [...prev];\r\n      \r\n      Object.entries(values).forEach(([key, limit]) => {\r\n        const uKey = key.toUpperCase();\r\n        const existingIdx = next.findIndex(q => (q.quotaKey ?? \"\").toUpperCase() === uKey);\r\n        \r\n        if (existingIdx >= 0) {\r\n          next[existingIdx] = { ...next[existingIdx], limit };\r\n        } else {\r\n          next.push({\r\n            id: null,\r\n            planId: selectedPlan.id,\r\n            quotaKey: uKey,\r\n            limit: limit,\r\n            period: uKey.includes(\"MONTH\") ? 2 : (uKey.includes(\"DAY\") ? 1 : 0),\r\n            denialMessage: \"\",\r\n          });\r\n        }\r\n      });\r\n      \r\n      return next;\r\n    });\r\n    \r\n    toast.info(\"Preset values applied. Review and Save.\");\r\n  };\r\n\r\n  const handleSaveQuotas = async () => {\r\n    if (selectedPlan?.id == null) {\r\n      toast.warn(\"Select a plan first\");\r\n      return;\r\n    }\r\n\r\n    const cleaned = quotaRows\r\n      .filter(q => (q.quotaKey ?? \"\").trim() !== \"\")\r\n      .map(q => {\r\n        const dto = {\r\n          planId: selectedPlan.id,\r\n          quotaKey: q.quotaKey.trim().toUpperCase(),\r\n          limit: q.limit,\r\n          period: q.period,\r\n          denialMessage: q.denialMessage?.trim() || null,\r\n        };\r\n\r\n        // âœ… Only send id if we actually have one\r\n        if (q.id) {\r\n          dto.id = q.id;\r\n        }\r\n\r\n        return dto;\r\n      });\r\n\r\n    if (cleaned.length === 0) {\r\n      const confirmed = window.confirm(\r\n        \"This will remove all quota rules for this plan. Continue?\"\r\n      );\r\n      if (!confirmed) return;\r\n    }\r\n\r\n    setSavingQuotas(true);\r\n    try {\r\n      await updatePlanQuotas(selectedPlan.id, cleaned);\r\n      toast.success(\"Quotas saved for this plan\");\r\n      await loadPlanQuotas(selectedPlan.id);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"Failed to save plan quotas\");\r\n    } finally {\r\n      setSavingQuotas(false);\r\n    }\r\n  };\r\n\r\n  // ---- Render helpers for tabs ----\r\n  const renderPlanSummaryTab = () => {\r\n    const summary = planQuotaSummaries[selectedPlan.id] || {\r\n      messagesPerMonth: null,\r\n      campaignsPerDay: null,\r\n    };\r\n\r\n    const totalPermissions = groupedPermissions.reduce(\r\n      (acc, g) => acc + (g.features ?? g.Features ?? []).length,\r\n      0\r\n    );\r\n    const enabledPermissions = selectedPermissionIds.size;\r\n    const permissionPercent = totalPermissions > 0 ? (enabledPermissions / totalPermissions) * 100 : 0;\r\n\r\n    return (\r\n      <div className=\"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-2 duration-400\">\r\n        \r\n        {/* Top Row: Identity, Limits Summary, Coverage */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n           {/* Card 1: Plan Identity */}\r\n           <div className=\"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between\">\r\n              <div className=\"flex items-center gap-3 mb-4\">\r\n                 <div className=\"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500\">\r\n                    <Shield className=\"h-5 w-5\" />\r\n                 </div>\r\n                 <h4 className=\"font-semibold text-slate-900 tracking-tight\">Plan Identity</h4>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3\">\r\n                 <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-[11px] font-semibold text-slate-500\">Name</span>\r\n                    <span className=\"text-sm font-medium text-slate-900\">{selectedPlan.name}</span>\r\n                 </div>\r\n                 <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-[11px] font-semibold text-slate-500\">Code</span>\r\n                    <span className=\"text-xs font-mono font-semibold text-slate-600 bg-slate-100 px-2 py-0.5 rounded border border-slate-200\">\r\n                       {selectedPlan.code}\r\n                    </span>\r\n                 </div>\r\n                 <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-[11px] font-semibold text-slate-500\">Status</span>\r\n                     <span className={`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold uppercase tracking-wide border ${\r\n                        selectedPlan.isActive \r\n                           ? \"bg-emerald-50 text-emerald-700 border-emerald-100\" \r\n                           : \"bg-slate-50 text-slate-500 border-slate-100\"\r\n                     }`}>\r\n                        {selectedPlan.isActive ? \"Active\" : \"Inactive\"}\r\n                     </span>\r\n                 </div>\r\n              </div>\r\n           </div>\r\n\r\n           {/* Card 2: Usage Summary */}\r\n           <div className=\"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between\">\r\n              <div>\r\n                 <h4 className=\"font-semibold text-slate-900 tracking-tight mb-1\">Usage Limits</h4>\r\n                 <p className=\"text-xs text-slate-500\">\r\n                    {quotaRows.length > 0 \r\n                      ? `${quotaRows.length} quota rules configured.` \r\n                      : \"No quotas configured yet.\"}\r\n                 </p>\r\n              </div>\r\n              \r\n              <div className=\"mt-4 pt-4 border-t border-slate-100\">\r\n                 <div className=\"flex items-baseline gap-2\">\r\n                    <span className=\"text-3xl font-bold text-slate-900\">{quotaRows.length}</span>\r\n                    <span className=\"text-xs font-medium text-slate-500\">total rules</span>\r\n                 </div>\r\n                 <p className=\"text-[10px] text-slate-400 mt-1\">\r\n                    Set limits in the <b>Quotas & usage</b> tab.\r\n                 </p>\r\n              </div>\r\n           </div>\r\n\r\n           {/* Card 3: Feature Coverage */}\r\n           <div className=\"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between\">\r\n              <div>\r\n                 <h4 className=\"font-semibold text-slate-900 tracking-tight mb-1\">Feature Coverage</h4>\r\n                 <div className=\"flex items-baseline gap-2 mt-2\">\r\n                     <span className=\"text-2xl font-bold text-emerald-600\">{enabledPermissions}</span>\r\n                     <span className=\"text-xs font-medium text-slate-500\">of {totalPermissions} features</span>\r\n                 </div>\r\n              </div>\r\n\r\n              <div className=\"mt-4 space-y-2\">\r\n                 <div className=\"w-full h-2.5 bg-slate-100 rounded-full overflow-hidden\">\r\n                    <motion.div \r\n                      initial={{ width: 0 }}\r\n                      animate={{ width: `${permissionPercent}%` }}\r\n                      className=\"h-full bg-emerald-500\" \r\n                    />\r\n                 </div>\r\n                 <p className=\"text-[10px] text-slate-400 text-right\">\r\n                    {permissionPercent.toFixed(0)}% coverage\r\n                 </p>\r\n              </div>\r\n           </div>\r\n        </div>\r\n\r\n        {/* Quota Breakdown Grid */}\r\n        <div className=\"flex flex-col gap-4\">\r\n           <h3 className=\"text-xs font-semibold text-slate-500 uppercase tracking-widest pl-1\">Quota Breakdown For This Plan</h3>\r\n           \r\n           {quotaRows.length === 0 ? (\r\n              <div className=\"bg-slate-50 rounded-xl border border-dashed border-slate-200 p-8 flex flex-col items-center justify-center text-center\">\r\n                 <div className=\"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center mb-3\">\r\n                    <LayoutGrid className=\"h-5 w-5 text-slate-400\" />\r\n                 </div>\r\n                 <p className=\"text-sm font-medium text-slate-900\">No Quotas Defined</p>\r\n                 <p className=\"text-xs text-slate-500 mt-1\">This plan has no specific usage limits.</p>\r\n              </div>\r\n           ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                 {quotaRows.map((quota, idx) => (\r\n                    <div key={idx} className=\"bg-white border border-slate-200/60 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow\">\r\n                       <div className=\"flex justify-between items-start mb-4\">\r\n                          <div className=\"p-2 rounded-lg bg-emerald-50 text-emerald-600\">\r\n                             <LayoutGrid className=\"h-4 w-4\" />\r\n                          </div>\r\n                          <span className=\"text-xl font-bold text-slate-900\">\r\n                             {formatCompactNumber(quota.limit)}\r\n                          </span>\r\n                       </div>\r\n                       \r\n                       <div>\r\n                          <p className=\"text-[10px] font-semibold text-slate-400 uppercase tracking-wide truncate\" title={quota.quotaKey}>\r\n                             {quota.quotaKey}\r\n                          </p>\r\n                          <p className=\"text-xs font-medium text-slate-600 capitalize mt-0.5\">\r\n                             {QUOTA_PERIOD_LABELS[quota.period]}\r\n                          </p>\r\n                       </div>\r\n                    </div>\r\n                 ))}\r\n              </div>\r\n           )}\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderFeatureMappingTab = () => {\r\n    const filteredGroups = groupedPermissions\r\n      .map(group => {\r\n        const features =\r\n          (group.features ?? group.Features ?? []).filter(f => {\r\n            const needle = permissionFilter.toLowerCase();\r\n            return (\r\n              f.name?.toLowerCase().includes(needle) ||\r\n              f.code?.toLowerCase().includes(needle)\r\n            );\r\n          }) || [];\r\n        return { ...group, features };\r\n      })\r\n      .filter(g => g.features.length > 0);\r\n\r\n    return (\r\n      <div className=\"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400\">\r\n        <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-8 pt-4\">\r\n          {filteredGroups.map((groupData) => {\r\n            const { name, features } = groupData;\r\n            const menuName = groupData.group ?? groupData.Group;\r\n            \r\n            const ids = features\r\n              .map(f => f.id ?? f.Id)\r\n              .filter(id => id !== undefined && id !== null);\r\n            const enabledCount = ids.filter(id =>\r\n              selectedPermissionIds.has(id)\r\n            ).length;\r\n            const allEnabled = enabledCount === ids.length;\r\n\r\n            return (\r\n              <div key={name} className=\"group/section\">\r\n                <div className=\"flex items-center justify-between mb-4 px-2\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-1.5 h-6 bg-emerald-500 rounded-full\" />\r\n                    <div>\r\n                      {menuName && (\r\n                        <div className=\"flex items-center gap-2 mb-0.5\">\r\n                          <span className=\"text-xs font-semibold text-slate-500\">\r\n                            {menuName}\r\n                          </span>\r\n                          <span className=\"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-100 rounded-md text-[10px] font-semibold shadow-sm\">\r\n                            {enabledCount}/{ids.length} Active\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      <h5 className=\"text-sm font-bold text-slate-900\">\r\n                        {name}\r\n                      </h5>\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => toggleGroupPermissions(features, !allEnabled)}\r\n                    className=\"text-[10px] font-semibold text-emerald-600 hover:text-emerald-800 transition-colors\"\r\n                  >\r\n                    {allEnabled ? \"Remove All\" : \"Select All\"}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                  {features.map(f => {\r\n                    const isEnabled = selectedPermissionIds.has(f.id ?? f.Id);\r\n                    return (\r\n                      <motion.div \r\n                        key={f.id ?? f.Id}\r\n                        layout\r\n                        onClick={() => togglePermissionForPlan(f.id ?? f.Id, !isEnabled)}\r\n                        className={`p-4 rounded-lg border transition-all flex items-start gap-4 cursor-pointer select-none group/item ${\r\n                          isEnabled\r\n                            ? \"bg-emerald-600 border-emerald-600 shadow-lg shadow-emerald-600/20\"\r\n                            : \"bg-slate-50 border-slate-200 hover:border-emerald-200 hover:bg-white\"\r\n                        }`}\r\n                      >\r\n                        <div className={`mt-0.5 h-8 w-8 rounded-lg border flex items-center justify-center transition-all shrink-0 ${\r\n                          isEnabled\r\n                            ? \"bg-emerald-500/30 border-emerald-400/50 text-white\"\r\n                            : \"bg-white border-slate-300 group-hover/item:border-emerald-300 text-slate-300\"\r\n                        }`}>\r\n                          {isEnabled && <Check className=\"h-4 w-4 stroke-[3]\" />}\r\n                        </div>\r\n                        <div className=\"min-w-0 pt-0.5\">\r\n                           <p className={`text-sm font-semibold truncate ${isEnabled ? \"text-white\" : \"text-slate-700\"}`}>\r\n                             {f.name}\r\n                           </p>\r\n                           <p className={`text-[10px] mt-0.5 line-clamp-1 font-medium ${isEnabled ? \"text-emerald-100/80\" : \"text-slate-300\"}`}>\r\n                             {f.description || \"Description not available\"}\r\n                           </p>\r\n                        </div>\r\n                      </motion.div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderQuotasTab = () => {\r\n    return (\r\n      <div className=\"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400\">\r\n        <div className=\"flex-1 overflow-hidden flex flex-col pt-2\">\r\n          {quotaLoading ? (\r\n             <div className=\"flex-1 p-6 space-y-4\">\r\n                <Skeleton className=\"h-16 w-full rounded-2xl\" />\r\n                <Skeleton className=\"h-16 w-full rounded-2xl\" />\r\n                <Skeleton className=\"h-16 w-full rounded-2xl\" />\r\n             </div>\r\n          ) : quotaRows.length === 0 ? (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center py-20 bg-slate-50/20 rounded-3xl border border-dashed border-slate-200\">\r\n               <div className=\"w-16 h-16 bg-white rounded-3xl border border-slate-100 flex items-center justify-center shadow-sm mb-6\">\r\n                  <Clock4 className=\"h-8 w-8 text-slate-200\" />\r\n               </div>\r\n               <h4 className=\"text-sm font-semibold text-slate-900\">No defined resource limits</h4>\r\n               <p className=\"text-xs text-slate-500 mt-2 mb-6\">System defaults will apply until a specific plan override is configured.</p>\r\n               <button \r\n                onClick={handleAddQuotaRow}\r\n                className=\"px-6 py-2 bg-white rounded-xl border border-slate-200 text-xs font-semibold text-emerald-600 hover:bg-emerald-50 hover:border-emerald-200 transition-all\"\r\n              >\r\n                Create First Limit\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex-1 flex flex-col min-h-0 bg-white border border-slate-200/60 rounded-3xl shadow-sm overflow-hidden\">\r\n               {/* Table Header Wrapper */}\r\n               <div className=\"px-8 py-5 border-b border-slate-100 bg-slate-50/30 flex items-center justify-between gap-4\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                     <div className=\"p-2 bg-emerald-50 rounded-lg text-emerald-600\">\r\n                        <Layers className=\"h-4 w-4\" />\r\n                     </div>\r\n                     <div>\r\n                       <h4 className=\"text-sm font-semibold text-slate-900 leading-none\">Limit Configuration Table</h4>\r\n                       <p className=\"text-[10px] text-slate-400 mt-1 font-medium\">Define quantity and time window for specific plan features.</p>\r\n                     </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center gap-2\">\r\n                     <div className=\"relative inline-flex rounded-xl shadow-sm\">\r\n                        <motion.button\r\n                           whileHover={{ backgroundColor: \"#F8FAFC\" }}\r\n                           whileTap={{ backgroundColor: \"#F1F5F9\" }}\r\n                           type=\"button\"\r\n                           onClick={handleAddQuotaRow}\r\n                           disabled={!selectedPlan}\r\n                           className=\"relative z-10 inline-flex items-center gap-2 rounded-l-xl bg-white border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all disabled:opacity-50\"\r\n                        >\r\n                          <Plus className=\"h-3.5 w-3.5\" />\r\n                          Add Limit\r\n                        </motion.button>\r\n                        <button\r\n                           type=\"button\"\r\n                           disabled={!selectedPlan}\r\n                           onClick={() => setShowQuotaPresets(!showQuotaPresets)}\r\n                           className=\"relative z-0 -ml-px inline-flex items-center rounded-r-xl border border-slate-200 bg-slate-50 px-2 py-2 text-sm font-medium text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:z-10 focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 transition-all disabled:opacity-50\"\r\n                        >\r\n                           <ChevronDown className={`h-3.5 w-3.5 transition-transform ${showQuotaPresets ? \"rotate-180\" : \"\"}`} />\r\n                        </button>\r\n\r\n                        {/* Dropdown Menu */}\r\n                        <AnimatePresence>\r\n                           {showQuotaPresets && (\r\n                              <motion.div\r\n                                 initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                                 animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                 exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                                 className=\"absolute right-0 top-full mt-2 w-48 origin-top-right rounded-xl bg-white shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden\"\r\n                              >\r\n                                 <div className=\"p-1\">\r\n                                    <div className=\"px-3 py-2 text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-1\">\r\n                                       Use Preset\r\n                                    </div>\r\n                                    {QUOTA_PRESETS.map((preset) => (\r\n                                       <button\r\n                                          key={preset.label}\r\n                                          onClick={() => {\r\n                                             applyQuotaPreset(preset.values);\r\n                                             setShowQuotaPresets(false);\r\n                                          }}\r\n                                          className=\"flex w-full items-center rounded-lg px-3 py-2 text-xs text-slate-700 hover:bg-emerald-50 hover:text-emerald-700 transition-colors\"\r\n                                       >\r\n                                          <Sparkles className=\"mr-2 h-3.5 w-3.5 text-slate-400\" />\r\n                                          {preset.label}\r\n                                       </button>\r\n                                    ))}\r\n                                 </div>\r\n                              </motion.div>\r\n                           )}\r\n                        </AnimatePresence>\r\n                     </div>\r\n\r\n                     <motion.button\r\n                        whileHover={{ y: -1 }}\r\n                        whileTap={{ y: 0 }}\r\n                        type=\"button\"\r\n                        onClick={handleSaveQuotas}\r\n                        disabled={savingQuotas || !selectedPlan}\r\n                        className=\"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold text-white hover:bg-emerald-600 shadow-md shadow-emerald-50 transition-all disabled:opacity-50\"\r\n                     >\r\n                       {savingQuotas ? <Loader2 className=\"h-3.5 w-3.5 animate-spin\" /> : <CheckCircle2 className=\"h-3.5 w-3.5\" />}\r\n                       Save\r\n                     </motion.button>\r\n                  </div>\r\n               </div>\r\n\r\n               <div className=\"flex-1 overflow-y-auto px-8 py-6 custom-scrollbar\">\r\n                  <table className=\"w-full border-separate border-spacing-y-2 -mt-2\">\r\n                    <thead>\r\n                      <tr className=\"text-[11px] font-semibold text-slate-400 uppercase tracking-widest\">\r\n                        <th className=\"px-4 py-2 text-left w-[30%]\">Capability Key</th>\r\n                        <th className=\"px-4 py-2 text-left w-[20%]\">Time Window</th>\r\n                        <th className=\"px-4 py-2 text-left w-[15%]\">Max Units</th>\r\n                        <th className=\"px-4 py-2 text-left\">UX Context</th>\r\n                        <th className=\"px-4 py-2 text-right\">Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {quotaRows.map((row, idx) => {\r\n                        const isNew = !row.id && !row.Id;\r\n                        return (\r\n                          <motion.tr \r\n                            key={idx}\r\n                            initial={isNew ? { opacity: 0, x: -10 } : false}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            className=\"group\"\r\n                          >\r\n                            <td className=\"px-3 py-1.5 bg-white border-y border-l border-slate-100 rounded-l-xl group-hover:bg-slate-50/50 transition-colors\">\r\n                              <select\r\n                                className=\"w-full rounded-xl border border-slate-200/60 bg-white/70 px-3 py-2.5 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all\"\r\n                                value={row.quotaKey}\r\n                                onChange={e => handleQuotaFieldChange(idx, \"quotaKey\", e.target.value)}\r\n                              >\r\n                                <option value=\"\" disabled>Feature Key</option>\r\n                                {QUOTA_DEFINITIONS.map(def => (\r\n                                  <option key={def.key} value={def.key}>{def.label}</option>\r\n                                ))}\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors\">\r\n                              <select\r\n                                  className=\"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all\"\r\n                                  value={row.period}\r\n                                  onChange={e => handleQuotaFieldChange(idx, \"period\", parseInt(e.target.value, 10))}\r\n                                >\r\n                                  {Object.entries(QUOTA_PERIOD_LABELS).map(([val, label]) => (\r\n                                    <option key={val} value={val}>{label}</option>\r\n                                  ))}\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors\">\r\n                              <input\r\n                                type=\"number\"\r\n                                className=\"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-semibold text-emerald-600 focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all\"\r\n                                value={row.limit}\r\n                                onChange={e => handleQuotaFieldChange(idx, \"limit\", parseInt(e.target.value, 10))}\r\n                                placeholder=\"-1 for âˆž\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors\">\r\n                              <input\r\n                                type=\"text\"\r\n                                className=\"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-medium focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all\"\r\n                                placeholder=\"User-facing denial text...\"\r\n                                value={row.denialMessage ?? \"\"}\r\n                                onChange={e => handleQuotaFieldChange(idx, \"denialMessage\", e.target.value)}\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-3 py-1.5 bg-white border-y border-r border-slate-100 rounded-r-xl group-hover:bg-slate-50/50 transition-colors text-right\">\r\n                               <motion.button\r\n                                  whileHover={{ scale: 1.1 }}\r\n                                  whileTap={{ scale: 0.9 }}\r\n                                  type=\"button\"\r\n                                  onClick={() => handleRemoveQuotaRow(idx)}\r\n                                  className=\"p-2.5 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all\"\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                              </motion.button>\r\n                            </td>\r\n                          </motion.tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n               </div>\r\n               \r\n               <div className=\"px-8 py-4 bg-amber-50/50 border-t border-amber-100 flex items-center gap-3\">\r\n                  <div className=\"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center text-amber-600\">\r\n                     <AlertTriangle className=\"h-4 w-4\" />\r\n                  </div>\r\n                  <p className=\"text-[10px] text-amber-800 font-bold leading-relaxed max-w-2xl\">\r\n                    CAUTION: Quotas are enforced in real-time by the Message Engine. Incorrectly low limits can \r\n                    block production traffic. Use presets for safe starting points.\r\n                  </p>\r\n               </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderBusinessAssignmentTab = () => {\r\n    const filtered = businesses.filter(b => {\r\n      const needle = businessFilter.toLowerCase().trim();\r\n      return (\r\n        b.companyName?.toLowerCase().includes(needle) ||\r\n        b.businessEmail?.toLowerCase().includes(needle)\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400\">\r\n        <div className=\"flex-1 overflow-hidden flex flex-col bg-white border border-slate-200/60 rounded-lg shadow-sm\">\r\n           <div className=\"overflow-x-auto custom-scrollbar\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"bg-slate-100 border-b border-slate-200 text-[11px] font-semibold text-slate-600 text-left\">\r\n                    <th className=\"px-6 py-3\">Organization Profile</th>\r\n                    <th className=\"px-6 py-3\">Current Entitlement</th>\r\n                    <th className=\"px-6 py-3 text-right\">Assignment Action</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-slate-50\">\r\n                  {loadingBusinesses ? (\r\n                    Array.from({ length: 5 }).map((_, i) => (\r\n                      <tr key={i}>\r\n                        <td className=\"px-6 py-3\"><Skeleton className=\"h-4 w-40 mb-2\"/><Skeleton className=\"h-3 w-60\"/></td>\r\n                        <td className=\"px-6 py-3\"><Skeleton className=\"h-7 w-24 rounded-xl\"/></td>\r\n                        <td className=\"px-6 py-3 text-right\"><Skeleton className=\"h-10 w-40 rounded-xl ml-auto\"/></td>\r\n                      </tr>\r\n                    ))\r\n                  ) : filtered.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={3} className=\"px-6 py-20 text-center\">\r\n                        <div className=\"flex flex-col items-center gap-4 text-slate-400\">\r\n                          <div className=\"w-16 h-16 bg-slate-50 rounded-3xl flex items-center justify-center\">\r\n                            <Layers className=\"h-8 w-8 text-slate-200\" />\r\n                          </div>\r\n                          <p className=\"text-sm font-semibold text-slate-500\">No organizations match your query.</p>\r\n                          <p className=\"text-xs\">Try searching for a different company name or administrative email.</p>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    filtered.map((b, idx) => (\r\n                      <motion.tr \r\n                        key={b.id}\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: idx * 0.02 }}\r\n                        className=\"hover:bg-slate-50/30 transition-colors group\"\r\n                      >\r\n                        <td className=\"px-6 py-3\">\r\n                          <div className=\"flex flex-col min-w-0\">\r\n                             <span className=\"font-semibold text-slate-900 truncate\">{b.companyName}</span>\r\n                             <span className=\"text-[11px] text-slate-400 font-medium truncate\">{b.businessEmail}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-3\">\r\n                           <div className=\"flex items-center gap-2\">\r\n                              <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold bg-emerald-50 text-emerald-700 border border-emerald-200/60 shadow-sm\">\r\n                                {b.planName || \"No Plan\"}\r\n                              </span>\r\n                           </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-3 text-right\">\r\n                          <div className=\"flex items-center justify-end gap-4\">\r\n                            <div className=\"relative\">\r\n                              <select\r\n                                className=\"appearance-none rounded-md border border-slate-200/60 bg-white px-5 py-2.5 pr-10 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all cursor-pointer hover:border-emerald-400 shadow-sm\"\r\n                                value={b.planId || \"\"}\r\n                                onChange={(e) => handleAssignPlan(b.id, e.target.value)}\r\n                                disabled={savingBusinessPlan[b.id]}\r\n                              >\r\n                                <option value=\"\" disabled>Change Status...</option>\r\n                                {plans.map(p => (\r\n                                  <option key={p.id} value={p.id}>{p.name}</option>\r\n                                ))}\r\n                              </select>\r\n                              <ChevronDown className=\"absolute right-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none\" />\r\n                            </div>\r\n                            \r\n                            {savingBusinessPlan[b.id] && (\r\n                              <Loader2 className=\"h-4 w-4 animate-spin text-emerald-500\" />\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </motion.tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n           </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // ---- Render ----\r\n  return (\r\n    <div className=\"relative flex flex-col h-full bg-slate-50/50 overflow-hidden\">\r\n      {/* Page header - Unified and Professional */}\r\n      <header className=\"px-8 py-5 border-b border-slate-200/60 bg-white/50 backdrop-blur-sm flex items-center justify-between z-10\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 rounded-2xl bg-emerald-600 flex items-center justify-center text-white shadow-lg shadow-emerald-200\">\r\n            <Settings2 className=\"h-5 w-5\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-xl font-bold text-slate-900 tracking-tight leading-none\">\r\n              Plan Management\r\n            </h1>\r\n            <p className=\"text-xs text-slate-500 mt-1\">\r\n              Configure subscription tiers, entitlements, and resource quotas.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          <motion.button\r\n            whileHover={{ y: -1 }}\r\n            whileTap={{ y: 0 }}\r\n            onClick={() => navigate(\"/app/admin/permissions\")}\r\n            className=\"px-4 py-2 rounded-xl border border-slate-200 bg-white text-xs font-semibold text-slate-600 hover:text-emerald-600 hover:border-emerald-100 hover:bg-emerald-50/30 transition-all flex items-center gap-2\"\r\n          >\r\n            <ShieldCheck className=\"h-4 w-4\" />\r\n            Permissions Catalog\r\n          </motion.button>\r\n          <motion.button\r\n            whileHover={{ y: -1 }}\r\n            whileTap={{ y: 0 }}\r\n            onClick={openCreatePlan}\r\n            className=\"px-4 py-2 rounded-xl bg-emerald-600 text-xs font-semibold text-white shadow-lg shadow-emerald-100 hover:bg-emerald-700 transition-all flex items-center gap-2\"\r\n          >\r\n            <Plus className=\"h-4 w-4\" />\r\n            Add Plan\r\n          </motion.button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 flex overflow-hidden\">\r\n        {/* Sidebar: Plan Selection */}\r\n        <aside className=\"w-80 border-r border-slate-200/60 bg-gradient-to-b from-white/40 to-slate-50/40 flex flex-col\">\r\n          <div className=\"px-6 py-4 flex items-center justify-between border-b border-slate-200/40\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\r\n                Available Plans\r\n              </span>\r\n              <span className=\"px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-md text-[10px] font-bold\">\r\n                {plans.length}\r\n              </span>\r\n            </div>\r\n            {loadingPlans && <Loader2 className=\"h-3 w-3 animate-spin text-emerald-400\" />}\r\n          </div>\r\n          \r\n          <div className=\"flex-1 overflow-y-auto px-4 py-4 space-y-2.5 custom-scrollbar\">\r\n            {plans.map((p, idx) => {\r\n              const isSelected = selectedPlan?.id === p.id;\r\n              const summary = planQuotaSummaries[p.id];\r\n              const businessCount = businesses.filter(b => b.planId === p.id || b.PlanId === p.id).length;\r\n              \r\n              // Determine tier based on plan name (you can customize this logic)\r\n              const getTierInfo = (planName) => {\r\n                const name = planName.toLowerCase();\r\n                if (name.includes('enterprise') || name.includes('unlimited')) {\r\n                  return { color: 'amber', label: 'Enterprise', dotClass: 'bg-amber-400', bgClass: 'bg-amber-50', textClass: 'text-amber-700', borderClass: 'border-amber-200' };\r\n                } else if (name.includes('business') || name.includes('pro') || name.includes('premium')) {\r\n                  return { color: 'purple', label: 'Business', dotClass: 'bg-purple-400', bgClass: 'bg-purple-50', textClass: 'text-purple-700', borderClass: 'border-purple-200' };\r\n                } else {\r\n                  return { color: 'blue', label: 'Starter', dotClass: 'bg-blue-400', bgClass: 'bg-blue-50', textClass: 'text-blue-700', borderClass: 'border-blue-200' };\r\n                }\r\n              };\r\n              \r\n              const tierInfo = getTierInfo(p.name);\r\n              \r\n              return (\r\n                <motion.div\r\n                  key={p.id}\r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: idx * 0.05 }}\r\n                  className=\"relative group\"\r\n                >\r\n                  <motion.button\r\n                    whileHover={{ scale: 1.02, y: -2 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    onClick={() => setSelectedPlan(p)}\r\n                    className={`w-full px-4 py-3.5 rounded-lg border transition-all text-left flex flex-col gap-2 relative overflow-hidden ${\r\n                      isSelected\r\n                        ? \"bg-emerald-50 border-emerald-200\"\r\n                        : \"bg-white/40 border-slate-200/60 hover:bg-white hover:border-slate-300\"\r\n                    }`}\r\n                  >\r\n                    {/* Accent Line */}\r\n                    {isSelected && (\r\n                      <motion.div \r\n                        layoutId=\"sidebarActiveIndicator\"\r\n                        className=\"absolute left-0 top-0 bottom-0 w-1 bg-emerald-600 rounded-r-full\"\r\n                        transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\r\n                      />\r\n                    )}\r\n                    \r\n                    {/* Header Row */}\r\n                    <div className=\"flex items-center justify-between w-full gap-2 pl-2\">\r\n                      <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                        <span className={`text-sm font-semibold truncate ${isSelected ? \"text-emerald-700\" : \"text-slate-800\"}`}>\r\n                          {p.name}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {isSelected && (\r\n                        <div className=\"shrink-0\">\r\n                          <div className=\"w-2 h-2 rounded-full bg-emerald-600 animate-pulse\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Metadata Pills */}\r\n                    <div className=\"flex items-center gap-2 flex-wrap pl-2\">\r\n                      {/* Quota Summary */}\r\n                      {summary?.messagesPerMonth && (\r\n                        <div className=\"flex items-center gap-1 px-2 py-1 bg-emerald-50 rounded-lg border border-emerald-100\">\r\n                          <Sparkles className=\"h-3 w-3 text-emerald-500\" />\r\n                          <span className=\"text-[10px] font-bold text-emerald-700\">\r\n                            {formatCompactNumber(summary.messagesPerMonth.limit)}/mo\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </motion.button>\r\n                  \r\n                  {/* Quick Actions - Show on Hover */}\r\n                  <div className={`absolute right-2 top-2 flex items-center gap-1 transition-all ${\r\n                    isSelected ? \"opacity-0 group-hover:opacity-100\" : \"opacity-0 group-hover:opacity-100\"\r\n                  }`}>\r\n                    <motion.button\r\n                      whileHover={{ scale: 1.1 }}\r\n                      whileTap={{ scale: 0.9 }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        openEditPlan(p);\r\n                      }}\r\n                      className=\"p-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-400 hover:text-emerald-600 hover:border-emerald-200 shadow-sm transition-colors\"\r\n                      title=\"Edit Plan\"\r\n                    >\r\n                      <Edit3 className=\"h-3 w-3\" />\r\n                    </motion.button>\r\n                    <motion.button\r\n                      whileHover={{ scale: 1.1 }}\r\n                      whileTap={{ scale: 0.9 }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleDeletePlan(p);\r\n                      }}\r\n                      className=\"p-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-400 hover:text-rose-600 hover:border-rose-200 shadow-sm transition-colors\"\r\n                      title=\"Delete Plan\"\r\n                    >\r\n                      <Trash2 className=\"h-3 w-3\" />\r\n                    </motion.button>\r\n                  </div>\r\n                </motion.div>\r\n              );\r\n            })}\r\n\r\n            {!loadingPlans && plans.length === 0 && (\r\n              <div className=\"py-12 px-4 text-center\">\r\n                <div className=\"w-14 h-14 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                  <Layers className=\"h-7 w-7 text-slate-300\" />\r\n                </div>\r\n                <p className=\"text-sm font-semibold text-slate-600 mb-1\">No plans configured</p>\r\n                <p className=\"text-xs text-slate-400 leading-relaxed max-w-[200px] mx-auto\">\r\n                  Create your first subscription tier to begin managing entitlements\r\n                </p>\r\n                <button \r\n                  onClick={openCreatePlan}\r\n                  className=\"mt-4 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-semibold hover:bg-emerald-100 border border-emerald-200 transition-colors\"\r\n                >\r\n                  <Plus className=\"h-3 w-3 inline mr-1\" />\r\n                  Create Plan\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Detail Content Area */}\r\n        <section className=\"flex-1 flex flex-col bg-white overflow-hidden relative\">\r\n          {!selectedPlan ? (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center p-10 text-center\">\r\n              <div className=\"w-16 h-16 rounded-3xl bg-slate-50 flex items-center justify-center mb-6\">\r\n                 <Sparkles className=\"h-8 w-8 text-slate-200\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-slate-800\">Ready to manage?</h3>\r\n              <p className=\"text-sm text-slate-500 max-w-xs mt-2\">\r\n                Select a subscription plan from the sidebar to view its profile, permissions, and system limits.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"px-8 bg-white border-b border-slate-100 flex items-center justify-between pt-6 pb-0\">\r\n                <div className=\"flex items-center gap-8\">\r\n                  <TabButton\r\n                    id=\"plan\"\r\n                    label=\"Plan Details\"\r\n                    active={activeTab === \"plan\"}\r\n                    onClick={setActiveTab}\r\n                  />\r\n                  <TabButton\r\n                    id=\"features\"\r\n                    label=\"Feature Map\"\r\n                    active={activeTab === \"features\"}\r\n                    onClick={setActiveTab}\r\n                  />\r\n                  <TabButton\r\n                    id=\"quotas\"\r\n                    label=\"Quota Limit\"\r\n                    active={activeTab === \"quotas\"}\r\n                    onClick={setActiveTab}\r\n                  />\r\n                  <TabButton\r\n                    id=\"assignment\"\r\n                    label=\"Plan Assignment\"\r\n                    active={activeTab === \"assignment\"}\r\n                    onClick={setActiveTab}\r\n                  />\r\n                </div>\r\n\r\n                {activeTab === \"features\" && (\r\n                  <div className=\"flex items-center gap-3 mb-1\">\r\n                    <div className=\"relative w-64\">\r\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400\" />\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Filter capabilities...\"\r\n                        className=\"w-full pl-9 pr-3 py-2 rounded-lg border border-slate-200 bg-slate-50/50 text-xs font-semibold focus:bg-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400\"\r\n                        value={permissionFilter}\r\n                        onChange={e => setPermissionFilter(e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <motion.button\r\n                      whileHover={{ scale: 1.02 }}\r\n                      whileTap={{ scale: 0.98 }}\r\n                      onClick={handleSavePermissions}\r\n                      disabled={savingPermissions || !selectedPlan}\r\n                      className=\"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-xs font-semibold text-white hover:bg-emerald-700 shadow-sm shadow-emerald-100 transition-all disabled:opacity-50\"\r\n                    >\r\n                      {savingPermissions ? (\r\n                        <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n                      ) : (\r\n                        <CheckCircle2 className=\"h-3.5 w-3.5\" />\r\n                      )}\r\n                      Save Map\r\n                    </motion.button>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"assignment\" && (\r\n                  <div className=\"flex items-center gap-3 mb-1\">\r\n                    <div className=\"relative w-64\">\r\n                       <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400\" />\r\n                       <input\r\n                         type=\"text\"\r\n                         placeholder=\"Search companies...\"\r\n                         className=\"w-full pl-9 pr-3 py-2 rounded-lg border border-slate-200 bg-slate-50/50 text-xs font-semibold focus:bg-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400\"\r\n                         value={businessFilter}\r\n                         onChange={e => setBusinessFilter(e.target.value)}\r\n                       />\r\n                    </div>\r\n                    <motion.button\r\n                      whileHover={{ rotate: 180 }}\r\n                      onClick={loadBusinesses}\r\n                      className=\"p-2 rounded-lg border border-slate-200 bg-white text-slate-400 hover:text-emerald-600 hover:border-emerald-100 transition-all shadow-sm\"\r\n                      title=\"Refresh list\"\r\n                    >\r\n                      <Clock4 className={`h-4 w-4 ${loadingBusinesses ? \"animate-spin\" : \"\"}`} />\r\n                    </motion.button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Main Content Scroll Area */}\r\n              <div className=\"flex-1 overflow-y-auto px-8 py-8 custom-scrollbar relative\">\r\n                <AnimatePresence mode=\"wait\">\r\n                  <motion.div\r\n                    key={`${selectedPlan.id}-${activeTab}`}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    transition={{ duration: 0.2, ease: \"easeInOut\" }}\r\n                    className=\"h-full min-h-[400px]\"\r\n                  >\r\n                    {activeTab === \"plan\" && renderPlanSummaryTab()}\r\n                    {activeTab === \"features\" && renderFeatureMappingTab()}\r\n                    {activeTab === \"quotas\" && renderQuotasTab()}\r\n                    {activeTab === \"assignment\" && renderBusinessAssignmentTab()}\r\n                  </motion.div>\r\n                </AnimatePresence>\r\n              </div>\r\n            </>\r\n          )}\r\n        </section>\r\n      </main>\r\n\r\n      {/* Plan create/edit modal */}\r\n      {planModalOpen && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n          <motion.div \r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"absolute inset-0 bg-slate-900/50 backdrop-blur-md\"\r\n            onClick={closePlanModal}\r\n          />\r\n          <motion.div \r\n            initial={{ opacity: 0, scale: 0.96, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            transition={{ type: \"spring\", bounce: 0.3 }}\r\n            className=\"bg-white rounded-2xl shadow-2xl w-full max-w-lg border border-slate-200/60 overflow-hidden relative z-10\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"px-6 pt-6 pb-4 border-b border-slate-100/80 bg-gradient-to-b from-slate-50/50 to-white\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-11 h-11 rounded-xl bg-emerald-500 flex items-center justify-center text-white shadow-lg shadow-emerald-200\">\r\n                     {isEditing ? <Edit3 className=\"h-5 w-5\" /> : <Plus className=\"h-5 w-5\" />}\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-slate-900 tracking-tight\">\r\n                      {isEditing ? \"Modify Plan\" : \"Create New Plan\"}\r\n                    </h3>\r\n                    <p className=\"text-xs text-slate-500 mt-0.5\">\r\n                      Configure subscription properties\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={closePlanModal}\r\n                  className=\"p-1.5 rounded-lg text-slate-400 hover:text-slate-700 hover:bg-slate-100 transition-all\"\r\n                >\r\n                  <XCircle className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Form */}\r\n            <form\r\n              onSubmit={handleSavePlan}\r\n              className=\"px-6 py-5 flex flex-col gap-5\"\r\n            >\r\n              {/* Name and Code Row */}\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-xs font-semibold text-slate-600 uppercase tracking-wide\">\r\n                    Display Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    placeholder=\"e.g. Enterprise Plus\"\r\n                    className=\"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-semibold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400 placeholder:font-normal\"\r\n                    value={planForm.name}\r\n                    onChange={e => handlePlanFormChange(\"name\", e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-xs font-semibold text-slate-600 uppercase tracking-wide\">\r\n                    System Code\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    placeholder=\"E_PLUS_24\"\r\n                    className=\"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-semibold uppercase tracking-widest focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400 placeholder:font-normal placeholder:normal-case\"\r\n                    value={planForm.code}\r\n                    onChange={e =>\r\n                      handlePlanFormChange(\"code\", e.target.value.toUpperCase())\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-xs font-semibold text-slate-600 uppercase tracking-wide\">\r\n                  Scope Description\r\n                </label>\r\n                <textarea\r\n                  rows={3}\r\n                  placeholder=\"Summarize the value proposition...\"\r\n                  className=\"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-medium leading-relaxed focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all resize-none placeholder:text-slate-400\"\r\n                  value={planForm.description}\r\n                  onChange={e =>\r\n                    handlePlanFormChange(\"description\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              {/* Active Toggle */}\r\n              <div className=\"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200/60\">\r\n                <div \r\n                  className={`w-10 h-6 rounded-full relative transition-all cursor-pointer ${planForm.isActive ? \"bg-emerald-500\" : \"bg-slate-300\"}`}\r\n                  onClick={() => handlePlanFormChange(\"isActive\", !planForm.isActive)}\r\n                >\r\n                  <motion.div \r\n                    animate={{ x: planForm.isActive ? 16 : 2 }}\r\n                    transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\r\n                    className=\"absolute top-1 left-0 w-4 h-4 bg-white rounded-full shadow-md\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                   <span className=\"text-xs font-semibold text-slate-900 block\">Make plan active</span>\r\n                   <span className=\"text-[10px] text-slate-500\">Available for assignment</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex items-center justify-end gap-2 pt-3 border-t border-slate-100\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={closePlanModal}\r\n                  className=\"px-4 py-2 rounded-lg border-2 border-slate-200 text-xs font-semibold text-slate-600 hover:bg-slate-50 hover:border-slate-300 transition-all\"\r\n                >\r\n                  Discard\r\n                </button>\r\n                <motion.button\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  type=\"submit\"\r\n                  disabled={savingPlan}\r\n                  className=\"px-6 py-2 rounded-lg bg-emerald-600 text-xs font-semibold text-white shadow-lg shadow-emerald-200 hover:bg-emerald-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2 transition-all\"\r\n                >\r\n                  {savingPlan ? (\r\n                    <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n                  ) : (\r\n                    <CheckCircle2 className=\"h-3.5 w-3.5\" />\r\n                  )}\r\n                  {isEditing ? \"Save Changes\" : \"Create Plan\"}\r\n                </motion.button>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// // ðŸ“„ src/pages/admin/FeatureAccess/PlanManagement.jsx\r\n"],"names":["QUOTA_KEYS","Object","freeze","MESSAGES_PER_MONTH","CAMPAIGNS_PER_DAY","TEMPLATES_TOTAL","MESSAGES_PER_DAY","QUOTA_DEFINITIONS","key","label","defaultLimit","defaultPeriod","LayoutGrid","createLucideIcon","width","height","x","y","rx","QUOTA_PERIOD_LABELS","Skeleton","reduce","acc","def","_ref","className","_jsx","concat","QUOTA_PRESETS","values","CRM_CONTACTS","CATALOG_ITEMS","formatCompactNumber","value","toFixed","replace","String","TabButton","_ref4","id","active","onClick","_jsxs","type","children","motion","div","layoutId","transition","bounce","duration","PlanManagementPage","navigate","useNavigate","plans","setPlans","useState","loadingPlans","setLoadingPlans","selectedPlan","setSelectedPlan","activeTab","setActiveTab","isEditing","setIsEditing","planForm","setPlanForm","name","code","description","isActive","savingPlan","setSavingPlan","planModalOpen","setPlanModalOpen","groupedPermissions","setGroupedPermissions","loadingPermissions","setLoadingPermissions","savingPermissions","setSavingPermissions","selectedPermissionIds","setSelectedPermissionIds","Set","permissionFilter","setPermissionFilter","expandedGroups","setExpandedGroups","quotaRows","setQuotaRows","quotaLoading","setQuotaLoading","savingQuotas","setSavingQuotas","showQuotaPresets","setShowQuotaPresets","planQuotaSummaries","setPlanQuotaSummaries","businesses","setBusinesses","loadingBusinesses","setLoadingBusinesses","businessFilter","setBusinessFilter","savingBusinessPlan","setSavingBusinessPlan","buildQuotaSummary","useCallback","list","findRow","quotaKey","row","find","q","_q$quotaKey","QuotaKey","toString","trim","toUpperCase","limit","Limit","undefined","period","Period","messagesPerMonth","campaignsPerDay","prefetchPlanQuotaSummaries","async","entries","Promise","all","plansArray","map","_data$data","data","getPlanQuotas","p","Array","isArray","err","console","error","prev","next","_objectSpread","summary","useEffect","loadPlans","loadPermissions","_res$data","_res$data2","res","getPlans","safe","length","toast","_ref5","_res$data$data","_res$data3","_ref6","_payload$groups","getGroupedPermissions","payload","groups","allGroups","g","_ref7","_g$group","group","Group","loadPlanPermissions","planId","_res$data4","getPlanPermissions","ids","_p$id","Id","loadPlanQuotas","_data$data2","normalized","_q$id","_q$planId","_ref8","_q$quotaKey2","_ref9","_q$denialMessage","PlanId","denialMessage","DenialMessage","loadBusinesses","_res$data5","getApprovedBusinessesForAssignment","openCreatePlan","closePlanModal","handlePlanFormChange","field","handleQuotaFieldChange","_ref0","_group$group","_ref1","_group$features","features","Features","needle","toLowerCase","filter","_p$name","_p$code","_p$description","includes","index","parsed","Number","isNaN","handleAddQuotaRow","warn","handleSaveQuotas","cleaned","_q$quotaKey4","_q$denialMessage2","dto","window","confirm","updatePlanQuotas","success","Settings2","button","whileHover","whileTap","ShieldCheck","Plus","Loader2","idx","isSelected","b","planName","getTierInfo","initial","opacity","animate","delay","scale","Sparkles","e","stopPropagation","plan","_plan$description","openEditPlan","title","Edit3","deletePlan","handleDeletePlan","Trash2","Layers","_Fragment","Search","placeholder","onChange","target","enabledPermissionIds","from","updatePlanPermissions","replaceAll","disabled","CheckCircle2","rotate","Clock4","AnimatePresence","mode","exit","ease","renderPlanSummaryTab","totalPermissions","_ref11","_g$features","enabledPermissions","size","permissionPercent","Shield","quota","renderFeatureMappingTab","filteredGroups","_ref12","_group$features2","f","_f$name","_f$code","groupData","_groupData$group","menuName","_f$id2","enabledCount","has","allEnabled","toggleGroupPermissions","enable","_f$id","forEach","add","delete","_f$id3","_f$id4","isEnabled","layout","_f$id5","permissionId","checked","Check","backgroundColor","ChevronDown","preset","_ref10","uKey","existingIdx","findIndex","_q$quotaKey3","push","info","_row$denialMessage","isNew","tr","parseInt","_ref13","val","handleRemoveQuotaRow","_","i","AlertTriangle","renderBusinessAssignmentTab","filtered","_b$companyName","_b$businessEmail","companyName","businessEmail","colSpan","businessId","assignPlanToBusiness","_err$response","_err$response$data","response","message","handleAssignPlan","XCircle","onSubmit","_planForm$name","_planForm$code","preventDefault","_planForm$description","_planForm$description2","updatePlan","_planForm$description3","_planForm$description4","_res$data$id","_res$data6","createPlan","newId","_planForm$description5","_planForm$description6","newPlan","required","rows","stiffness","damping"],"sourceRoot":""}