/*! For license information please see 106.f81e022d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkxbytechat_ui=self.webpackChunkxbytechat_ui||[]).push([[106],{20917:(e,t,n)=>{var s,l,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();t.ZX=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(document.getElementById("react-confirm-alert-firm-svg"))return;var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var s=document.createElementNS(e,"svg");s.setAttribute("id","react-confirm-alert-firm-svg"),s.setAttribute("class","react-confirm-alert-svg"),s.appendChild(n),document.body.appendChild(s)}(),function(e){var t=document.getElementById(e.targetId||v);e.targetId&&!t&&console.error("React Confirm Alert:","Can not get element id (#"+e.targetId+")");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id=v,document.body.appendChild(t)),(f=(0,c.createRoot)(t)).render(i.default.createElement(p,e))}(e)};var r=n(65043),i=u(r),d=u(n(65173)),c=n(84391);function u(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=(l=s=function(e){function t(){var e,n,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,a=Array(l),o=0;o<l;o++)a[o]=arguments[o];return n=s=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),s.handleClickButton=function(e){e.onClick&&e.onClick(),s.close()},s.handleClickOverlay=function(e){var t=s.props,n=t.closeOnClickOutside,l=t.onClickOutside,a=e.target===s.overlay;n&&a&&(l(),s.close()),e.stopPropagation()},s.close=function(){var e=s.props.afterClose;document.body.classList.remove("react-confirm-alert-body-element"),function(e){var t=document.getElementById(e.targetId||v);t&&f.unmount(t)}(s.props),function(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t);document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}(e)},s.keyboard=function(e){var t=s.props,n=t.closeOnEscape,l=t.onKeypressEscape,a=t.onkeyPress,o=t.keyCodeForClose,r=e.keyCode,i=27===r;o.includes(r)&&s.close(),n&&i&&(l(e),s.close()),a&&a()},s.componentDidMount=function(){document.addEventListener("keydown",s.keyboard,!1)},s.componentWillUnmount=function(){document.removeEventListener("keydown",s.keyboard,!1),s.props.willUnmount()},s.renderCustomUI=function(){var e=s.props,t=e.title,n=e.message,l=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:l,onClose:s.close})},m(s,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,s=t.message,l=t.buttons,o=t.childrenElement,r=t.customUI,d=t.overlayClassName;return i.default.createElement("div",{className:"react-confirm-alert-overlay "+d,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},i.default.createElement("div",{className:"react-confirm-alert"},r?this.renderCustomUI():i.default.createElement("div",{className:"react-confirm-alert-body"},n&&i.default.createElement("h1",null,n),s,o(),i.default.createElement("div",{className:"react-confirm-alert-button-group"},l.map((function(t,n){return i.default.createElement("button",a({key:n,className:t.className},t,{onClick:function(n){return e.handleClickButton(t)}}),t.label)}))))))}}]),t}(r.Component),s.propTypes={title:d.default.string,message:d.default.string,buttons:d.default.array.isRequired,childrenElement:d.default.func,customUI:d.default.func,closeOnClickOutside:d.default.bool,closeOnEscape:d.default.bool,keyCodeForClose:d.default.arrayOf(d.default.number),willUnmount:d.default.func,afterClose:d.default.func,onClickOutside:d.default.func,onKeypressEscape:d.default.func,onkeyPress:d.default.func,overlayClassName:d.default.string},s.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},l);var f=null,v="react-confirm-alert"},82106:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var s=n(89379),l=n(65043),a=n(92382),o=n(39292);const r=(0,n(77784).A)("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);var i=n(76245),d=n(9855),c=n(36210),u=n(97950),m=n(20917),p=n(57488),f=n(73216),v=n(35870),x=n(65086),b=(n(94727),n(70579));const h=["admin","superadmin"],g={pending:"pending",hold:"hold",rejected:"rejected",approved:"approved"},y=[{key:g.pending,label:"Pending"},{key:g.hold,label:"On hold"},{key:g.rejected,label:"Rejected"},{key:g.approved,label:"Approved"}],j={[g.pending]:"No pending businesses found.",[g.hold]:"No businesses on hold.",[g.rejected]:"No rejected businesses found.",[g.approved]:"No approved businesses found."};function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.pending;const n=String(e||"").toLowerCase();return"approved"===n||"approve"===n?g.approved:"rejected"===n||"reject"===n?g.rejected:"hold"===n||"on_hold"===n||"on-hold"===n?g.hold:"pending"===n?g.pending:t}function w(e,t){var n,l,a,o;if(!e)return null;const r=null!==(n=null!==(l=null!==(a=e.businessId)&&void 0!==a?a:e.id)&&void 0!==l?l:e.businessID)&&void 0!==n?n:e.business_id;if(!r)return null;const i=N(null!==(o=e.approvalStatus)&&void 0!==o?o:e.status,t);return(0,s.A)((0,s.A)({},e),{},{businessId:r,approvalStatus:i})}function C(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)}function k(e){let{disabled:t,items:n=[]}=e;const s=(0,l.useRef)(null),o=(0,l.useRef)(null),[r,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)({top:0,left:0}),m=40*Math.max(1,n.length)+12,p=()=>{const e=s.current;if(!e)return;const t=e.getBoundingClientRect(),n=t.bottom+m+8<=window.innerHeight?t.bottom+8:Math.max(8,t.top-m-8);let l=t.right-176;l=Math.min(l,window.innerWidth-176-8),l=Math.max(8,l),c({top:n,left:l})};return(0,l.useEffect)((()=>{if(!r)return;const e=e=>{var t,n;const l=e.target;null!==(t=s.current)&&void 0!==t&&t.contains(l)||null!==(n=o.current)&&void 0!==n&&n.contains(l)||i(!1)},t=e=>{"Escape"===e.key&&i(!1)},n=()=>p();return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("keydown",t,!0),window.addEventListener("scroll",n,!0),window.addEventListener("resize",n,!0),()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0),document.removeEventListener("keydown",t,!0),window.removeEventListener("scroll",n,!0),window.removeEventListener("resize",n,!0)}}),[r]),n.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{ref:s,type:"button",disabled:t,onClick:()=>{t||(r||p(),i((e=>!e)))},className:"inline-flex items-center gap-1.5 rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-emerald-200 disabled:opacity-50",children:["More ",(0,b.jsx)(a.A,{size:14})]}),r&&(0,u.createPortal)((0,b.jsx)("div",{ref:o,style:{position:"fixed",top:d.top,left:d.left,width:176},className:"z-[1000] rounded-lg border border-slate-200 bg-white shadow-lg ring-1 ring-black/5 overflow-hidden",role:"menu",children:n.map((e=>(0,b.jsxs)("button",{type:"button",onClick:()=>{i(!1),e.onClick()},className:e.className,role:"menuitem",children:[e.icon,e.label]},e.key)))}),document.body)]}):null}function A(){var e;const{isLoading:t,role:n="",hasAllAccess:a}=(0,x.h)(),u=(0,f.zy)(),[A,E]=(0,l.useState)(g.pending),[S,L]=(0,l.useState)([]),[_,O]=(0,l.useState)(!0),[I,R]=(0,l.useState)(""),[P,z]=(0,l.useState)({}),[B,M]=(0,l.useState)(!1),[D,U]=(0,l.useState)(""),[F,T]=(0,l.useState)("all"),[H,K]=(0,l.useState)("createdAt_desc"),Z=String(n||"").toLowerCase(),q=(0,l.useMemo)((()=>{const e=new URLSearchParams(u.search||"").get("businessId");return e?String(e):""}),[u.search]),W=(0,l.useMemo)((()=>{const e={[g.pending]:0,[g.hold]:0,[g.rejected]:0,[g.approved]:0};for(const n of S){var t;const s=N(null!==(t=null===n||void 0===n?void 0:n.approvalStatus)&&void 0!==t?t:null===n||void 0===n?void 0:n.status,g.pending);e[s]=(e[s]||0)+1}return e}),[S]),X=(0,l.useMemo)((()=>S.filter((e=>{var t;return N(null!==(t=null===e||void 0===e?void 0:e.approvalStatus)&&void 0!==t?t:null===e||void 0===e?void 0:e.status,g.pending)===A}))),[A,S]),G=(0,l.useMemo)((()=>{const e=new Map;for(const t of X){const n=String((null===t||void 0===t?void 0:t.plan)||"").trim();if(!n)continue;const s=n.toLowerCase();e.has(s)||e.set(s,n)}return Array.from(e.entries()).sort(((e,t)=>e[0].localeCompare(t[0])))}),[X]),Y=(0,l.useMemo)((()=>{const e=D.trim().toLowerCase(),t=[...X.filter((t=>{if("all"!==F){if(String((null===t||void 0===t?void 0:t.plan)||"").toLowerCase()!==F)return!1}if(!e)return!0;const n=String((null===t||void 0===t?void 0:t.companyName)||"").toLowerCase(),s=String((null===t||void 0===t?void 0:t.businessEmail)||"").toLowerCase(),l=String((null===t||void 0===t?void 0:t.representativeName)||"").toLowerCase(),a=String((null===t||void 0===t?void 0:t.phone)||"").toLowerCase();return n.includes(e)||s.includes(e)||l.includes(e)||a.includes(e)}))];return t.sort(((e,t)=>{if("createdAt_asc"===H||"createdAt_desc"===H){const n=new Date((null===e||void 0===e?void 0:e.createdAt)||0).getTime()||0,s=new Date((null===t||void 0===t?void 0:t.createdAt)||0).getTime()||0;return"createdAt_asc"===H?n-s:s-n}const n=String((null===e||void 0===e?void 0:e.companyName)||""),s=String((null===t||void 0===t?void 0:t.companyName)||"");return n.localeCompare(s)})),t}),[F,D,H,X]);if((0,l.useEffect)((()=>{if(t)return;if(!a&&!h.includes(Z))return void M(!0);let e=!0;const n=async function(e){let{silent:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await v.default.get(e,{withCredentials:!0,__silentToast:t,__silent401:t,__silent403:t,__silent429:t});return s=n.data,Array.isArray(s)?s:null!==s&&void 0!==s&&s.success&&Array.isArray(null===s||void 0===s?void 0:s.data)?s.data:[];var s},l=async e=>{for(const l of e)try{return await n(l,{silent:!0})}catch(s){var t;const e=null===s||void 0===s||null===(t=s.response)||void 0===t?void 0:t.status;if(401===e||403===e)return[];if(404===e||405===e)continue;continue}return[]};return(async()=>{O(!0),R("");const t=n("/businesses/pending",{silent:!1}),a=l(["/businesses/hold","/businesses/held","/businesses/on-hold","/businesses/on_hold","/businesses/pending?status=hold","/businesses/pending?status=on-hold"]),o=l(["/businesses/rejected","/businesses/reject","/businesses/pending?status=rejected","/businesses/pending?status=reject"]),r=n("/businesses/approved",{silent:!0}).catch((()=>[])),[i,d,c,u]=await Promise.allSettled([t,a,o,r]);if(!e)return;if("rejected"===i.status){var m,p,f,v,x,b;const e=null===(m=i.reason)||void 0===m||null===(p=m.response)||void 0===p?void 0:p.status;return 401===e||403===e?(M(!0),void O(!1)):(R((null===(f=i.reason)||void 0===f||null===(v=f.response)||void 0===v||null===(x=v.data)||void 0===x?void 0:x.message)||(null===(b=i.reason)||void 0===b?void 0:b.message)||"Failed to fetch businesses"),L([]),void O(!1))}const h=Array.isArray(i.value)?i.value:[],y="fulfilled"===d.status?d.value:[],j="fulfilled"===c.status?c.value:[],C="fulfilled"===u.status?u.value:[],k=new Map,A=(e,t)=>{for(const n of e){const e=w(n,t);if(!e)continue;const l=k.get(String(e.businessId));k.set(String(e.businessId),(0,s.A)((0,s.A)({},l),e))}};A(h,g.pending),A(y,g.hold),A(j,g.rejected),A(C,g.approved);const E=Array.from(k.values()).map((e=>{var t;return(0,s.A)((0,s.A)({},e),{},{approvalStatus:N(null!==(t=null===e||void 0===e?void 0:e.approvalStatus)&&void 0!==t?t:null===e||void 0===e?void 0:e.status,g.pending)})}));L(E),O(!1)})(),()=>{e=!1}}),[t,a,Z]),t)return(0,b.jsx)("div",{"data-test-id":"business-approvals-auth-loading","aria-busy":"true",style:{display:"none"}});if(B)return(0,b.jsx)(f.C5,{to:"/no-access",replace:!0});const J=e=>{let{action:t,businessName:n,onConfirm:s}=e;(0,m.ZX)({title:"Confirm ".concat(t),message:n?"Are you sure you want to ".concat(t.toLowerCase(),' "').concat(n,'"?'):"Are you sure you want to ".concat(t.toLowerCase()," this business?"),buttons:[{label:"Yes",onClick:s},{label:"No",onClick:()=>{}}]})},Q=(e,t)=>{const n=String(e);z((e=>(0,s.A)((0,s.A)({},e),{},{[n]:!0}))),v.default.post("/businesses/".concat(String(t).toLowerCase(),"/").concat(e),null,{withCredentials:!0}).then((()=>{const e=String(t||"").toLowerCase(),l="approve"===e?"Business activated successfully":"reject"===e?"Business rejected successfully":"hold"===e?"Business put on hold":"Business updated successfully";p.oR.success(l);const a=N(t,g.pending);L((e=>e.map((e=>String(e.businessId)===n?(0,s.A)((0,s.A)({},e),{},{approvalStatus:a,status:a}):e)))),E(a)})).catch((e=>{var n,s,l;const a=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status;401!==a&&403!==a||M(!0);const o=(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||e.message||"Failed to ".concat(t," business");p.oR.error(o)})).finally((()=>z((e=>{const t=(0,s.A)({},e);return delete t[n],t}))))},V=(null===(e=y.find((e=>e.key===A)))||void 0===e?void 0:e.label)||"Businesses";return(0,b.jsxs)("div",{className:"p-6 space-y-4 bg-[#f5f6f7] min-h-[calc(100vh-80px)]",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm ring-1 ring-black/5 p-4 md:p-5",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h1",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:"Business Approvals"}),(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-emerald-50 text-emerald-700 ring-1 ring-inset ring-emerald-200",children:_?"Loading...":"".concat(W[A]," ").concat(V)})]}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Review, hold, reject, and activate businesses from one place."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"relative w-full sm:w-[320px]",children:[(0,b.jsx)(o.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{value:D,onChange:e=>U(e.target.value),placeholder:"Search company, email, phone...",className:"w-full pl-9 pr-3 py-2 rounded-lg border border-slate-200 bg-white text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-300"})]}),(0,b.jsxs)("select",{value:F,onChange:e=>T(e.target.value),className:"w-full sm:w-[170px] px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-300","aria-label":"Filter by plan",children:[(0,b.jsx)("option",{value:"all",children:"All plans"}),G.map((e=>{let[t,n]=e;return(0,b.jsx)("option",{value:t,children:n},t)}))]}),(0,b.jsxs)("select",{value:H,onChange:e=>K(e.target.value),className:"w-full sm:w-[190px] px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-300","aria-label":"Sort businesses",children:[(0,b.jsx)("option",{value:"createdAt_desc",children:"Newest first"}),(0,b.jsx)("option",{value:"createdAt_asc",children:"Oldest first"}),(0,b.jsx)("option",{value:"companyName_asc",children:"Company A - Z"})]})]})]}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:y.map((e=>{const t=e.key===A;return(0,b.jsxs)("button",{type:"button",onClick:()=>E(e.key),className:["inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm font-semibold border",t?"bg-emerald-50 text-emerald-800 border-emerald-200":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"].join(" "),children:[(0,b.jsx)("span",{children:e.label}),(0,b.jsx)("span",{className:["inline-flex items-center justify-center min-w-[22px] h-[18px] px-1 rounded-full text-[11px] font-bold",t?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700"].join(" "),children:W[e.key]||0})]},e.key)}))}),I&&(0,b.jsx)("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:I})]}),_&&(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm ring-1 ring-black/5 p-4",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),(0,b.jsx)("div",{className:"h-10 bg-slate-100 rounded"}),(0,b.jsx)("div",{className:"h-10 bg-slate-100 rounded"}),(0,b.jsx)("div",{className:"h-10 bg-slate-100 rounded"})]})}),!_&&0===X.length&&(0,b.jsx)("div",{className:"bg-white p-8 rounded-xl shadow-sm ring-1 ring-black/5 text-center text-slate-600",children:j[A]||"No businesses found."}),!_&&X.length>0&&0===Y.length&&(0,b.jsx)("div",{className:"bg-white p-8 rounded-xl shadow-sm ring-1 ring-black/5 text-center text-slate-600",children:"No matches for your filters."}),!_&&Y.length>0&&(0,b.jsx)("div",{className:"overflow-x-auto overflow-y-visible bg-white rounded-xl shadow-sm ring-1 ring-black/5",children:(0,b.jsxs)("table",{className:"min-w-[1020px] w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-slate-50",children:(0,b.jsxs)("tr",{className:"text-xs font-semibold text-slate-600",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Company"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Contact"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Plan"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Created At"}),A===g.approved&&(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Approved At"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100",children:Y.map((e=>{var t;const n=e.businessId,l=String(n),a=q&&String(n)===q,o=N(null!==(t=null===e||void 0===e?void 0:e.approvalStatus)&&void 0!==t?t:null===e||void 0===e?void 0:e.status,g.pending),u=function(e){switch(N(e,g.pending)){case g.approved:return{label:"Approved",className:"bg-emerald-50 text-emerald-700 ring-emerald-200"};case g.rejected:return{label:"Rejected",className:"bg-red-50 text-red-700 ring-red-200"};case g.hold:return{label:"On hold",className:"bg-amber-50 text-amber-800 ring-amber-200"};default:return{label:"Pending",className:"bg-slate-50 text-slate-700 ring-slate-200"}}}(o),m=!!P[l],f=o===g.approved?"Approved":o===g.pending?"Approve":"Activate",x=m||o===g.approved,h=[];return o===g.pending?(h.push({key:"hold",label:"Put on hold",icon:(0,b.jsx)(r,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-amber-800 hover:bg-amber-50 flex items-center gap-2",onClick:()=>J({action:"Hold",businessName:e.companyName,onConfirm:()=>Q(n,"hold")})}),h.push({key:"reject",label:"Reject",icon:(0,b.jsx)(i.A,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-red-700 hover:bg-red-50 flex items-center gap-2",onClick:()=>J({action:"Reject",businessName:e.companyName,onConfirm:()=>Q(n,"reject")})})):o===g.hold?h.push({key:"reject",label:"Reject",icon:(0,b.jsx)(i.A,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-red-700 hover:bg-red-50 flex items-center gap-2",onClick:()=>J({action:"Reject",businessName:e.companyName,onConfirm:()=>Q(n,"reject")})}):o===g.rejected?h.push({key:"hold",label:"Put on hold",icon:(0,b.jsx)(r,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-amber-800 hover:bg-amber-50 flex items-center gap-2",onClick:()=>J({action:"Hold",businessName:e.companyName,onConfirm:()=>Q(n,"hold")})}):o===g.approved&&(h.push({key:"hold",label:"Put on hold",icon:(0,b.jsx)(r,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-amber-800 hover:bg-amber-50 flex items-center gap-2",onClick:()=>J({action:"Hold",businessName:e.companyName,onConfirm:()=>Q(n,"hold")})}),h.push({key:"reject",label:"Reject",icon:(0,b.jsx)(i.A,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-red-700 hover:bg-red-50 flex items-center gap-2",onClick:()=>J({action:"Reject",businessName:e.companyName,onConfirm:()=>Q(n,"reject")})})),o!==g.approved&&h.push({key:"delete",label:"Delete Permanently",icon:(0,b.jsx)(d.A,{size:14}),className:"w-full px-3 py-2 text-left text-xs font-semibold text-red-600 hover:bg-red-50 flex items-center gap-2 border-t border-slate-100 mt-1",onClick:()=>J({action:"HARD DELETE",businessName:e.companyName,onConfirm:()=>(e=>{const t=String(e);z((e=>(0,s.A)((0,s.A)({},e),{},{[t]:!0}))),v.default.delete("/businesses/".concat(e),{withCredentials:!0}).then((()=>{p.oR.success("Business permanently deleted"),L((e=>e.filter((e=>String(e.businessId)!==t))))})).catch((e=>{var t,n;const s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||e.message||"Failed to delete business";p.oR.error(s)})).finally((()=>z((e=>{const n=(0,s.A)({},e);return delete n[t],n}))))})(n)})}),(0,b.jsxs)("tr",{className:["hover:bg-emerald-50/40 transition-colors",a?"bg-emerald-50/60":""].join(" "),children:[(0,b.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900",children:e.companyName||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-700 max-w-[280px] truncate",children:(0,b.jsx)("span",{title:e.businessEmail||"",children:e.businessEmail||"-"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-700",children:(0,b.jsxs)("div",{className:"leading-5",children:[(0,b.jsx)("div",{className:"font-medium text-slate-900",children:e.representativeName||"-"}),(0,b.jsx)("div",{className:"text-slate-600",children:e.phone||"-"})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-700 capitalize",children:e.plan||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-700",children:C(e.createdAt)}),A===g.approved&&(0,b.jsx)("td",{className:"px-4 py-3 text-slate-700",children:C(e.approvedAt)}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset ".concat(u.className),children:u.label})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)("button",{disabled:x,onClick:()=>J({action:f,businessName:e.companyName,onConfirm:()=>Q(n,"approve")}),className:["inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-semibold focus:outline-none focus:ring-2 disabled:opacity-50",o===g.approved?"bg-slate-100 text-slate-600 ring-1 ring-inset ring-slate-200":"bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-200"].join(" "),children:[(0,b.jsx)(c.A,{size:14}),f]}),(0,b.jsx)(k,{disabled:m,items:h})]})})]},l)}))})]})})]})}},94727:()=>{}}]);
//# sourceMappingURL=106.f81e022d.chunk.js.map