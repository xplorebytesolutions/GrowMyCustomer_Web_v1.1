{"version":3,"file":"static/js/897.499f06d3.chunk.js","mappings":"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","sources":["pages/Workspaces/CatalogWorkspacePage.jsx"],"sourcesContent":["// üìÑ src/pages/Workspaces/CatalogWorkspacePage.jsx\r\n\r\nimport {\r\n  Archive,\r\n  Pin,\r\n  ArrowRightCircle,\r\n  MoreVertical,\r\n  ShoppingCart,\r\n  PlusCircle,\r\n  Zap,\r\n  AlertTriangle,\r\n} from \"lucide-react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\r\n// ‚úÖ auth + entitlements\r\nimport { useAuth } from \"../../app/providers/AuthProvider\";\r\nimport { FK } from \"../../capabilities/featureKeys\";\r\n// üîî Global upgrade flow\r\nimport { requestUpgrade } from \"../../utils/upgradeBus\";\r\n\r\nconst PERM_BY_BLOCK = {\r\n  \"product-catalog\": [FK.CATALOG_VIEW], // view products\r\n  \"product-form\": [FK.CATALOG_CREATE], // create products\r\n  \"catalog-automation\": [FK.CATALOG_AUTOMATION], // plan-gated only for now\r\n};\r\n\r\nconst catalogBlocks = [\r\n  {\r\n    id: \"product-catalog\",\r\n    label: \"Product Catalog\",\r\n    description: \"Browse, manage, and organize all your products in one place.\",\r\n    path: \"/app/catalog/products\",\r\n    icon: <ShoppingCart size={22} />,\r\n    action: \"Manage Products\",\r\n  },\r\n  {\r\n    id: \"product-form\",\r\n    label: \"Add New Product\",\r\n    description: \"Create and publish new items to your WhatsApp catalog.\",\r\n    path: \"/app/catalog/form\",\r\n    icon: <PlusCircle size={22} />,\r\n    action: \"Add Product\",\r\n  },\r\n\r\n  {\r\n    id: \"catalog-automation\",\r\n    label: \"Auto-Responders\",\r\n    description: \"Set up auto-replies triggered by catalog engagement events.\",\r\n    path: \"/app/catalog/automation\",\r\n    icon: <Zap size={22} />,\r\n    action: \"Configure Bots\",\r\n    requiredPlan: \"advanced\",\r\n  },\r\n];\r\n\r\nexport default function CatalogWorkspacePage() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { isLoading, entLoading, can, hasAllAccess, planId } = useAuth();\n\n  const hideWorkspaceTiles =\n    new URLSearchParams(location.search || \"\").get(\"flyout\") === \"1\";\n\n  const [pinned, setPinned] = useState(\n    JSON.parse(localStorage.getItem(\"catalog-pinned\") || \"[]\")\n  );\n  const [archived, setArchived] = useState(\r\n    JSON.parse(localStorage.getItem(\"catalog-archived\") || \"[]\")\r\n  );\r\n  const [order, setOrder] = useState(\r\n    JSON.parse(localStorage.getItem(\"catalog-order\")) ||\r\n      catalogBlocks.map(b => b.id)\r\n  );\r\n\r\n  const togglePin = (e, id) => {\r\n    e.stopPropagation();\r\n    const updated = pinned.includes(id)\r\n      ? pinned.filter(i => i !== id)\r\n      : [...pinned, id];\r\n    setPinned(updated);\r\n    localStorage.setItem(\"catalog-pinned\", JSON.stringify(updated));\r\n  };\r\n\r\n  const toggleArchive = (e, id) => {\r\n    e.stopPropagation();\r\n    const updated = archived.includes(id)\r\n      ? archived.filter(i => i !== id)\r\n      : [...archived, id];\r\n    setArchived(updated);\r\n    localStorage.setItem(\"catalog-archived\", JSON.stringify(updated));\r\n  };\r\n\r\n  const onDragEnd = result => {\r\n    if (!result.destination) return;\r\n    const newOrder = Array.from(order);\r\n    const [moved] = newOrder.splice(result.source.index, 1);\r\n    newOrder.splice(result.destination.index, 0, moved);\r\n    setOrder(newOrder);\r\n    localStorage.setItem(\"catalog-order\", JSON.stringify(newOrder));\r\n  };\r\n\r\n  // ---- plan helper (same logic, just used for allowed flag now) ----\r\n  const hasPlan = requiredPlan => {\r\n    if (!requiredPlan) return true;\r\n    const tiers = [\"trial\", \"basic\", \"smart\", \"advanced\"];\r\n    const current = String(planId || \"basic\").toLowerCase();\r\n    return tiers.indexOf(current) >= tiers.indexOf(requiredPlan.toLowerCase());\r\n  };\r\n\r\n  const blocksWithAccess = order\r\n    .map(id => catalogBlocks.find(b => b.id === id))\r\n    .filter(Boolean)\r\n    .filter(b => !archived.includes(b.id))\r\n    .map(block => {\r\n      const codes = PERM_BY_BLOCK[block.id] || [];\r\n      const canPerm =\r\n        hasAllAccess || (Array.isArray(codes) && codes.some(code => can(code)));\r\n      const hasPlanAccess = hasPlan(block.requiredPlan);\r\n      const allowed = canPerm && hasPlanAccess;\r\n\r\n      // Figure out why it‚Äôs blocked (for nicer upgrade flows)\r\n      const blockedReason = !canPerm\r\n        ? \"feature\"\r\n        : !hasPlanAccess\r\n        ? \"plan\"\r\n        : null;\r\n\r\n      return {\r\n        ...block,\r\n        allowed,\r\n        primaryCode: codes[0] || null,\r\n        blockedReason,\r\n      };\r\n    });\r\n\r\n  if (isLoading || entLoading) {\r\n    return (\r\n      <div className=\"p-10 text-center text-lg text-gray-500\">\r\n        Loading catalog features‚Ä¶\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const anyVisible = blocksWithAccess.length > 0;\r\n  const anyAllowed = blocksWithAccess.some(b => b.allowed);\r\n\r\n  if (hideWorkspaceTiles) {\n    return (\n      <div\n        className=\"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]\"\n        data-test-id=\"catalog-root\"\n      />\n    );\n  }\n\n  return (\n    <div\n      className=\"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]\"\n      data-test-id=\"catalog-root\"\n    >\n      {/* sequential border animation (top‚Üíright‚Üíbottom‚Üíleft) ‚Äì emerald themed, same as CRM/Campaign */}\r\n      <style>{`\r\n        @keyframes drawRight { from { transform: scaleX(0) } to { transform: scaleX(1) } }\r\n        @keyframes drawDown  { from { transform: scaleY(0) } to { transform: scaleY(1) } }\r\n        @keyframes drawLeft  { from { transform: scaleX(0) } to { transform: scaleX(1) } }\r\n        @keyframes drawUp    { from { transform: scaleY(0) } to { transform: scaleY(1) } }\r\n\r\n        .tile:hover .topline    { animation: drawRight .9s ease forwards; }\r\n        .tile:hover .rightline  { animation: drawDown  .9s ease .18s forwards; }\r\n        .tile:hover .bottomline { animation: drawLeft  .9s ease .36s forwards; }\r\n        .tile:hover .leftline   { animation: drawUp    .9s ease .54s forwards; }\r\n      `}</style>\r\n\r\n      <h2 className=\"text-2xl font-bold text-emerald-800 mb-1\">\r\n        üõçÔ∏è Catalog Workspace\r\n      </h2>\r\n      <p className=\"text-sm text-slate-600 mb-4\">\r\n        Manage your WhatsApp catalog, add products, and track how customers\r\n        interact with your items.\r\n      </p>\r\n\r\n      {/* If tiles exist but all are locked ‚Üí show a ‚Äúrestricted‚Äù banner, like CRM/Campaign */}\r\n      {anyVisible && !anyAllowed && (\r\n        <div className=\"bg-amber-50 text-amber-800 p-4 border-l-4 border-amber-500 rounded-md mb-6 shadow-sm flex items-start gap-3\">\r\n          <AlertTriangle size={22} className=\"mt-1\" />\r\n          <div>\r\n            <strong>Locked catalog tools:</strong> Your current plan\r\n            doesn&apos;t include these catalog features.\r\n            <div className=\"text-sm mt-1 text-gray-600\">\r\n              Try opening a tile to see upgrade options, or contact your\r\n              administrator.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {anyVisible && (\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <Droppable droppableId=\"catalog-blocks\" direction=\"horizontal\">\r\n            {provided => (\r\n              <div\r\n                className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\"\r\n                ref={provided.innerRef}\r\n                {...provided.droppableProps}\r\n              >\r\n                {blocksWithAccess.map((block, index) => {\r\n                  const cardBase =\r\n                    \"tile group relative overflow-hidden cursor-pointer bg-white rounded-md border shadow-sm hover:shadow-md transition transform hover:-translate-y-0.5 duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-300\";\r\n                  const lockedClasses =\r\n                    \"opacity-70 border-dashed cursor-not-allowed hover:-translate-y-0 hover:shadow-sm\";\r\n\r\n                  const cardClasses = block.allowed\r\n                    ? cardBase\r\n                    : `${cardBase} ${lockedClasses}`;\r\n\r\n                  const handleCardClick = () => {\r\n                    if (!block.allowed) {\r\n                      if (block.blockedReason === \"plan\") {\r\n                        requestUpgrade({\r\n                          reason: \"plan\",\r\n                          planTier: block.requiredPlan,\r\n                          source: \"catalog.workspace.tile\",\r\n                        });\r\n                      } else if (block.primaryCode) {\r\n                        requestUpgrade({\r\n                          reason: \"feature\",\r\n                          code: block.primaryCode,\r\n                          source: \"catalog.workspace.tile\",\r\n                        });\r\n                      }\r\n                      return;\r\n                    }\r\n                    navigate(block.path);\r\n                  };\r\n\r\n                  const handlePrimaryActionClick = e => {\r\n                    e.stopPropagation();\r\n                    if (!block.allowed) {\r\n                      if (block.blockedReason === \"plan\") {\r\n                        requestUpgrade({\r\n                          reason: \"plan\",\r\n                          planTier: block.requiredPlan,\r\n                          source: \"catalog.workspace.action\",\r\n                        });\r\n                      } else if (block.primaryCode) {\r\n                        requestUpgrade({\r\n                          reason: \"feature\",\r\n                          code: block.primaryCode,\r\n                          source: \"catalog.workspace.action\",\r\n                        });\r\n                      }\r\n                      return;\r\n                    }\r\n                    navigate(block.path);\r\n                  };\r\n\r\n                  return (\r\n                    <Draggable\r\n                      key={block.id}\r\n                      draggableId={block.id}\r\n                      index={index}\r\n                    >\r\n                      {provided => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          role=\"button\"\r\n                          tabIndex={0}\r\n                          aria-label={`${block.label}: ${block.action}`}\r\n                          onKeyDown={e => {\r\n                            if (e.key === \"Enter\") handleCardClick();\r\n                          }}\r\n                          onClick={handleCardClick}\r\n                          className={cardClasses}\r\n                          style={{ userSelect: \"none\" }}\r\n                        >\r\n                          {/* üîí Upgrade badge for locked tiles */}\r\n                          {!block.allowed && (\r\n                            <span className=\"pointer-events-none absolute top-3 right-3 inline-flex items-center gap-1 rounded-full border border-dashed border-amber-500 bg-amber-50 px-2 py-0.5 text-[11px] font-semibold text-amber-700\">\r\n                              üîí Upgrade\r\n                            </span>\r\n                          )}\r\n\r\n                          {/* animated border segments ‚Äì EMERALD gradient, same as CRM/Campaign */}\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"topline pointer-events-none absolute left-0 -top-[2px] h-[2px] w-full origin-left rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(90deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleX(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"rightline pointer-events-none absolute right-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-top rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(180deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleY(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"bottomline pointer-events-none absolute left-0 -bottom-[2px] h-[2px] w-full origin-right rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(270deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleX(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"leftline pointer-events-none absolute left-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-bottom rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(0deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleY(0)\",\r\n                            }}\r\n                          />\r\n\r\n                          <div className=\"flex items-start gap-4 p-5\">\r\n                            <div className=\"bg-emerald-50 rounded-md p-2 text-emerald-800\">\r\n                              {block.icon}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                              <h3 className=\"text-md font-semibold text-emerald-800 group-hover:text-emerald-900\">\r\n                                {block.label}\r\n                              </h3>\r\n                              <p className=\"text-sm text-slate-600 workspace-tile-desc\">\r\n                                {block.description}\r\n                              </p>\r\n                            </div>\r\n                            <div\r\n                              {...provided.dragHandleProps}\r\n                              title=\"Drag to re-order\"\r\n                              className=\"ml-2 rounded p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing\"\r\n                              onClick={e => e.stopPropagation()}\r\n                            >\r\n                              <MoreVertical size={16} />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"px-5 py-3 border-t border-gray-200 flex items-center justify-between bg-gray-50\">\r\n                            <button\r\n                              onClick={handlePrimaryActionClick}\r\n                              className=\"text-sm text-gray-700 font-medium flex items-center gap-1 hover:text-gray-900\"\r\n                            >\r\n                              {block.allowed\r\n                                ? block.action\r\n                                : \"Upgrade to unlock\"}\r\n                              <ArrowRightCircle size={18} />\r\n                            </button>\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <button\r\n                                onClick={e => togglePin(e, block.id)}\r\n                                title={\r\n                                  pinned.includes(block.id) ? \"Unpin\" : \"Pin\"\r\n                                }\r\n                              >\r\n                                <Pin\r\n                                  size={18}\r\n                                  className={\r\n                                    pinned.includes(block.id)\r\n                                      ? \"text-red-600\"\r\n                                      : \"text-gray-400 hover:text-red-500\"\r\n                                  }\r\n                                />\r\n                              </button>\r\n                              <button\r\n                                onClick={e => toggleArchive(e, block.id)}\r\n                                title=\"Archive this\"\r\n                              >\r\n                                <Archive\r\n                                  size={18}\r\n                                  className={\r\n                                    archived.includes(block.id)\r\n                                      ? \"text-indigo-600\"\r\n                                      : \"text-gray-400 hover:text-indigo-500\"\r\n                                  }\r\n                                />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  );\r\n                })}\r\n                {provided.placeholder}\r\n              </div>\r\n            )}\r\n          </Droppable>\r\n        </DragDropContext>\r\n      )}\r\n\r\n      {!anyVisible && (\r\n        <div className=\"bg-red-100 text-red-700 p-4 border-l-4 border-red-500 rounded-md mt-4 shadow-sm flex items-start gap-3\">\r\n          <AlertTriangle size={22} className=\"mt-1\" />\r\n          <div>\r\n            <strong>No catalog tiles:</strong> All catalog tools are archived or\r\n            hidden.\r\n            <div className=\"text-sm mt-1 text-gray-600\">\r\n              Un-archive some tiles to see them here.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["PERM_BY_BLOCK","FK","CATALOG_VIEW","CATALOG_CREATE","CATALOG_AUTOMATION","catalogBlocks","id","label","description","path","icon","_jsx","ShoppingCart","size","action","PlusCircle","Zap","requiredPlan","CatalogWorkspacePage","navigate","useNavigate","location","useLocation","isLoading","entLoading","can","hasAllAccess","planId","useAuth","hideWorkspaceTiles","URLSearchParams","search","get","pinned","setPinned","useState","JSON","parse","localStorage","getItem","archived","setArchived","order","setOrder","map","b","blocksWithAccess","find","filter","Boolean","includes","block","codes","canPerm","Array","isArray","some","code","hasPlanAccess","tiers","current","String","toLowerCase","indexOf","hasPlan","allowed","blockedReason","_objectSpread","primaryCode","className","children","anyVisible","length","anyAllowed","_jsxs","AlertTriangle","DragDropContext","onDragEnd","result","destination","newOrder","from","moved","splice","source","index","setItem","stringify","Droppable","droppableId","direction","provided","ref","innerRef","droppableProps","cardBase","cardClasses","concat","handleCardClick","requestUpgrade","reason","planTier","handlePrimaryActionClick","e","stopPropagation","Draggable","draggableId","draggableProps","role","tabIndex","onKeyDown","key","onClick","style","userSelect","background","transform","dragHandleProps","title","MoreVertical","ArrowRightCircle","togglePin","updated","i","Pin","toggleArchive","Archive","placeholder"],"sourceRoot":""}