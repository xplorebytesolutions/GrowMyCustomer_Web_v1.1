{"version":3,"file":"static/js/789.1c161a8d.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/message-circle-heart.ts","pages/Workspaces/AutomationWorkspace.jsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M7.9 20A9 9 0 1 0 4 16.1L2 22Z', key: 'vv11sd' }],\n  [\n    'path',\n    {\n      d: 'M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7',\n      key: '43lnbm',\n    },\n  ],\n];\n\n/**\n * @component @name MessageCircleHeart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNy45IDIwQTkgOSAwIDEgMCA0IDE2LjFMMiAyMloiIC8+CiAgPHBhdGggZD0iTTE1LjggOS4yYTIuNSAyLjUgMCAwIDAtMy41IDBsLS4zLjQtLjM1LS4zYTIuNDIgMi40MiAwIDEgMC0zLjIgMy42bDMuNiAzLjUgMy42LTMuNWMxLjItMS4yIDEuMS0yLjcuMi0zLjciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/message-circle-heart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageCircleHeart = createLucideIcon('message-circle-heart', __iconNode);\n\nexport default MessageCircleHeart;\n","// ðŸ“„ src/pages/Workspaces/AutomationWorkspace.jsx\r\n\r\nimport {\r\n  MessageCircleHeart,\r\n  RefreshCcw,\r\n  MessageSquareText,\r\n  ArrowRightCircle,\r\n  MoreVertical,\r\n  Archive,\r\n  Pin,\r\n  FileBarChart,\r\n  AlertTriangle,\r\n} from \"lucide-react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useMemo, useState } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\r\n// âœ… server-authoritative perms\r\nimport { useAuth } from \"../../app/providers/AuthProvider\";\r\n// âœ… centralized capability keys\r\nimport { FK } from \"../../capabilities/featureKeys\";\r\n// âœ… upgrade flow (global UpgradeModal trigger)\r\nimport { requestUpgrade } from \"../../utils/upgradeBus\";\r\n\r\n/* ---------- Permissions map (per-tile) ---------- */\r\nconst PERM_BY_BLOCK = {\r\n  \"create-template-flow\": [FK.AUTOMATION_CREATE_TEMPLATE_FLOW],\r\n  \"create-auto-reply-bot\": [FK.AUTOMATION_CREATE_BOT],\r\n  \"flow-manager\": [FK.AUTOMATION_VIEW_FLOW_MANAGE],\r\n  \"flow-analytics\": [FK.AUTOMATION_VIEW_FLOW_ANALYTICS],\r\n};\r\n\r\n/* ---------- Tiles ---------- */\r\nconst automationBlocks = [\r\n  {\r\n    id: \"create-template-flow\",\r\n    label: \"Create Template Flow\",\r\n    description: \"Visually design the flow using a drag-and-drop builder.\",\r\n    path: \"/app/cta-flow/visual-builder\",\r\n    icon: <RefreshCcw size={22} />,\r\n    action: \"Create Template Flow\",\r\n  },\r\n  {\r\n    id: \"create-auto-reply-bot\",\r\n    label: \"Create Auto Reply Bot\",\r\n    description:\r\n      \"Design an automated bot to reply to specific keywords, triggers or contacts.\",\r\n    path: \"/app/automation/auto-reply-builder\",\r\n    icon: <MessageCircleHeart size={22} />,\r\n    action: \"Create Bot\",\r\n  },\r\n  {\r\n    id: \"flow-manager\",\r\n    label: \"Flow Manager\",\r\n    description: \"Organize and manage all auto-reply flows.\",\r\n    path: \"/app/cta-flow/flow-manager\",\r\n    icon: <MessageSquareText size={22} />,\r\n    action: \"Flow Manager\",\r\n  },\r\n  {\r\n    id: \"flow-analytics\",\r\n    label: \"Flow Analytics\",\r\n    description: \"Analyze visual flows and CTA button performance.\",\r\n    path: \"/app/campaigns/FlowAnalyticsDashboard\",\r\n    icon: <FileBarChart size={22} />,\r\n    action: \"Open Dashboard\",\r\n  },\r\n];\r\n\r\nexport default function AutomationWorkspace() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { isLoading, can, hasAllAccess, entLoading } = useAuth();\n\n  const hideWorkspaceTiles =\n    new URLSearchParams(location.search || \"\").get(\"flyout\") === \"1\";\n\n  // --- LocalStorage keys under \"automation-*\"\n  const [pinned, setPinned] = useState(\n    JSON.parse(localStorage.getItem(\"automation-pinned\") || \"[]\")\n  );\n  const [archived, setArchived] = useState(\r\n    JSON.parse(localStorage.getItem(\"automation-archived\") || \"[]\")\r\n  );\r\n\r\n  // Seed order with all current ids; reconcile with any saved order\r\n  const allIds = useMemo(() => automationBlocks.map(b => b.id), []);\r\n  const storedOrder =\r\n    JSON.parse(localStorage.getItem(\"automation-order\") || \"null\") || [];\r\n  const initialOrder = useMemo(() => {\r\n    if (!Array.isArray(storedOrder) || storedOrder.length === 0) return allIds;\r\n    const known = storedOrder.filter(id => allIds.includes(id));\r\n    const missing = allIds.filter(id => !known.includes(id));\r\n    return [...known, ...missing];\r\n  }, [allIds]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const [order, setOrder] = useState(initialOrder);\r\n  const [showArchived, setShowArchived] = useState(false);\r\n\r\n  const togglePin = (e, id) => {\r\n    e.stopPropagation();\r\n    const updated = pinned.includes(id)\r\n      ? pinned.filter(i => i !== id)\r\n      : [...pinned, id];\r\n    setPinned(updated);\r\n    localStorage.setItem(\"automation-pinned\", JSON.stringify(updated));\r\n  };\r\n\r\n  const toggleArchive = (e, id) => {\r\n    e.stopPropagation();\r\n    const updated = archived.includes(id)\r\n      ? archived.filter(i => i !== id)\r\n      : [...archived, id];\r\n    setArchived(updated);\r\n    localStorage.setItem(\"automation-archived\", JSON.stringify(updated));\r\n  };\r\n\r\n  const onDragEnd = result => {\r\n    if (!result.destination) return;\r\n    const newOrder = Array.from(order);\r\n    const [moved] = newOrder.splice(result.source.index, 1);\r\n    newOrder.splice(result.destination.index, 0, moved);\r\n    setOrder(newOrder);\r\n    localStorage.setItem(\"automation-order\", JSON.stringify(newOrder));\r\n  };\r\n\r\n  // Build list of blocks (show both locked + unlocked)\r\n  const blocksWithAccess = order\r\n    .map(id => automationBlocks.find(b => b.id === id))\r\n    .filter(Boolean)\r\n    .filter(b => (showArchived ? true : !archived.includes(b.id)))\r\n    .map(block => {\r\n      const codes = PERM_BY_BLOCK[block.id] || [];\r\n      const allowed =\r\n        hasAllAccess || (Array.isArray(codes) && codes.some(code => can(code)));\r\n\r\n      return {\r\n        ...block,\r\n        allowed,\r\n        primaryCode: codes[0] || null,\r\n      };\r\n    });\r\n\r\n  const anyVisible = blocksWithAccess.length > 0;\r\n  const anyAllowed = blocksWithAccess.some(b => b.allowed);\r\n\r\n  if (isLoading || entLoading) {\r\n    return (\r\n      <div className=\"p-10 text-center text-lg text-gray-500\">\r\n        Loading automation featuresâ€¦\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (hideWorkspaceTiles) {\n    return (\n      <div\n        className=\"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]\"\n        data-test-id=\"automation-root\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]\" data-test-id=\"automation-root\">\n      {/* Emerald animated border, same pattern as other workspaces */}\r\n      <style>{`\r\n        @keyframes drawRight { from { transform: scaleX(0) } to { transform: scaleX(1) } }\r\n        @keyframes drawDown  { from { transform: scaleY(0) } to { transform: scaleY(1) } }\r\n        @keyframes drawLeft  { from { transform: scaleX(0) } to { transform: scaleX(1) } }\r\n        @keyframes drawUp    { from { transform: scaleY(0) } to { transform: scaleY(1) } }\r\n\r\n        .tile:hover .topline    { animation: drawRight .9s ease forwards; }\r\n        .tile:hover .rightline  { animation: drawDown  .9s ease .18s forwards; }\r\n        .tile:hover .bottomline { animation: drawLeft  .9s ease .36s forwards; }\r\n        .tile:hover .leftline   { animation: drawUp    .9s ease .54s forwards; }\r\n      `}</style>\r\n\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-800\">\r\n          ðŸ¤– Automation Workspace\r\n        </h2>\r\n        <label className=\"flex items-center gap-2 text-sm font-medium text-gray-700\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={showArchived}\r\n            onChange={() => setShowArchived(!showArchived)}\r\n            className=\"accent-emerald-600\"\r\n          />\r\n          Show Archived\r\n        </label>\r\n      </div>\r\n\r\n      <p className=\"text-sm text-slate-600 mb-4\">\r\n        Build template flows, auto-reply bots, manage automations, and analyze\r\n        performance of your WhatsApp journeys.\r\n      </p>\r\n\r\n      {/* If tiles exist but all are locked â†’ show restricted banner */}\r\n      {anyVisible && !anyAllowed && (\r\n        <div className=\"bg-amber-50 text-amber-800 p-4 border-l-4 border-amber-500 rounded-md mb-6 shadow-sm flex items-start gap-3\">\r\n          <AlertTriangle size={22} className=\"mt-1\" />\r\n          <div>\r\n            <strong>Locked automation tools:</strong> Your current plan\r\n            doesn&apos;t include these automation features.\r\n            <div className=\"text-sm mt-1 text-gray-600\">\r\n              Try opening a tile to see upgrade options, or contact your\r\n              administrator.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {anyVisible && (\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <Droppable droppableId=\"automation-blocks\" direction=\"horizontal\">\r\n            {provided => (\r\n              <div\r\n                className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\"\r\n                ref={provided.innerRef}\r\n                {...provided.droppableProps}\r\n              >\r\n                {blocksWithAccess.map((block, index) => {\r\n                  const baseCardClasses =\r\n                    \"tile group relative overflow-hidden rounded-md border bg-white shadow-sm transition duration-200 hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-emerald-300 cursor-pointer\";\r\n                  const lockedClasses =\r\n                    \"opacity-70 border-dashed cursor-not-allowed hover:-translate-y-0 hover:shadow-sm\";\r\n\r\n                  const cardClasses = block.allowed\r\n                    ? baseCardClasses\r\n                    : `${baseCardClasses} ${lockedClasses}`;\r\n\r\n                  const handleCardClick = () => {\r\n                    if (!block.allowed) {\r\n                      if (block.primaryCode) {\r\n                        requestUpgrade({\r\n                          reason: \"feature\",\r\n                          code: block.primaryCode,\r\n                          source: \"automation.workspace.tile\",\r\n                        });\r\n                      }\r\n                      return;\r\n                    }\r\n                    navigate(block.path);\r\n                  };\r\n\r\n                  const handlePrimaryActionClick = e => {\r\n                    e.stopPropagation();\r\n                    if (!block.allowed) {\r\n                      if (block.primaryCode) {\r\n                        requestUpgrade({\r\n                          reason: \"feature\",\r\n                          code: block.primaryCode,\r\n                          source: \"automation.workspace.action\",\r\n                        });\r\n                      }\r\n                      return;\r\n                    }\r\n                    navigate(block.path);\r\n                  };\r\n\r\n                  return (\r\n                    <Draggable\r\n                      key={block.id}\r\n                      draggableId={block.id}\r\n                      index={index}\r\n                    >\r\n                      {provided => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          role=\"button\"\r\n                          tabIndex={0}\r\n                          aria-label={`${block.label}: ${block.action}`}\r\n                          onKeyDown={e => {\r\n                            if (e.key === \"Enter\") handleCardClick();\r\n                          }}\r\n                          onClick={handleCardClick}\r\n                          className={cardClasses}\r\n                          style={{ userSelect: \"none\" }}\r\n                        >\r\n                          {/* ðŸ”’ Upgrade badge for locked tiles */}\r\n                          {!block.allowed && (\r\n                            <span className=\"pointer-events-none absolute top-3 right-3 inline-flex items-center gap-1 rounded-full border border-dashed border-amber-500 bg-amber-50 px-2 py-0.5 text-[11px] font-semibold text-amber-700\">\r\n                              ðŸ”’ Upgrade\r\n                            </span>\r\n                          )}\r\n\r\n                          {/* Emerald animated border (top â†’ right â†’ bottom â†’ left) */}\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"topline pointer-events-none absolute left-0 -top-[2px] h-[2px] w-full origin-left rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(90deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleX(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"rightline pointer-events-none absolute right-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-top rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(180deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleY(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"bottomline pointer-events-none absolute left-0 -bottom-[2px] h-[2px] w-full origin-right rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(270deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleX(0)\",\r\n                            }}\r\n                          />\r\n                          <span\r\n                            aria-hidden\r\n                            className=\"leftline pointer-events-none absolute left-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-bottom rounded opacity-0 group-hover:opacity-100\"\r\n                            style={{\r\n                              background:\r\n                                \"linear-gradient(0deg, #A7F3D0, #34D399, #059669)\",\r\n                              transform: \"scaleY(0)\",\r\n                            }}\r\n                          />\r\n\r\n                          {/* Card body */}\r\n                          <div className=\"flex items-start gap-4 p-5\">\r\n                            <div className=\"bg-emerald-50 rounded-md p-2 text-emerald-800\">\r\n                              {block.icon}\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <h3 className=\"text-md font-semibold text-emerald-800 truncate group-hover:text-emerald-900\">\r\n                                {block.label}\r\n                              </h3>\r\n                              <p className=\"text-sm text-slate-600 workspace-tile-desc\">\n                                {block.description}\n                              </p>\n                            </div>\r\n\r\n                            {/* Drag handle only on kebab */}\r\n                            <div\r\n                              {...provided.dragHandleProps}\r\n                              title=\"Drag to re-order\"\r\n                              className=\"ml-2 rounded p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing\"\r\n                              onClick={e => e.stopPropagation()}\r\n                            >\r\n                              <MoreVertical size={16} />\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Footer */}\r\n                          <div className=\"px-5 py-3 border-t border-gray-200 flex items-center justify-between bg-gray-50\">\r\n                            <button\r\n                              onClick={handlePrimaryActionClick}\r\n                              className=\"text-sm text-gray-700 font-medium flex items-center gap-1 hover:text-gray-900\"\r\n                            >\r\n                              {block.allowed\r\n                                ? block.action\r\n                                : \"Upgrade to unlock\"}\r\n                              <ArrowRightCircle size={18} />\r\n                            </button>\r\n\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <button\r\n                                onClick={e => togglePin(e, block.id)}\r\n                                title={\r\n                                  pinned.includes(block.id) ? \"Unpin\" : \"Pin\"\r\n                                }\r\n                              >\r\n                                <Pin\r\n                                  size={18}\r\n                                  className={\r\n                                    pinned.includes(block.id)\r\n                                      ? \"text-red-600\"\r\n                                      : \"text-gray-400 hover:text-red-500\"\r\n                                  }\r\n                                />\r\n                              </button>\r\n                              <button\r\n                                onClick={e => toggleArchive(e, block.id)}\r\n                                title=\"Archive this\"\r\n                              >\r\n                                <Archive\r\n                                  size={18}\r\n                                  className={\r\n                                    archived.includes(block.id)\r\n                                      ? \"text-indigo-600\"\r\n                                      : \"text-gray-400 hover:text-indigo-500\"\r\n                                  }\r\n                                />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  );\r\n                })}\r\n                {provided.placeholder}\r\n              </div>\r\n            )}\r\n          </Droppable>\r\n        </DragDropContext>\r\n      )}\r\n\r\n      {!anyVisible && (\r\n        <div className=\"bg-red-100 text-red-700 p-4 border-l-4 border-red-500 rounded-md mt-4 shadow-sm flex items-start gap-3\">\r\n          <AlertTriangle size={22} className=\"mt-1\" />\r\n          <div>\r\n            <strong>No automation tiles:</strong> All automation tools are\r\n            archived or hidden.\r\n            <div className=\"text-sm mt-1 text-gray-600\">\r\n              Un-archive some tiles to see them here.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["MessageCircleHeart","createLucideIcon","d","key","PERM_BY_BLOCK","FK","AUTOMATION_CREATE_TEMPLATE_FLOW","AUTOMATION_CREATE_BOT","AUTOMATION_VIEW_FLOW_MANAGE","AUTOMATION_VIEW_FLOW_ANALYTICS","automationBlocks","id","label","description","path","icon","_jsx","RefreshCcw","size","action","MessageSquareText","FileBarChart","AutomationWorkspace","navigate","useNavigate","location","useLocation","isLoading","can","hasAllAccess","entLoading","useAuth","hideWorkspaceTiles","URLSearchParams","search","get","pinned","setPinned","useState","JSON","parse","localStorage","getItem","archived","setArchived","allIds","useMemo","map","b","storedOrder","initialOrder","Array","isArray","length","known","filter","includes","missing","order","setOrder","showArchived","setShowArchived","blocksWithAccess","find","Boolean","block","codes","allowed","some","code","_objectSpread","primaryCode","anyVisible","anyAllowed","className","children","_jsxs","type","checked","onChange","AlertTriangle","DragDropContext","onDragEnd","result","destination","newOrder","from","moved","splice","source","index","setItem","stringify","Droppable","droppableId","direction","provided","ref","innerRef","droppableProps","baseCardClasses","cardClasses","concat","handleCardClick","requestUpgrade","reason","handlePrimaryActionClick","e","stopPropagation","Draggable","draggableId","draggableProps","role","tabIndex","onKeyDown","onClick","style","userSelect","background","transform","dragHandleProps","title","MoreVertical","ArrowRightCircle","togglePin","updated","i","Pin","toggleArchive","Archive","placeholder"],"sourceRoot":""}