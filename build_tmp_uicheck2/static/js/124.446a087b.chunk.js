"use strict";(self.webpackChunkxbytechat_ui=self.webpackChunkxbytechat_ui||[]).push([[124],{5124:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(65043),s=a(35870);function i(e){const t=new Date(e),a=new Date-t,n=Math.floor(a/864e5);return 0===n?"Today at ".concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})):1===n?"Yesterday at ".concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})):n<7?"".concat(n," days ago"):t.toLocaleDateString()}var l=a(70579);const c=function(e){let{entry:t}=e;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute -left-7 top-5 w-4 h-4 bg-emerald-600 rounded-full border-2 border-white shadow"}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-emerald-800 font-semibold",children:[(0,l.jsx)("span",{className:"text-xl",children:"CatalogCTA"===t.eventType?"\ud83d\udecd\ufe0f":"CampaignSend"===t.eventType?"\u2709\ufe0f":"ReminderSet"===t.eventType?"\u23f0":"NoteAdded"===t.eventType?"\ud83d\udcdd":"CustomActivity"===t.eventType?"\u2699\ufe0f":"\ud83d\udccc"}),(0,l.jsx)("span",{children:t.eventType})]}),(0,l.jsx)("div",{className:"text-xs font-bold px-2 py-1 rounded ".concat("CatalogCTA"===t.eventType?"bg-green-100 text-green-800":"CampaignSend"===t.eventType?"bg-indigo-100 text-indigo-800":"ReminderSet"===t.eventType?"bg-yellow-100 text-yellow-800":"NoteAdded"===t.eventType?"bg-blue-100 text-blue-800":"CustomActivity"===t.eventType?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:t.eventType})]}),(0,l.jsx)("div",{className:"text-gray-700 text-sm mb-2",children:t.description||"(No description provided)"}),(0,l.jsx)("div",{className:"text-xs text-gray-400",children:i(t.createdAt)})]})]})};var d=a(73216),r=a(57488);const o=function(){const{contactId:e}=(0,d.g)(),[t,a]=(0,n.useState)([]),[i,o]=(0,n.useState)(!0),[x,m]=(0,n.useState)(null),h=(0,n.useCallback)((async()=>{try{const t=await s.default.get("/contacts/".concat(e));m(t.data)}catch(t){console.error("Failed to fetch contact info",t),r.oR.error("\u274c Failed to load contact info")}}),[e]),u=(0,n.useCallback)((async()=>{try{o(!0);const t=await s.default.get("/leadtimeline/contact/".concat(e));a(t.data||[])}catch(t){console.error("Failed to fetch timeline",t),r.oR.error("\u274c Failed to load timeline events")}finally{o(!1)}}),[e]);return(0,n.useEffect)((()=>{e&&(h(),u())}),[e,h,u]),(0,l.jsxs)("div",{className:"p-6 max-w-5xl mx-auto bg-[#f5f6f7] min-h-[calc(100vh-80px)]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udd53 Lead Timeline"}),x&&(0,l.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:[(0,l.jsx)("span",{className:"font-semibold",children:x.name||"Unknown"})," ","\u2022 ",x.phoneNumber]})]}),(0,l.jsx)("button",{onClick:()=>u(),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded shadow text-sm",children:"\ud83d\udd04 Refresh"})]}),(0,l.jsx)("div",{className:"relative pl-10 border-l-2 border-gray-200 space-y-8",children:i?(0,l.jsx)("p",{className:"text-gray-500",children:"\u23f3 Loading timeline..."}):0===t.length?(0,l.jsx)("p",{className:"text-gray-400 italic",children:"No timeline activities found for this contact."}):t.map((e=>(0,l.jsx)(c,{entry:e},e.id)))})]})}}}]);
//# sourceMappingURL=124.446a087b.chunk.js.map