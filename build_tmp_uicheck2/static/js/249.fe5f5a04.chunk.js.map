{"version":3,"file":"static/js/249.fe5f5a04.chunk.js","mappings":"oMAiIA,QA7HA,WACE,MAAMA,GAAWC,EAAAA,EAAAA,OACX,UAAEC,IAAcC,EAAAA,EAAAA,MACfC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,CACvCG,KAAM,GACNC,YAAa,GACbC,MAAO,GACPC,SAAU,MACVC,SAAU,KAGNC,EAAa,uCAEbC,EAAaC,QAAQd,IAG3Be,EAAAA,EAAAA,YAAU,KACJF,GACFG,EAAAA,EACGC,IAAI,iDAADC,OAAkDN,IACrDO,MAAKC,IACJ,MAAMC,EAAUD,EAAIE,KAAKC,MAAKC,GAAKA,EAAEC,KAAOzB,IACxCqB,EACFf,EAAY,CACVC,KAAMc,EAAQd,KACdC,YAAaa,EAAQb,YACrBC,MAAOY,EAAQZ,MACfC,SAAUW,EAAQX,SAClBC,SAAUU,EAAQV,YAGpBe,MAAM,mCACN5B,EAAS,yBACX,IAED6B,OAAMC,IACLC,QAAQC,MAAM,iCAA6BF,EAAI,GAErD,GACC,CAAC5B,EAAWY,EAAYC,EAAYf,IAEvC,MAAMiC,EAAeC,IACnB,MAAM,KAAEzB,EAAI,MAAE0B,GAAUD,EAAEE,OAC1B5B,GAAY6B,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUD,GAAI,IAAE,CAAC5B,GAAO0B,KAAS,EAiCnD,OACEI,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4CAA2CC,UACxDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wDAAuDC,SAAA,EACpEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,2CAA0CC,SACrD1B,EAAa,4BAAoB,4BAGpC2B,EAAAA,EAAAA,MAAA,QAAMC,SArCSC,UACnBV,EAAEW,iBACFxC,GAAW,GAEX,MAAMyC,GAAOR,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACR/B,GAAQ,IACXO,aACAa,GAAIzB,IAGN,IACMa,SACIG,EAAAA,EAAM6B,IAAI,sCAAD3B,OACyBlB,GACtC4C,GAEFlB,MAAM,mCAEAV,EAAAA,EAAM8B,KAAK,qCAAsCF,GACvDlB,MAAM,0BAER5B,EAAS,wBACX,CAAE,MAAO8B,GACPF,MAAM,kCACNG,QAAQC,MAAMF,EAChB,CAAC,QACCzB,GAAW,EACb,GAUkCmC,UAAU,YAAWC,SAAA,CAChD,CACC,CAAC,eAAgB,QACjB,CAAC,cAAe,eAChB,CAAC,QAAS,SACV,CAAC,WAAY,YACb,CAAC,YAAa,aACdQ,KAAIC,IAAA,IAAEC,EAAO1C,GAAKyC,EAAA,OAClBR,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAC5DU,KAEHZ,EAAAA,EAAAA,KAAA,SACEa,KAAe,UAAT3C,EAAmB,SAAW,OACpCA,KAAMA,EACN0B,MAAO5B,EAASE,GAChB4C,SAAUpB,EACVO,UAAU,qHACVc,YAAW,SAAAlC,OAAW+B,EAAMI,eAC5BC,UAAQ,MAXF/C,EAaJ,KAGR8B,EAAAA,EAAAA,KAAA,UACEa,KAAK,SACLK,SAAUrD,EACVoC,UAAU,uGAAsGC,SAE/GrC,EACG,YACAW,EACA,iBACA,uBAMhB,C","sources":["pages/Businesses/ProductForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nfunction ProductForm() {\r\n  const navigate = useNavigate();\r\n  const { productId } = useParams(); // <-- detect edit mode\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    currency: \"INR\",\r\n    imageUrl: \"\",\r\n  });\r\n\r\n  const businessId = \"11111111-1111-1111-1111-111111111111\"; // TODO: dynamic later\r\n\r\n  const isEditMode = Boolean(productId);\r\n\r\n  // üß† Load product if in edit mode\r\n  useEffect(() => {\r\n    if (isEditMode) {\r\n      axios\r\n        .get(`https://localhost:7113/api/product?businessId=${businessId}`)\r\n        .then(res => {\r\n          const product = res.data.find(p => p.id === productId);\r\n          if (product) {\r\n            setFormData({\r\n              name: product.name,\r\n              description: product.description,\r\n              price: product.price,\r\n              currency: product.currency,\r\n              imageUrl: product.imageUrl,\r\n            });\r\n          } else {\r\n            alert(\"‚ö†Ô∏è Product not found.\");\r\n            navigate(\"/app/catalog/products\");\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(\"‚ùå Failed to load product:\", err);\r\n        });\r\n    }\r\n  }, [productId, businessId, isEditMode, navigate]); // ‚úÖ fixed dependencies\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const payload = {\r\n      ...formData,\r\n      businessId,\r\n      id: productId, // for PUT\r\n    };\r\n\r\n    try {\r\n      if (isEditMode) {\r\n        await axios.put(\r\n          `https://localhost:7113/api/product/${productId}`,\r\n          payload\r\n        );\r\n        alert(\"‚úÖ Product updated!\");\r\n      } else {\r\n        await axios.post(`https://localhost:7113/api/product`, payload);\r\n        alert(\"‚úÖ Product added!\");\r\n      }\r\n      navigate(\"/app/catalog/products\");\n    } catch (err) {\r\n      alert(\"‚ùå Failed to save product.\");\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#f5f6f7] min-h-[calc(100vh-80px)] p-6\">\r\n      <div className=\"max-w-xl mx-auto bg-white p-6 rounded-xl shadow mt-10\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-800 mb-4\">\n          {isEditMode ? \"‚úèÔ∏è Edit Product\" : \"‚ûï Add New Product\"}\r\n        </h2>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {[\r\n            [\"Product Name\", \"name\"],\r\n            [\"Description\", \"description\"],\r\n            [\"Price\", \"price\"],\r\n            [\"Currency\", \"currency\"],\r\n            [\"Image URL\", \"imageUrl\"],\r\n          ].map(([label, name]) => (\r\n            <div key={name}>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                {label}\r\n              </label>\r\n              <input\r\n                type={name === \"price\" ? \"number\" : \"text\"}\r\n                name={name}\r\n                value={formData[name]}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400\"\n                placeholder={`Enter ${label.toLowerCase()}`}\r\n                required\r\n              />\r\n            </div>\r\n          ))}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-emerald-600 text-white py-2 rounded-xl hover:bg-emerald-700 transition disabled:opacity-50\"\n          >\r\n            {loading\r\n              ? \"Saving...\"\r\n              : isEditMode\r\n              ? \"Update Product\"\r\n              : \"Add Product\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductForm;\r\n"],"names":["navigate","useNavigate","productId","useParams","loading","setLoading","useState","formData","setFormData","name","description","price","currency","imageUrl","businessId","isEditMode","Boolean","useEffect","axios","get","concat","then","res","product","data","find","p","id","alert","catch","err","console","error","handleChange","e","value","target","prev","_objectSpread","_jsx","className","children","_jsxs","onSubmit","async","preventDefault","payload","put","post","map","_ref","label","type","onChange","placeholder","toLowerCase","required","disabled"],"sourceRoot":""}