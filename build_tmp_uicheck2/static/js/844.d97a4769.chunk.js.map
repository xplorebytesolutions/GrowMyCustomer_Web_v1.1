{"version":3,"file":"static/js/844.d97a4769.chunk.js","mappings":"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","sources":["components/WhatsAppBubblePreview.jsx","pages/Campaigns/components/templates/TemplateCard.jsx","utils/normalizeTemplate.js","pages/Campaigns/TemplateCampaignList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { FaGlobe, FaPhone, FaReply } from \"react-icons/fa6\";\r\n\r\n// ‚úÖ Utility to render matching icons by subtype\r\nconst getButtonIcon = subtype => {\r\n  switch ((subtype || \"\").toLowerCase()) {\r\n    case \"url\":\r\n      return <FaGlobe className=\"text-green-500\" />;\r\n    case \"phone_number\":\r\n      return <FaPhone className=\"text-green-500\" />;\r\n    case \"quick_reply\":\r\n    default:\r\n      return <FaReply className=\"text-green-500\" />;\r\n  }\r\n};\r\n\r\nfunction WhatsAppBubblePreview({\r\n  templateBody = \"\",\r\n  parameters = [],\r\n  buttonParams = [],\r\n  imageUrl = \"\",\r\n}) {\r\n  const [imgError, setImgError] = useState(false);\r\n\r\n  // ‚úÖ Format template body with parameter values\r\n  const getFormattedBody = () => {\r\n    let text = templateBody || \"\";\r\n    parameters.forEach((val, idx) => {\r\n      const regex = new RegExp(`{{\\\\s*${idx + 1}\\\\s*}}`, \"g\");\r\n      text = text.replace(regex, val?.trim() || `{{${idx + 1}}}`);\r\n    });\r\n    return text;\r\n  };\r\n\r\n  const formattedBody = getFormattedBody();\r\n\r\n  // ‚úÖ Reset error state when imageUrl changes\r\n  useEffect(() => {\r\n    setImgError(false);\r\n  }, [imageUrl]);\r\n\r\n  return (\r\n    <div className=\"p-5 bg-[#f7f6f3] rounded-lg shadow-inner max-w-sm\">\r\n      <div className=\"relative bg-white shadow-sm text-sm overflow-hidden border border-gray-200 rounded-tr-lg rounded-br-lg rounded-tl-lg rounded-bl-none\">\r\n        {/* üß∑ Corner Tail */}\r\n        <div className=\"absolute -left-[6px] top-3 w-0 h-0 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent border-r-[10px] border-r-white\" />\r\n\r\n        <div className=\"p-4 text-gray-800 whitespace-pre-wrap\">\r\n          {/* üñºÔ∏è Image Preview */}\r\n          {imageUrl && (\r\n            <div className=\"mb-3\">\r\n              {!imgError ? (\r\n                <img\r\n                  src={imageUrl}\r\n                  alt=\"Template Header\"\r\n                  onError={() => setImgError(true)}\r\n                  className=\"w-full max-h-60 object-cover rounded-md border\"\r\n                />\r\n              ) : (\r\n                <div className=\"text-red-500 text-xs\">\r\n                  ‚ö†Ô∏è Failed to load image preview.\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* üìù Body */}\r\n          {formattedBody.split(\"\\n\").map((line, idx) => (\r\n            <p key={idx} className=\"mb-1\">\r\n              {line}\r\n            </p>\r\n          ))}\r\n        </div>\r\n\r\n        {/* üîò Buttons */}\r\n        {buttonParams.length > 0 && (\r\n          <div className=\"border-t px-4 divide-y text-center\">\r\n            {buttonParams.map((btn, idx) => (\r\n              <div\r\n                key={idx}\r\n                className=\"inline-flex items-center gap-2 py-3 text-green-600 font-medium justify-center w-full\"\r\n              >\r\n                {getButtonIcon(btn.subType)}\r\n                <span>{btn.text}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"text-xs text-gray-500 mt-2 text-left\">\r\n        Template Preview\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WhatsAppBubblePreview;\r\n\r\n// import React, { useState } from \"react\";\r\n// import { FaGlobe, FaPhone, FaReply } from \"react-icons/fa6\";\r\n\r\n// // ‚úÖ Utility to render matching icons by subtype\r\n// const getButtonIcon = subtype => {\r\n//   switch ((subtype || \"\").toLowerCase()) {\r\n//     case \"url\":\r\n//       return <FaGlobe className=\"text-green-500\" />;\r\n//     case \"phone_number\":\r\n//       return <FaPhone className=\"text-green-500\" />;\r\n//     case \"quick_reply\":\r\n//     default:\r\n//       return <FaReply className=\"text-green-500\" />;\r\n//   }\r\n// };\r\n\r\n// function WhatsAppBubblePreview({\r\n//   templateBody = \"\",\r\n//   parameters = [],\r\n//   buttonParams = [],\r\n//   imageUrl = \"\",\r\n// }) {\r\n//   const [imgError, setImgError] = useState(false);\r\n\r\n//   const getFormattedBody = () => {\r\n//     let text = templateBody || \"\";\r\n//     parameters.forEach((val, idx) => {\r\n//       const regex = new RegExp(`{{\\\\s*${idx + 1}\\\\s*}}`, \"g\");\r\n//       text = text.replace(regex, val?.trim() || `{{${idx + 1}}}`);\r\n//     });\r\n//     return text;\r\n//   };\r\n\r\n//   const formattedBody = getFormattedBody();\r\n\r\n//   return (\r\n//     <div className=\"p-5 bg-[#f7f6f3] rounded-lg shadow-inner max-w-sm\">\r\n//       <div className=\"relative bg-white shadow-sm text-sm overflow-hidden border border-gray-200 rounded-tr-lg rounded-br-lg rounded-tl-lg rounded-bl-none\">\r\n//         {/* üß∑ Corner Tail */}\r\n//         <div className=\"absolute -left-[6px] top-3 w-0 h-0 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent border-r-[10px] border-r-white\" />\r\n\r\n//         <div className=\"p-4 text-gray-800 whitespace-pre-wrap\">\r\n//           {/* üñºÔ∏è Full-width Image Header */}\r\n//           {imageUrl && !imgError && (\r\n//             <img\r\n//               src={imageUrl}\r\n//               alt=\"Template Header\"\r\n//               onError={() => setImgError(true)}\r\n//               className=\"w-full max-h-60 object-cover rounded-md border mb-3\"\r\n//             />\r\n//           )}\r\n\r\n//           {/* üìù Body */}\r\n//           {formattedBody.split(\"\\n\").map((line, idx) => (\r\n//             <p key={idx} className=\"mb-1\">\r\n//               {line}\r\n//             </p>\r\n//           ))}\r\n//         </div>\r\n\r\n//         {/* üîò Buttons */}\r\n//         {buttonParams.length > 0 && (\r\n//           <div className=\"border-t px-4 divide-y text-center\">\r\n//             {buttonParams.map((btn, idx) => (\r\n//               <div\r\n//                 key={idx}\r\n//                 className=\"inline-flex items-center gap-2 py-3 text-green-600 font-medium justify-center w-full\"\r\n//               >\r\n//                 {getButtonIcon(btn.subType)}\r\n//                 <span>{btn.text}</span>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       <div className=\"text-xs text-gray-500 mt-2 text-left\">\r\n//         Template Preview\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default WhatsAppBubblePreview;\r\n\r\n// import React, { useState } from \"react\";\r\n// import { FaGlobe, FaPhone, FaReply } from \"react-icons/fa6\";\r\n\r\n// // ‚úÖ Utility to render matching icons by subtype\r\n// const getButtonIcon = subtype => {\r\n//   switch ((subtype || \"\").toLowerCase()) {\r\n//     case \"url\":\r\n//       return <FaGlobe className=\"text-green-500\" />;\r\n//     case \"phone_number\":\r\n//       return <FaPhone className=\"text-green-500\" />;\r\n//     case \"quick_reply\":\r\n//     default:\r\n//       return <FaReply className=\"text-green-500\" />;\r\n//   }\r\n// };\r\n\r\n// function WhatsAppBubblePreview({\r\n//   templateBody = \"\",\r\n//   parameters = [],\r\n//   buttonParams = [],\r\n//   imageUrl = \"\",\r\n// }) {\r\n//   const [imgError, setImgError] = useState(false);\r\n\r\n//   // ‚úÖ Replace placeholders {{1}}, {{2}}...\r\n//   const getFormattedBody = () => {\r\n//     let text = templateBody || \"\";\r\n//     parameters.forEach((val, idx) => {\r\n//       const regex = new RegExp(`{{\\\\s*${idx + 1}\\\\s*}}`, \"g\");\r\n//       text = text.replace(regex, val?.trim() || `{{${idx + 1}}}`);\r\n//     });\r\n//     return text;\r\n//   };\r\n\r\n//   const formattedBody = getFormattedBody();\r\n\r\n//   return (\r\n//     <div className=\"p-5 bg-[#f7f6f3] rounded-lg shadow-inner max-w-sm\">\r\n//       <div className=\"relative bg-white shadow-sm text-sm overflow-hidden border border-gray-200 rounded-tr-lg rounded-br-lg rounded-tl-lg rounded-bl-none\">\r\n//         {/* üß∑ Perfectly aligned left-corner tail */}\r\n//         <div className=\"absolute -left-[6px] top-3 w-0 h-0 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent border-r-[10px] border-r-white\" />\r\n\r\n//         <div className=\"p-4 text-gray-800 whitespace-pre-wrap\">\r\n//           {/* üñºÔ∏è Image Header */}\r\n//           {imageUrl && !imgError && (\r\n//             <img\r\n//               src={imageUrl}\r\n//               alt=\"Template Header\"\r\n//               onError={() => setImgError(true)}\r\n//               className=\"mb-3 max-h-40 object-cover rounded-md border\"\r\n//             />\r\n//           )}\r\n\r\n//           {/* üìù Message Text */}\r\n//           {formattedBody.split(\"\\n\").map((line, idx) => (\r\n//             <p key={idx} className=\"mb-1\">\r\n//               {line}\r\n//             </p>\r\n//           ))}\r\n//         </div>\r\n\r\n//         {/* üîò Buttons (centered) */}\r\n//         {buttonParams.length > 0 && (\r\n//           <div className=\"border-t px-4 divide-y text-center\">\r\n//             {buttonParams.map((btn, idx) => (\r\n//               <div\r\n//                 key={idx}\r\n//                 className=\"inline-flex items-center gap-2 py-3 text-green-600 font-medium justify-center w-full\"\r\n//               >\r\n//                 {getButtonIcon(btn.subType)}\r\n//                 <span>{btn.text}</span>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* üìé Footer */}\r\n//       <div className=\"text-xs text-gray-500 mt-2 text-left\">\r\n//         Template Preview\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default WhatsAppBubblePreview;\r\n\r\n// import React from \"react\";\r\n// import { FaGlobe, FaPhone, FaReply } from \"react-icons/fa6\";\r\n\r\n// // ‚úÖ Utility to render matching icons by subtype\r\n// const getButtonIcon = subtype => {\r\n//   switch ((subtype || \"\").toLowerCase()) {\r\n//     case \"url\":\r\n//       return <FaGlobe className=\"text-green-500\" />;\r\n//     case \"phone_number\":\r\n//       return <FaPhone className=\"text-green-500\" />;\r\n//     case \"quick_reply\":\r\n//     default:\r\n//       return <FaReply className=\"text-green-500\" />;\r\n//   }\r\n// };\r\n\r\n// function WhatsAppBubblePreview({\r\n//   templateBody = \"\",\r\n//   parameters = [],\r\n//   buttonParams = [],\r\n// }) {\r\n//   // ‚úÖ Replace placeholders {{1}}, {{2}}...\r\n//   const getFormattedBody = () => {\r\n//     let text = templateBody || \"\";\r\n//     parameters.forEach((val, idx) => {\r\n//       const regex = new RegExp(`{{\\\\s*${idx + 1}\\\\s*}}`, \"g\");\r\n//       text = text.replace(regex, val?.trim() || `{{${idx + 1}}}`);\r\n//     });\r\n//     return text;\r\n//   };\r\n\r\n//   const formattedBody = getFormattedBody();\r\n\r\n//   return (\r\n//     <div className=\"p-5 bg-[#f7f6f3] rounded-lg shadow-inner max-w-sm\">\r\n//       <div className=\"relative bg-white shadow-sm text-sm overflow-hidden border border-gray-200 rounded-tr-lg rounded-br-lg rounded-tl-lg rounded-bl-none\">\r\n//         {/* üß∑ Perfectly aligned left-corner tail */}\r\n//         <div className=\"absolute -left-[6px] top-3 w-0 h-0 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent border-r-[10px] border-r-white\" />\r\n\r\n//         {/* üßæ Message content */}\r\n//         <div className=\"p-4 text-gray-800 whitespace-pre-wrap\">\r\n//           {formattedBody.split(\"\\n\").map((line, idx) => (\r\n//             <p key={idx} className=\"mb-1\">\r\n//               {line}\r\n//             </p>\r\n//           ))}\r\n//         </div>\r\n\r\n//         {/* üîò Buttons (centered) */}\r\n//         {buttonParams.length > 0 && (\r\n//           <div className=\"border-t px-4 divide-y text-center\">\r\n//             {buttonParams.map((btn, idx) => (\r\n//               <div\r\n//                 key={idx}\r\n//                 className=\"inline-flex items-center gap-2 py-3 text-green-600 font-medium   justify-center w-full\"\r\n//               >\r\n//                 {getButtonIcon(btn.subType)}\r\n//                 <span>{btn.text}</span>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* üìé Footer */}\r\n//       <div className=\"text-xs text-gray-500 mt-2 text-left\">\r\n//         Template Perview\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default WhatsAppBubblePreview;\r\n","// üìÑ src/pages/campaigns/components/templates/TemplateCard.jsx\r\nimport React from \"react\";\r\nimport {\r\n  FaPaperPlane,\r\n  FaRegImage,\r\n  FaRegFileAlt,\r\n  FaEye,\r\n  FaTrash,\r\n  FaCalendarAlt,\r\n  FaClock,\r\n  FaCheckCircle,\r\n  FaExclamationCircle,\r\n  FaPlay,\r\n  FaUserPlus,\r\n  FaList,\r\n} from \"react-icons/fa\";\r\n\r\n/* -------------------------------- helpers -------------------------------- */\r\nfunction cx(...xs) {\r\n  return xs.filter(Boolean).join(\" \");\r\n}\r\n\r\n/**\r\n * Props:\r\n *  - t: { id, name, kind, recipients, createdAt?, sentAt?, scheduledAt?, status? }\r\n *  - sending?: boolean\r\n *  - deleting?: boolean\r\n *  - onAssign, onViewRecipients, onSend\r\n *  - onPreview?, onDelete?\r\n */\r\nexport default function TemplateCard({\r\n  t,\r\n  sending = false,\r\n  deleting = false,\r\n  onAssign,\r\n  onViewRecipients,\r\n  onSend,\r\n  onPreview,\r\n  onDelete,\r\n}) {\n  const recipients = Number(t?.recipients || 0);\n  const statusRaw = (t?.status || \"\").toString().toLowerCase();\n\n  // --- Type (Text vs Image)\n  const kind = (t?.kind || t?.templateType || t?.type || \"\")\n    .toString()\n    .toLowerCase();\n  const isImage = kind === \"image_header\" || kind.includes(\"image\");\r\n  const typeLabel = isImage ? \"Image Header\" : \"Text Only\";\r\n\r\n  // --- Dates\r\n  const createdAt =\r\n    t?.createdAt || t?.created_on || t?.createdOn || t?.created || null;\r\n  const sentAt =\n    t?.sentAt || t?.lastSentAt || t?.dispatchedAt || t?.deliveredAt || null;\n  const scheduledAt = t?.scheduledAt || t?.queuedFor || null;\n\n  const isSent =\n    Boolean(sentAt) ||\n    [\"sent\", \"delivered\", \"dispatched\", \"completed\"].includes(statusRaw);\n\n  const canAssign = !isSent;\n  const canViewRecipients = recipients > 0;\n  const canDelete = recipients > 0 && !isSent && !deleting;\n  const canSend = recipients > 0 && !isSent && !sending;\n\n  // --- Status mapping\n  const status = (() => {\n    const s = (t?.status || \"\").toString().toLowerCase();\n    if (sentAt || s === \"sent\") return \"Sent\";\n    if (scheduledAt || [\"scheduled\", \"queued\", \"queue\", \"pending\"].includes(s))\n      return \"Scheduled\";\n    return \"Not Sent\";\n  })();\n\r\n  const statusConfig = {\r\n    Sent: {\r\n      icon: FaCheckCircle,\r\n      color: \"text-emerald-700\",\r\n      bg: \"bg-emerald-50\",\r\n      border: \"border-emerald-200\",\r\n    },\r\n    Scheduled: {\r\n      icon: FaClock,\r\n      color: \"text-amber-700\",\r\n      bg: \"bg-amber-50\",\r\n      border: \"border-amber-200\",\r\n    },\r\n    \"Not Sent\": {\r\n      icon: FaExclamationCircle,\r\n      color: \"text-gray-600\",\r\n      bg: \"bg-gray-50\",\r\n      border: \"border-gray-200\",\r\n    },\r\n  };\r\n\r\n  const currentStatus = statusConfig[status] || statusConfig[\"Not Sent\"];\r\n  const StatusIcon = currentStatus.icon;\r\n\r\n  return (\r\n    <article className=\"group relative flex h-full flex-col overflow-hidden rounded-xl bg-white shadow-sm border border-gray-200 transition-all duration-200 hover:shadow-md hover:border-gray-300\">\r\n      {/* Header */}\r\n      <div className=\"px-6 py-5 border-b border-gray-100\">\r\n        <div className=\"flex items-start justify-between gap-3 mb-3\">\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 leading-tight line-clamp-2\">\r\n              {t?.name || \"Untitled Campaign\"}\r\n            </h3>\r\n            <div className=\"mt-2 flex items-center gap-2\">\r\n              <span className=\"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1 text-xs font-medium bg-gray-100 text-gray-700\">\r\n                {isImage ? (\r\n                  <FaRegImage className=\"text-xs\" />\r\n                ) : (\r\n                  <FaRegFileAlt className=\"text-xs\" />\r\n                )}\r\n                {typeLabel}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Small action buttons in header */}\r\n          <div className=\"flex items-center gap-1\">\r\n            {/* Preview button */}\r\n            {onPreview && (\r\n              <button\r\n                onClick={onPreview}\r\n                type=\"button\"\r\n                title=\"Preview\"\r\n                aria-label=\"Preview\"\r\n                className=\"w-8 h-8 rounded-lg border border-gray-200 bg-white text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-colors flex items-center justify-center\"\r\n              >\r\n                <FaEye className=\"text-sm\" />\r\n              </button>\r\n            )}\r\n\r\n            {/* Delete button */}\n            {onDelete && (\n              <button\n                onClick={canDelete ? onDelete : undefined}\n                type=\"button\"\n                title=\"Delete campaign\"\n                disabled={!canDelete}\n                className={cx(\n                  \"w-8 h-8 rounded-lg border transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\",\n                  canDelete\n                    ? \"border-red-200 bg-red-50 text-red-600 hover:bg-red-100 hover:border-red-300\"\n                    : \"border-gray-200 bg-gray-50 text-gray-300\"\n                )}\n              >\n                <FaTrash className=\"text-sm\" />\n              </button>\n            )}\n          </div>\r\n        </div>\r\n\r\n        {/* Status and recipients */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div\r\n            className={cx(\r\n              \"inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-xs font-medium\",\r\n              currentStatus.bg,\r\n              currentStatus.color,\r\n              currentStatus.border,\r\n              \"border\"\r\n            )}\r\n          >\r\n            <StatusIcon className=\"text-xs\" />\r\n            {status}\r\n          </div>\r\n\r\n          <div className=\"text-right\">\r\n            <div className=\"text-2xl font-bold text-gray-900\">{recipients}</div>\r\n            <div className=\"text-xs text-gray-500 font-medium\">Recipients</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content area */}\r\n      <div className=\"flex-1 px-6 py-5\">\r\n        {/* Stats */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between py-2 border-b border-gray-100\">\r\n            <div className=\"flex items-center gap-2 text-gray-600\">\r\n              <FaCalendarAlt className=\"text-xs\" />\r\n              <span className=\"text-xs font-medium\">Created</span>\r\n            </div>\r\n            <div className=\"text-sm font-medium text-gray-900\">\r\n              {createdAt ? new Date(createdAt).toLocaleDateString() : \"‚Äî\"}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between py-2\">\r\n            <div className=\"flex items-center gap-2 text-gray-600\">\r\n              <FaPaperPlane className=\"text-xs\" />\r\n              <span className=\"text-xs font-medium\">Last Sent</span>\r\n            </div>\r\n            <div className=\"text-sm font-medium text-gray-900\">\r\n              {sentAt ? new Date(sentAt).toLocaleDateString() : \"‚Äî\"}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Secondary actions - just above footer */}\r\n      <div className=\"px-6 py-3 border-t border-gray-100 bg-gray-50\">\r\n        <div className=\"grid grid-cols-2 gap-2\">\n          <button\n            className={cx(\n              \"flex items-center justify-center gap-2 rounded-lg border px-3 py-2 text-xs font-medium transition-colors\",\n              canAssign\n                ? \"border-gray-200 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-300\"\n                : \"border-gray-200 bg-gray-50 text-gray-300 cursor-not-allowed\"\n            )}\n            onClick={canAssign ? onAssign : undefined}\n            type=\"button\"\n            disabled={!canAssign}\n            title={canAssign ? \"Assign recipients\" : \"Campaign already sent\"}\n          >\n            <FaUserPlus className=\"text-xs\" />\n            Assign Recipients\n          </button>\n\n          <button\n            className={cx(\n              \"flex items-center justify-center gap-2 rounded-lg border px-3 py-2 text-xs font-medium transition-colors\",\n              canViewRecipients\n                ? \"border-gray-200 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-300\"\n                : \"border-gray-200 bg-gray-50 text-gray-300 cursor-not-allowed\"\n            )}\n            onClick={canViewRecipients ? onViewRecipients : undefined}\n            type=\"button\"\n            disabled={!canViewRecipients}\n            title={canViewRecipients ? \"View recipients\" : \"Add recipients first\"}\n          >\n            <FaList className=\"text-xs\" />\n            View Recipients\n          </button>\n        </div>\n      </div>\n\r\n      {/* Footer with Send Campaign button */}\r\n      <div className=\"px-6 py-4 border-t border-gray-200 bg-gray-100\">\r\n        <button\r\n          className={cx(\r\n            \"w-full flex items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-semibold transition-colors\",\r\n            canSend\r\n              ? \"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 shadow-lg hover:shadow-emerald-200\"\r\n              : \"bg-gray-100 text-gray-400 cursor-not-allowed\"\r\n          )}\r\n          disabled={!canSend || sending}\n          onClick={onSend}\n          type=\"button\"\n          title={\n            canSend\n              ? \"Send campaign\"\n              : isSent\n                ? \"Campaign already sent\"\n                : \"Add recipients first\"\n          }\n          aria-label=\"Send campaign\"\n        >\n          {sending ? (\r\n            <>\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n              Sending...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <FaPlay className=\"text-sm\" />\r\n              Send Campaign\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","// src/utils/normalizeTemplate.js\r\nexport default function normalizeTemplate(raw) {\n  const buttons = raw?.multiButtons || raw?.buttonParams || raw?.buttons || [];\n  const imageUrl = raw?.imageUrl || null;\n  const body =\n    raw?.messageBody ||\r\n    raw?.templateBody ||\r\n    raw?.sampleBody ||\r\n    raw?.messageTemplate ||\r\n    raw?.body ||\n    \"\";\n\n  const createdAt =\n    raw?.createdAt || raw?.created_on || raw?.createdOn || raw?.created || null;\n\n  const sentAt =\n    raw?.sentAt ||\n    raw?.lastSentAt ||\n    raw?.dispatchedAt ||\n    raw?.deliveredAt ||\n    raw?.sent_at ||\n    raw?.sentOn ||\n    raw?.sent_on ||\n    null;\n\n  const scheduledAt =\n    raw?.scheduledAt ||\n    raw?.queuedFor ||\n    raw?.scheduled_at ||\n    raw?.queued_for ||\n    null;\n\n  const status = raw?.status || raw?.sendStatus || raw?.state || null;\n\n  return {\n    id: raw?.id,\n    name: raw?.name || \"Untitled Campaign\",\n    kind: imageUrl ? \"image_header\" : \"text_only\",\n    body,\n    caption: raw?.imageCaption || raw?.caption || \"\",\n    imageUrl,\n    buttons,\n    hasButtons: Array.isArray(buttons) && buttons.length > 0,\n    recipients: raw?.recipientCount || 0,\n    createdAt,\n    sentAt,\n    scheduledAt,\n    status,\n    updatedAt: raw?.updatedAt || raw?.updated_at || createdAt || null,\n    raw,\n  };\n}\n","// üìÑ src/pages/campaigns/TemplateCampaignList.jsx\nimport React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport axiosClient from \"../../api/axiosClient\";\nimport { toast } from \"react-toastify\";\nimport WhatsAppBubblePreview from \"../../components/WhatsAppBubblePreview\";\nimport TemplateCard from \"./components/templates/TemplateCard\";\nimport normalizeCampaign from \"../../utils/normalizeTemplate\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Menu, Portal, Transition } from \"@headlessui/react\";\nimport { Fragment } from \"react\";\nimport {\n  FaSearch,\n  FaSyncAlt,\n  FaListUl,\n  FaList,\n  FaTable,\n  FaThLarge,\n  FaEye,\n  FaEdit,\n  FaTrash,\n  FaUsers,\n  FaPaperPlane,\n  FaChartBar,\n  FaEllipsisV,\n  FaHistory,\n  FaRegClock,\n} from \"react-icons/fa\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\n\ndayjs.extend(relativeTime);\n\n\nfunction cx(...xs) {\n  return xs.filter(Boolean).join(\" \");\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(max, Math.max(min, value));\n}\n\nfunction CampaignRowMoreMenu({\n  hasRecipients,\n  canDelete,\n  onPreview,\n  onViewRecipients,\n  onViewLogs,\n  onLogReport,\n  onDelete,\n}) {\n  const buttonRef = useRef(null);\n\n  return (\n    <Menu as=\"div\" className=\"relative ml-2 inline-block text-left\">\n      {({ open }) => (\n        <>\n          <Menu.Button\n            ref={buttonRef}\n            className=\"flex items-center justify-center w-8 h-8 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2\"\n          >\n            <span className=\"sr-only\">Open options</span>\n            <FaEllipsisV className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Menu.Button>\n\n          <CampaignRowMoreMenuItems\n            open={open}\n            buttonRef={buttonRef}\n            hasRecipients={hasRecipients}\n            canDelete={canDelete}\n            onPreview={onPreview}\n            onViewRecipients={onViewRecipients}\n            onViewLogs={onViewLogs}\n            onLogReport={onLogReport}\n            onDelete={onDelete}\n          />\n        </>\n      )}\n    </Menu>\n  );\n}\n\nfunction CampaignRowMoreMenuItems({\n  open,\n  buttonRef,\n  hasRecipients,\n  canDelete,\n  onPreview,\n  onViewRecipients,\n  onViewLogs,\n  onLogReport,\n  onDelete,\n}) {\n  const itemsRef = useRef(null);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  const [originClass, setOriginClass] = useState(\"origin-top-right\");\n  const [positioned, setPositioned] = useState(false);\n\n  const updatePosition = useCallback(() => {\n    const anchor = buttonRef?.current;\n    const menu = itemsRef?.current;\n    if (!anchor || !menu) return;\n\n    const anchorRect = anchor.getBoundingClientRect();\n    const menuRect = menu.getBoundingClientRect();\n\n    const margin = 8;\n    const viewportPad = 8;\n\n    const spaceBelow = window.innerHeight - anchorRect.bottom - margin;\n    const spaceAbove = anchorRect.top - margin;\n    const openUp = spaceBelow < menuRect.height && spaceAbove > spaceBelow;\n\n    const nextTop = openUp\n      ? anchorRect.top - menuRect.height - margin\n      : anchorRect.bottom + margin;\n\n    const top = clamp(\n      nextTop,\n      viewportPad,\n      Math.max(viewportPad, window.innerHeight - menuRect.height - viewportPad)\n    );\n\n    const nextLeft = anchorRect.right - menuRect.width;\n    const left = clamp(\n      nextLeft,\n      viewportPad,\n      Math.max(viewportPad, window.innerWidth - menuRect.width - viewportPad)\n    );\n\n    setOriginClass(openUp ? \"origin-bottom-right\" : \"origin-top-right\");\n    setPosition({ top, left });\n    setPositioned(true);\n  }, [buttonRef]);\n\n  useLayoutEffect(() => {\n    if (!open) {\n      setPositioned(false);\n      return;\n    }\n\n    setPositioned(false);\n    const raf1 = requestAnimationFrame(updatePosition);\n    const raf2 = requestAnimationFrame(updatePosition);\n    return () => {\n      cancelAnimationFrame(raf1);\n      cancelAnimationFrame(raf2);\n    };\n  }, [open, updatePosition]);\n\n  useEffect(() => {\n    if (!open) return;\n\n    const handler = () => updatePosition();\n    window.addEventListener(\"resize\", handler);\n    window.addEventListener(\"scroll\", handler, true);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n      window.removeEventListener(\"scroll\", handler, true);\n    };\n  }, [open, updatePosition]);\n\n  return (\n    <Portal>\n      <Transition\n        show={open}\n        as={Fragment}\n        enter=\"transition ease-out duration-100\"\n        enterFrom=\"transform opacity-0 scale-95\"\n        enterTo=\"transform opacity-100 scale-100\"\n        leave=\"transition ease-in duration-75\"\n        leaveFrom=\"transform opacity-100 scale-100\"\n        leaveTo=\"transform opacity-0 scale-95\"\n      >\n        <Menu.Items\n          static\n          ref={itemsRef}\n          style={{\n            position: \"fixed\",\n            top: position.top,\n            left: position.left,\n            zIndex: 60,\n            visibility: positioned ? \"visible\" : \"hidden\",\n          }}\n          className={cx(\n            \"w-48 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none divide-y divide-gray-100 max-h-[60vh] overflow-auto\",\n            originClass\n          )}\n        >\n          <div className=\"p-1\">\n            <Menu.Item>\n              {({ active }) => (\n                <button\n                  onClick={onPreview}\n                  className={cx(\n                    active\n                      ? \"bg-emerald-50 text-emerald-700\"\n                      : \"text-gray-700\",\n                    \"group flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm\"\n                  )}\n                >\n                  <FaEye className=\"text-gray-400 group-hover:text-emerald-500\" />\n                  Preview Template\n                </button>\n              )}\n            </Menu.Item>\n\n            <Menu.Item disabled={!hasRecipients}>\n              {({ active, disabled }) => (\n                <button\n                  disabled={disabled}\n                  onClick={onViewRecipients}\n                  className={cx(\n                    disabled\n                      ? \"text-gray-300 cursor-not-allowed\"\n                      : active\n                      ? \"bg-emerald-50 text-emerald-700\"\n                      : \"text-gray-700\",\n                    \"group flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm\"\n                  )}\n                >\n                  <FaUsers\n                    className={cx(\n                      \"text-gray-400 group-hover:text-emerald-500\",\n                      disabled && \"text-gray-300\"\n                    )}\n                  />\n                  View Recipients\n                </button>\n              )}\n            </Menu.Item>\n\n            <Menu.Item>\n              {({ active }) => (\n                <button\n                  onClick={onViewLogs}\n                  className={cx(\n                    active ? \"bg-amber-50 text-amber-700\" : \"text-gray-700\",\n                    \"group flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm\"\n                  )}\n                >\n                  <FaHistory className=\"text-gray-400 group-hover:text-amber-500\" />\n                  View Logs\n                </button>\n              )}\n            </Menu.Item>\n\n            <Menu.Item>\n              {({ active }) => (\n                <button\n                  onClick={onLogReport}\n                  className={cx(\n                    active ? \"bg-indigo-50 text-indigo-700\" : \"text-gray-700\",\n                    \"group flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm\"\n                  )}\n                >\n                  <FaChartBar className=\"text-gray-400 group-hover:text-indigo-500\" />\n                  Log Report\n                </button>\n              )}\n            </Menu.Item>\n          </div>\n\n          <div className=\"p-1\">\n            <Menu.Item disabled={!canDelete}>\n              {({ active, disabled }) => (\n                <button\n                  onClick={onDelete}\n                  disabled={disabled}\n                  className={cx(\n                    disabled\n                      ? \"text-gray-300 cursor-not-allowed\"\n                      : active\n                      ? \"bg-red-50 text-red-700\"\n                      : \"text-gray-700\",\n                    \"group flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm\"\n                  )}\n                >\n                  <FaTrash\n                    className={cx(\n                      \"text-gray-400 group-hover:text-red-500\",\n                      disabled && \"text-gray-300\"\n                    )}\n                  />\n                  Delete Campaign\n                </button>\n              )}\n            </Menu.Item>\n          </div>\n        </Menu.Items>\n      </Transition>\n    </Portal>\n  );\n}\n\nconst TYPE_FILTERS = [\n  { id: \"all\", label: \"All\", icon: FaListUl },\n  { id: \"image_header\", label: \"Image Header\", icon: FaEye },\n  { id: \"text_only\", label: \"Text Only\", icon: FaEdit },\n  { id: \"with_buttons\", label: \"With Buttons\", icon: FaPaperPlane },\n  { id: \"no_buttons\", label: \"No Buttons\", icon: FaChartBar },\n];\n\n/* ---------- Inspector Modal ---------- */\nfunction InspectorModal({ item, onClose }) {\n  if (!item) return null;\n\n  // Normalize fields from different shapes (DB list vs. detail vs. legacy)\n  const messageTemplate =\n    item.body || item.messageBody || item.templateBody || \"\";\n\n  // Buttons can be `buttons`, `multiButtons`, or a JSON string\n  let buttonsRaw = item.buttons ?? item.multiButtons ?? [];\n  if (typeof buttonsRaw === \"string\") {\n    try {\n      buttonsRaw = JSON.parse(buttonsRaw);\n    } catch {\n      buttonsRaw = [];\n    }\n  }\n\n  const imageUrl =\n    item.imageUrl || item.mediaUrl || item.headerImageUrl || undefined;\n\n  const caption = item.caption || item.imageCaption || \"\";\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 p-4\"\n      onClick={onClose}\n    >\n      <div\n        className=\"w-full max-w-2xl overflow-hidden rounded-2xl bg-white shadow-2xl\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between border-b px-6 py-4 bg-gradient-to-r from-slate-50 to-emerald-50\">\n          <div>\n            <div className=\"text-lg font-bold text-gray-900\">{item.name}</div>\n            <div className=\"text-sm text-gray-600\">Template Preview</div>\n          </div>\n          <button\n            className=\"rounded-xl border border-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors\"\n            onClick={onClose}\n          >\n            Close\n          </button>\n        </div>\n\n        <div className=\"p-6\">\n          <WhatsAppBubblePreview\n            messageTemplate={messageTemplate}\n            multiButtons={buttonsRaw}\n            imageUrl={imageUrl}\n            caption={caption}\n            campaignId={item.id}\n          />\n        </div>\n\n        <div className=\"flex items-center justify-end gap-3 border-t px-6 py-4 bg-gray-50\">\n          <button\n            className=\"rounded-xl border border-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors\"\n            onClick={onClose}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ---------- Danger Delete Modal ---------- */\nfunction DangerDeleteModal({\n  open,\n  target, // { id, name }\n  usage, // { status, recipients, queuedJobs, sendLogs }\n  loading, // loading usage\n  deleting, // deleting flag\n  onCancel,\n  onConfirm,\n}) {\n  const [confirmed, setConfirmed] = React.useState(false);\n  const [typed, setTyped] = React.useState(\"\");\n\n  // React.useEffect removed to avoid update loop. \n  // State reset is handled by unmounting/remounting via key prop.\n\n  if (!open) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 p-4\"\n      onClick={onCancel}\n    >\n      <div\n        className=\"w-full max-w-lg overflow-hidden rounded-2xl bg-white shadow-2xl\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"border-b px-6 py-5 bg-red-50\">\n          <h3 className=\"text-xl font-bold text-gray-900\">\n            Delete this campaign permanently?\n          </h3>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            <strong>This action can't be undone.</strong> Deleting will\n            permanently remove this campaign and everything linked to it‚Äî its\n            audience and recipients, any scheduled or queued sends, and the full\n            history for this campaign (messages and activity).\n          </p>\n        </div>\n\n        <div className=\"px-6 py-5\">\n          {/* Usage section */}\n          <div className=\"rounded-xl border border-gray-200 bg-gray-50 px-4 py-4\">\n            {loading ? (\n              <div className=\"text-sm text-gray-600\">\n                Loading campaign details‚Ä¶\n              </div>\n            ) : usage ? (\n              <ul className=\"text-sm text-gray-800 space-y-2\">\n                <li className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Name:</span>\n                  <strong>{target?.name || \"Untitled\"}</strong>\n                </li>\n                <li className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Status:</span>\n                  <strong>{usage.status}</strong>\n                </li>\n                <li className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Recipients:</span>\n                  <strong>{usage.recipients}</strong>\n                </li>\n                <li className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Scheduled/queued sends:</span>\n                  <strong>{usage.queuedJobs}</strong>\n                </li>\n                <li className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Messages sent:</span>\n                  <strong>{usage.sendLogs}</strong>\n                </li>\n              </ul>\n            ) : (\n              <div className=\"text-sm text-gray-600\">No details available.</div>\n            )}\n          </div>\n\n          {/* Confirmations */}\n          <div className=\"mt-6 space-y-4\">\n            <label className=\"flex items-start gap-3 text-sm text-gray-700\">\n              <input\n                type=\"checkbox\"\n                className=\"mt-1 h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-400\"\n                checked={confirmed}\n                onChange={e => setConfirmed(e.target.checked)}\n              />\n              <span>\n                I understand this will permanently delete this campaign, its\n                audience/recipients, any scheduled sends, and its history.\n              </span>\n            </label>\n\n            <div>\n              <label className=\"text-sm font-medium text-gray-700\">\n                Type the campaign name to confirm:\n              </label>\n              <input\n                value={typed}\n                onChange={e => setTyped(e.target.value)}\n                placeholder={target?.name || \"Campaign name\"}\n                className=\"mt-2 w-full rounded-xl border border-gray-300 px-4 py-3 text-sm focus:ring-2 focus:ring-red-200 focus:border-red-300 outline-none\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-end gap-3 border-t px-6 py-4 bg-gray-50\">\n          <button\n            className=\"rounded-xl border border-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors\"\n            onClick={onCancel}\n            disabled={deleting}\n          >\n            Cancel\n          </button>\n          <button\n            className={cx(\n              \"rounded-xl px-4 py-2 text-white font-medium transition-colors\",\n              deleting ? \"bg-red-400\" : \"bg-red-600 hover:bg-red-700\"\n            )}\n            onClick={onConfirm}\n            disabled={\n              deleting ||\n              !confirmed ||\n              (typed || \"\").trim() !== (target?.name || \"\").trim()\n            }\n          >\n            {deleting ? \"Deleting‚Ä¶\" : \"Permanently delete\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ---------- Page ---------- */\nfunction TemplateCampaignList() {\n  const [raw, setRaw] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sendingId, setSendingId] = useState(null);\n  const [deletingId, setDeletingId] = useState(null); // for card/table spinner\n  const [q, setQ] = useState(\"\");\n  const [onlyWithRecipients, setOnlyWithRecipients] = useState(false);\n  const [sort, setSort] = useState(\"recent\"); // recent | recipients | name\n  const [activeType, setActiveType] = useState(\"all\");\n  const [viewMode, setViewMode] = useState(\"table\"); // grid | table\n  const [inspector, setInspector] = useState(null);\n\n  // Delete modal state\n  const [deleteTarget, setDeleteTarget] = useState(null);\n  const [usage, setUsage] = useState(null);\n  const [usageLoading, setUsageLoading] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n\n  // Pagination state (MUST be defined before loadCampaigns)\n  const [, setPagination] = useState({\n    pageIndex: 0,\n    pageSize: 10,\n    total: 0,\n  });\n\n  const navigate = useNavigate();\n\n  const loadCampaigns = async (silent = false) => {\n    if (!silent) setLoading(true);\n    try {\n      // Reverted to original endpoint that works\n      const res = await axiosClient.get(\"/campaign/get-image-campaign\");\n      \n      // Handle potential response formats (array vs object)\n      const items = Array.isArray(res.data) ? res.data : (res.data?.items || []);\n      setRaw(items);\n      \n      // Update total for pagination (client-side or server-side count)\n      const total = Array.isArray(res.data) ? res.data.length : (res.data?.totalCount || 0);\n      setPagination(prev => ({ ...prev, total }));\n    } catch (err) {\n      console.error(err);\n      if (!silent) toast.error(\"Failed to load campaigns\");\n    } finally {\n      if (!silent) setLoading(false);\n    }\n  };\n\n  // Auto-refresh polling for processing campaigns\n  useEffect(() => {\n    const hasProcessing = raw.some(\n      c =>\n        c.status === \"Processing\" ||\n        c.status === \"Sending\" ||\n        c.status === \"InFlight\"\n    );\n\n    if (hasProcessing) {\n      const interval = setInterval(() => {\n        loadCampaigns(true); // silent reload\n      }, 3000);\n      return () => clearInterval(interval);\n    }\n  }, [raw]);\n\n  useEffect(() => {\n    loadCampaigns();\n  }, []);\n\n  const handleSend = async campaignId => {\n    setSendingId(campaignId);\n    try {\n      await axiosClient.post(`/campaign/send-campaign/${campaignId}`);\n      toast.success(\"üöÄ Campaign sent successfully!\");\n      loadCampaigns();\n    } catch (err) {\n      console.error(\"‚ùå Sending failed:\", err);\n      toast.error(\"‚ùå Failed to send campaign\");\n    } finally {\n      setSendingId(null);\n    }\n  };\n\n  // Open delete modal: fetch usage\n  const openDelete = async item => {\n    setDeleteTarget(item);\n    setUsage(null);\n    setUsageLoading(true);\n    try {\n      const res = await axiosClient.get(`/campaign/${item.id}/usage`);\n      setUsage(res.data);\n    } catch (err) {\n      console.error(\"Usage fetch failed\", err);\n      toast.error(\"‚ùå Could not load campaign usage\");\n    } finally {\n      setUsageLoading(false);\n    }\n  };\n\n  // Confirm delete: call DELETE ?force=true\n  const confirmDelete = async () => {\n    if (!deleteTarget) return;\n    setDeleting(true);\n    setDeletingId(deleteTarget.id);\n    try {\n      const res = await axiosClient.delete(`/campaign/${deleteTarget.id}`, {\n        params: { force: true },\n      });\n      toast.success(res?.data?.message || \"üóëÔ∏è Campaign deleted permanently.\");\n      // Close modal + refresh\n      setDeleteTarget(null);\n      setUsage(null);\n      await loadCampaigns();\n    } catch (err) {\n      console.error(\"Delete failed\", err);\n      const msg =\n        err?.response?.data?.message || \"‚ùå Failed to delete campaign.\";\n      if (err?.response?.status === 409) {\n        toast.error(\n          msg || \"‚ùå Cannot delete while campaign is sending. Cancel or wait.\"\n        );\n      } else if (err?.response?.status === 400) {\n        toast.error(\n          msg ||\n            \"‚ùå Delete failed ‚Äî only draft campaigns can be deleted without force.\"\n        );\n      } else if (err?.response?.status === 404) {\n        toast.error(\"‚ùå Campaign not found.\");\n      } else {\n        toast.error(msg);\n      }\n    } finally {\n      setDeleting(false);\n      setDeletingId(null);\n    }\n  };\n\n  const cancelDelete = () => {\n    setDeleteTarget(null);\n    setUsage(null);\n    setUsageLoading(false);\n    setDeleting(false);\n  };\n\n  const data = useMemo(() => raw.map(normalizeCampaign), [raw]);\n\n  const view = useMemo(() => {\n    let list = data;\n\n    if (q.trim()) {\n      const needle = q.toLowerCase();\n      list = list.filter(\n        c =>\n          c.name.toLowerCase().includes(needle) ||\n          c.body.toLowerCase().includes(needle)\n      );\n    }\n\n    if (onlyWithRecipients) list = list.filter(c => c.recipients > 0);\n\n    if (activeType !== \"all\") {\n      list = list.filter(c => {\n        if (activeType === \"image_header\") return c.kind === \"image_header\";\n        if (activeType === \"text_only\") return c.kind === \"text_only\";\n        if (activeType === \"with_buttons\") return c.hasButtons;\n        if (activeType === \"no_buttons\") return !c.hasButtons;\n        return true;\n      });\n    }\n\n    list = [...list].sort((a, b) => {\n      if (sort === \"name\") return a.name.localeCompare(b.name);\n      if (sort === \"recipients\") return b.recipients - a.recipients;\n      const ax = new Date(a.updatedAt || 0).getTime();\n      const bx = new Date(b.updatedAt || 0).getTime();\n      return bx - ax; // recent\n    });\n\n    return list;\n  }, [data, q, onlyWithRecipients, activeType, sort]);\n\n  return (\n    <div className=\"min-h-screen bg-[#f5f6f7]\">\n      <div className=\"mx-auto max-w-7xl px-4 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-r from-emerald-600 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-600/20\">\n                  <FaList className=\"text-white text-xl\" />\n                </div>\n                <div>\n                  <h1 className=\"text-2xl font-bold text-gray-900\">\n                    Template Campaigns\n                  </h1>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Manage and send your WhatsApp template campaigns\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Controls */}\n            <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center\">\n              <div className=\"relative group\">\n                <FaSearch className=\"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-emerald-500 transition-colors\" />\n                <input\n                  value={q}\n                  onChange={e => setQ(e.target.value)}\n                  placeholder=\"Search by name or message‚Ä¶\"\n                  className=\"w-full lg:w-72 rounded-xl border border-gray-200 pl-12 pr-4 py-2.5 text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all shadow-sm\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <label className=\"inline-flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer select-none\">\n                  <input\n                    type=\"checkbox\"\n                    checked={onlyWithRecipients}\n                    onChange={e => setOnlyWithRecipients(e.target.checked)}\n                    className=\"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500\"\n                  />\n                  Has recipients\n                </label>\n\n                <select\n                  value={sort}\n                  onChange={e => setSort(e.target.value)}\n                  className=\"rounded-xl border border-gray-200 px-3 py-2.5 text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none shadow-sm cursor-pointer\"\n                >\n                  <option value=\"recent\">Sort: Recent</option>\n                  <option value=\"recipients\">Sort: Recipients</option>\n                  <option value=\"name\">Sort: Name</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Segmented filters */}\n        <div className=\"mb-6 flex flex-wrap items-center justify-between gap-4\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            {TYPE_FILTERS.map(f => {\n              const Icon = f.icon;\n              const isActive = activeType === f.id;\n              return (\n                <button\n                  key={f.id}\n                  className={cx(\n                    \"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all\",\n                    isActive\n                      ? \"bg-emerald-600 text-white shadow-md shadow-emerald-600/20\"\n                      : \"bg-white text-gray-600 border border-transparent hover:bg-emerald-50 hover:text-emerald-700\"\n                  )}\n                  onClick={() => setActiveType(f.id)}\n                >\n                  <Icon className={cx(\"w-3.5 h-3.5\", isActive ? \"text-white\" : \"text-gray-400\")} />\n                  {f.label}\n                </button>\n              );\n            })}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <div className=\"inline-flex items-center rounded-lg border border-gray-200 bg-white p-1\">\n              <button\n                type=\"button\"\n                className={cx(\n                  \"inline-flex h-8 w-8 items-center justify-center rounded-md transition-all\",\n                  viewMode === \"grid\"\n                    ? \"bg-emerald-50 text-emerald-700 shadow-sm\"\n                    : \"text-gray-400 hover:text-gray-600\"\n                )}\n                onClick={() => setViewMode(\"grid\")}\n                title=\"Grid view\"\n              >\n                <FaThLarge className=\"h-3.5 w-3.5\" />\n              </button>\n              <button\n                type=\"button\"\n                className={cx(\n                  \"inline-flex h-8 w-8 items-center justify-center rounded-md transition-all\",\n                  viewMode === \"table\"\n                    ? \"bg-emerald-50 text-emerald-700 shadow-sm\"\n                    : \"text-gray-400 hover:text-gray-600\"\n                )}\n                onClick={() => setViewMode(\"table\")}\n                title=\"Table view\"\n              >\n                <FaTable className=\"h-3.5 w-3.5\" />\n              </button>\n            </div>\n            <button\n              onClick={loadCampaigns}\n              className=\"inline-flex items-center gap-2 rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm transition-all bg-white/50\"\n              title=\"Refresh\"\n            >\n              <FaSyncAlt className={cx(loading && \"animate-spin\")} />\n              Refresh\n            </button>\n          </div>\n        </div>\n\n        {/* Loading skeleton */}\n        {loading && (\n          <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {Array.from({ length: 6 }).map((_, i) => (\n              <div\n                key={i}\n                className=\"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm animate-pulse\"\n              >\n                <div className=\"h-40 w-full rounded-xl bg-gray-100\" />\n                <div className=\"mt-4 h-6 w-2/3 rounded bg-gray-100\" />\n                <div className=\"mt-2 h-4 w-1/3 rounded bg-gray-100\" />\n                <div className=\"mt-4 h-20 w-full rounded bg-gray-100\" />\n                <div className=\"mt-6 flex gap-2\">\n                  <div className=\"h-10 w-24 rounded bg-gray-100\" />\n                  <div className=\"h-10 w-24 rounded bg-gray-100\" />\n                  <div className=\"h-10 w-24 rounded bg-gray-100\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Empty state */}\n        {!loading && view.length === 0 && (\n          <div className=\"mt-16 flex flex-col items-center justify-center text-center\">\n            <div className=\"rounded-3xl border border-gray-200 p-12 shadow-sm bg-white max-w-lg\">\n              <div className=\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-r from-emerald-100 to-emerald-50\">\n                <FaListUl className=\"text-emerald-600 text-2xl\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\n                No template campaigns found\n              </h3>\n              <p className=\"text-gray-600 mb-8\">\n                Try adjusting your filters or create a new campaign to get started.\n              </p>\n              <button\n                onClick={loadCampaigns}\n                className=\"rounded-xl border border-gray-200 px-6 py-3 font-semibold text-gray-700 hover:bg-gray-50 transition-colors\"\n              >\n                Refresh List\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* GRID VIEW */}\n        {!loading && view.length > 0 && viewMode === \"grid\" && (\n          <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {view.map(t => {\n              const sending = sendingId === t.id;\n              const deletingThis = deletingId === t.id;\n              return (\n                <TemplateCard\n                  key={t.id}\n                  t={t}\n                  sending={sending}\n                  deleting={deletingThis}\n                  onPreview={() => setInspector(t)}\n                  onSend={() => handleSend(t.id)}\n                  onAssign={() =>\n                    navigate(\n                      `/app/campaigns/image-campaigns/assign-contacts/${t.id}`\n                    )\n                  }\n                  onViewRecipients={() =>\n                    navigate(\n                      `/app/campaigns/image-campaigns/assigned-contacts/${t.id}`\n                    )\n                  }\n                  onDelete={() => openDelete(t)}\n                />\n              );\n            })}\n          </div>\n        )}\n\n        {/* TABLE VIEW (compact) */}\n        {!loading && view.length > 0 && viewMode === \"table\" && (\n          <div className=\"overflow-hidden rounded-lg border border-slate-100 bg-white shadow-sm\">\n            <div className=\"max-h-[70vh] overflow-auto\">\n              <table className=\"w-full text-sm text-slate-900\">\n                <thead className=\"sticky top-0 z-10 bg-gray-100 backdrop-blur text-left text-xs font-semibold tracking-wider text-gray-700 border-b border-gray-200\">\n                  <tr>\n                    <th className=\"px-4 py-3 w-4\"></th>\n                    <th className=\"px-4 py-3\">Campaign Name</th>\n                    <th className=\"px-4 py-3\">Type</th>\n                    <th className=\"px-4 py-3 text-center\">Recipients</th>\n                    <th className=\"px-4 py-3 text-center\">Status</th>\n                    <th className=\"px-4 py-3\">Sent At</th>\n                    <th className=\"px-4 py-3 text-right\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-100\">\n                  {view.map(t => {\n                     const hasRecipients = t.recipients > 0;\n                     const statusRaw = (t?.status || \"\").toString().toLowerCase();\n                     const isSent =\n                       Boolean(t?.sentAt) ||\n                       [\"sent\", \"delivered\", \"dispatched\", \"completed\"].includes(\n                         statusRaw\n                       );\n                     const canDelete = hasRecipients && !isSent;\n                      \n                     return (\n                      <tr\n                        key={t.id}\n                        className={cx(\n                          \"group hover:bg-gray-200 transition-colors\",\n                          view.indexOf(t) % 2 === 0 ? \"bg-white\" : \"bg-slate-50/40\"\n                        )}\n                      >\n                        {/* Status Indicator Bar */}\n                        <td className=\"px-4 py-3 align-middle\">\n                           <div className={cx(\n                             \"w-1.5 h-8 rounded-full\",\n                             hasRecipients ? \"bg-emerald-500\" : \"bg-gray-200\"\n                           )} title={hasRecipients ? \"Ready to send\" : \"No recipients assigned\"}/>\n                        </td>\n\n                        <td className=\"px-4 py-3 font-medium text-gray-900 group-hover:text-indigo-800 align-middle\">\n                          <span className=\"truncate max-w-[200px] xl:max-w-[300px]\" title={t.name}>\n                            {t.name}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3 text-gray-600 align-middle\">\n                          <span className={cx(\n                            \"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium border\",\n                            t.kind === \"image_header\" \n                              ? \"bg-indigo-50 text-indigo-700 border-indigo-100\"\n                              : \"bg-slate-50 text-slate-700 border-slate-200\"\n                          )}>\n                            {t.kind === \"image_header\" ? <FaEye className=\"opacity-70\" /> : <FaEdit className=\"opacity-70\" />}\n                            {t.kind === \"image_header\" ? \"Image Header\" : \"Text Only\"}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3 text-center align-middle\">\n                          <button\n                            disabled={!hasRecipients}\n                            onClick={() =>\n                              navigate(\n                                `/app/campaigns/image-campaigns/assigned-contacts/${t.id}`\n                              )\n                            }\n                            className={cx(\n                              \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors\",\n                              hasRecipients\n                                ? \"bg-green-100 text-green-800 hover:bg-green-200 cursor-pointer\"\n                                : \"bg-gray-100 text-gray-600 cursor-default\"\n                            )}\n                            title={hasRecipients ? \"View assigned recipients\" : \"\"}\n                          >\n                            {t.recipients}\n                          </button>\n                        </td>\n                        <td className=\"px-4 py-3 text-center align-middle\">\n                          <span\n                            className={cx(\n                              \"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium border\",\n                              isSent\n                                ? \"bg-emerald-50 text-emerald-700 border-emerald-100\"\n                                : statusRaw === \"failed\" \n                                ? \"bg-red-50 text-red-700 border-red-100\"\n                                : statusRaw === \"sending\" || statusRaw === \"processing\"\n                                ? \"bg-blue-50 text-blue-700 border-blue-100\"\n                                : \"bg-amber-50 text-amber-700 border-amber-100\"\n                            )}\n                            title={t?.status ? `Status: ${t.status}` : undefined}\n                          >\n                            <FaPaperPlane className=\"opacity-70\" />\n                            {isSent ? \"Sent\" : t?.status || \"Pending\"}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3 text-gray-500 group-hover:text-gray-800 text-xs align-middle\">\n                          <div\n                            className=\"flex items-center gap-1.5\"\n                            title={t.sentAt ? new Date(t.sentAt).toLocaleString() : \"\"}\n                          >\n                            <FaRegClock className=\"text-gray-400 group-hover:text-gray-600\" />\n                            {t.sentAt ? dayjs(t.sentAt).fromNow() : \"‚Äî\"}\n                          </div>\n                        </td>\n                        <td className=\"px-4 py-3 align-middle\">\n                          <div className=\"flex items-center justify-end gap-2\">\n                            {/* Context-Aware Actions */}\n                            {isSent ? (\n                                <>\n                                  <button\n                                    className=\"inline-flex items-center gap-2 rounded-lg bg-emerald-50 px-3.5 py-1.5 text-sm font-semibold text-emerald-700 hover:bg-emerald-100 hover:text-emerald-800 transition-colors\"\n                                    onClick={() => navigate(`/app/campaigns/logs/${t.id}`)}\n                                  >\n                                    <FaHistory className=\"text-emerald-600\" />\n                                    View Logs\n                                  </button>\n                                  <button\n                                    className=\"inline-flex items-center gap-2 rounded-lg bg-indigo-50 px-3.5 py-1.5 text-sm font-semibold text-indigo-700 hover:bg-indigo-100 hover:text-indigo-800 transition-colors\"\n                                    onClick={() => navigate(`/app/campaigns/${t.id}/reports/logs`)}\n                                  >\n                                    <FaChartBar className=\"text-indigo-600\" />\n                                    Log Report\n                                  </button>\n                                </>\n                            ) : hasRecipients ? (\n                              // READY STATE: Show \"Send\" as primary\n                              <>\n                                <button\n                                  className=\"text-sm font-medium text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 px-3 py-1.5 rounded-md transition-colors\"\n                                  onClick={() =>\n                                    navigate(\n                                      `/app/campaigns/image-campaigns/assign-contacts/${t.id}`\n                                    )\n                                  }\n                                >\n                                  Assign\n                                </button>\n                                <button\n                                  className=\"ml-2 rounded-lg bg-emerald-600 px-3.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 transition-all\"\n                                  onClick={() => handleSend(t.id)}\n                                >\n                                  Send\n                                </button>\n                              </>\n                            ) : (\n                              // EMPTY STATE: Show \"Assign\" as primary\n                                <button\n                                  className=\"rounded-lg bg-emerald-600 px-3.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 transition-all\"\n                                  onClick={() =>\n                                    navigate(\n                                      `/app/campaigns/image-campaigns/assign-contacts/${t.id}`\n                                    )\n                                  }\n                                >\n                                  Assign Contacts\n                                </button>\n                            )}\n\n                            {/* More Dropdown */}\n                            <CampaignRowMoreMenu\n                              hasRecipients={hasRecipients}\n                              canDelete={canDelete}\n                              onPreview={() => setInspector(t)}\n                              onViewRecipients={() =>\n                                navigate(\n                                  `/app/campaigns/image-campaigns/assigned-contacts/${t.id}`\n                                )\n                              }\n                              onViewLogs={() => navigate(`/app/campaigns/logs/${t.id}`)}\n                              onLogReport={() =>\n                                navigate(`/app/campaigns/${t.id}/reports/logs`)\n                              }\n                              onDelete={() => openDelete(t)}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"flex flex-col sm:flex-row justify-between items-center gap-3 px-6 py-4 text-sm text-slate-600 bg-slate-50/50 border-t border-slate-100\">\n              <div className=\"flex items-center gap-4\">\n                <span className=\"text-xs font-medium text-slate-700\">\n                  {view.length > 0 ? (\n                    <>\n                      Showing{' '}\n                      <span className=\"font-semibold text-emerald-700\">\n                        1-{view.length}\n                      </span>\n                      {' '}of{' '}\n                      <span className=\"font-semibold text-slate-900\">{view.length}</span>\n                      {' '}campaigns\n                    </>\n                  ) : (\n                    'No campaigns'\n                  )}\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <InspectorModal item={inspector} onClose={() => setInspector(null)} />\n\n        <DangerDeleteModal\n          key={deleteTarget?.id || 'closed'}\n          open={!!deleteTarget}\n          target={deleteTarget}\n          usage={usage}\n          loading={usageLoading}\n          deleting={deleting}\n          onCancel={cancelDelete}\n          onConfirm={confirmDelete}\n        />\n      </div>\n    </div>\n  );\n}\nexport default TemplateCampaignList;\n"],"names":["getButtonIcon","subtype","toLowerCase","_jsx","FaGlobe","className","FaPhone","FaReply","_ref","templateBody","parameters","buttonParams","imageUrl","imgError","setImgError","useState","formattedBody","getFormattedBody","text","forEach","val","idx","regex","RegExp","concat","replace","trim","useEffect","_jsxs","children","src","alt","onError","split","map","line","length","btn","subType","cx","_len","arguments","xs","Array","_key","filter","Boolean","join","TemplateCard","t","sending","deleting","onAssign","onViewRecipients","onSend","onPreview","onDelete","recipients","Number","statusRaw","status","toString","kind","templateType","type","isImage","includes","typeLabel","createdAt","created_on","createdOn","created","sentAt","lastSentAt","dispatchedAt","deliveredAt","scheduledAt","queuedFor","isSent","canAssign","canViewRecipients","canDelete","canSend","s","statusConfig","Sent","icon","FaCheckCircle","color","bg","border","Scheduled","FaClock","FaExclamationCircle","currentStatus","StatusIcon","name","FaRegImage","FaRegFileAlt","onClick","title","FaEye","undefined","disabled","FaTrash","FaCalendarAlt","Date","toLocaleDateString","FaPaperPlane","FaUserPlus","FaList","_Fragment","FaPlay","normalizeTemplate","raw","buttons","multiButtons","body","messageBody","sampleBody","messageTemplate","sent_at","sentOn","sent_on","scheduled_at","queued_for","sendStatus","state","id","caption","imageCaption","hasButtons","isArray","recipientCount","updatedAt","updated_at","clamp","value","min","max","Math","CampaignRowMoreMenu","hasRecipients","onViewLogs","onLogReport","buttonRef","useRef","Menu","as","_ref2","open","Button","ref","FaEllipsisV","CampaignRowMoreMenuItems","_ref3","itemsRef","position","setPosition","top","left","originClass","setOriginClass","positioned","setPositioned","updatePosition","useCallback","anchor","current","menu","anchorRect","getBoundingClientRect","menuRect","spaceBelow","window","innerHeight","bottom","spaceAbove","openUp","height","right","width","innerWidth","useLayoutEffect","raf1","requestAnimationFrame","raf2","cancelAnimationFrame","handler","addEventListener","removeEventListener","Portal","Transition","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","style","zIndex","visibility","Item","_ref4","active","_ref5","FaUsers","_ref6","FaHistory","_ref7","FaChartBar","_ref8","dayjs","relativeTime","TYPE_FILTERS","label","FaListUl","FaEdit","InspectorModal","_ref9","_ref0","_item$buttons","item","onClose","buttonsRaw","JSON","parse","_unused","mediaUrl","headerImageUrl","e","stopPropagation","WhatsAppBubblePreview","campaignId","DangerDeleteModal","_ref1","target","usage","loading","onCancel","onConfirm","confirmed","setConfirmed","React","typed","setTyped","queuedJobs","sendLogs","checked","onChange","placeholder","setRaw","setLoading","sendingId","setSendingId","deletingId","setDeletingId","q","setQ","onlyWithRecipients","setOnlyWithRecipients","sort","setSort","activeType","setActiveType","viewMode","setViewMode","inspector","setInspector","deleteTarget","setDeleteTarget","setUsage","usageLoading","setUsageLoading","setDeleting","setPagination","pageIndex","pageSize","total","navigate","useNavigate","loadCampaigns","async","silent","_res$data","_res$data2","res","axiosClient","get","items","data","totalCount","prev","_objectSpread","err","console","error","toast","some","c","interval","setInterval","clearInterval","handleSend","post","success","openDelete","useMemo","normalizeCampaign","view","list","needle","a","b","localeCompare","ax","getTime","FaSearch","f","Icon","isActive","FaThLarge","FaTable","FaSyncAlt","from","_","i","deletingThis","indexOf","toLocaleString","FaRegClock","fromNow","cancelDelete","_res$data3","delete","params","force","message","_err$response","_err$response$data","_err$response2","_err$response3","_err$response4","msg","response"],"sourceRoot":""}