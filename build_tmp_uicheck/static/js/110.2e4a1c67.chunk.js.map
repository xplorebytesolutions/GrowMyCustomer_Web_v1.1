{"version":3,"file":"static/js/110.2e4a1c67.chunk.js","mappings":"qMAqIA,QAhIA,WACE,MAAOA,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,IACnCC,GAAWC,EAAAA,EAAAA,MAEXC,EACJC,aAAaC,QAAQ,eACrB,uCACIC,EACJF,aAAaC,QAAQ,mBAAqB,eAoD5C,OAjDAE,EAAAA,EAAAA,YAAU,KACRC,EAAAA,QACGC,IAAI,uBAADC,OAAwBP,IAC3BQ,MAAKC,GAAOb,EAAYa,EAAIC,QAC5BC,OAAM,IAAMC,EAAAA,GAAMC,MAAM,mCAA6B,GACvD,CAACb,KA6CFc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4CAA2CC,SAAA,EACxDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAAC,kCAGpDC,EAAAA,EAAAA,KAAA,UACEC,QAASA,IAAMpB,EAAS,qBACxBiB,UAAU,yFAAwFC,SACnG,0BAKkB,IAApBrB,EAASwB,QACRF,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,qCAE7BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uDAAsDC,SAClErB,EAASyB,KAAIC,IACZP,EAAAA,EAAAA,MAAA,OAEEC,UAAU,mFAAkFC,SAAA,EAE5FC,EAAAA,EAAAA,KAAA,OACEK,IAAKD,EAAQE,SACbC,IAAKH,EAAQI,KACbV,UAAU,2CAEZE,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAChDK,EAAQI,QAEXR,EAAAA,EAAAA,KAAA,KAAGF,UAAU,wBAAuBC,SAAEK,EAAQK,eAC9CZ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,kCAAiCC,SAAA,CAAC,SAC3CK,EAAQM,MAAM,IAAEN,EAAQO,aAG5Bd,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,UACEC,QAASA,IA/EDW,WACtB,MAAMC,EAAkB,CACtB9B,aACA+B,UAAWV,EAAQW,GACnBC,OAAQ,eACRC,SAAU,cACVC,UAAW,aACXC,MAAO,SACPC,gBAAiB,MACjBC,eAAgBjB,EAAQI,KACxBc,WAAY,SACZC,aAAc,IAGhB,UACQnC,EAAAA,QAAYoC,KAAK,8BAA+BX,GACtDY,QAAQC,IAAI,qCACd,CAAE,MAAOC,GACPF,QAAQ7B,MAAM,gCAA4B+B,EAC5C,CAEA,MAAMC,EAAO,uBAAAtC,OAAWc,EAAQI,KAAI,OAAAlB,OAAMc,EAAQK,YAAW,gCAAAnB,OAAgBc,EAAQM,MAAK,KAAApB,OAAIc,EAAQO,UAChGkB,EAAUC,mBAAmBF,GAC7BG,EAAM,iBAAAzC,OAAoBJ,EAAc,UAAAI,OAASuC,GACvDG,OAAOC,KAAKF,EAAQ,SAAS,EAuDAG,CAAgB9B,GAC/BN,UAAU,4EAA2EC,SACtF,oCAIDC,EAAAA,EAAAA,KAAA,UACEC,QAASA,IACPpB,EAAS,qBAADS,OAAsBc,EAAQW,KAExCjB,UAAU,4EAA2EC,SACtF,uBAIDC,EAAAA,EAAAA,KAAA,UACEC,QAASA,IAnEJW,WACnB,GAAKoB,OAAOG,QAAQ,iDAGpB,UACQ/C,EAAAA,QAAYgD,OAAO,YAAD9C,OAAawB,IACrCnC,GAAY0D,GAAQA,EAAKC,QAAOC,GAAKA,EAAExB,KAAOD,MAC9CnB,EAAAA,GAAM6C,QAAQ,mDAChB,CAAE,MAAOb,GACPhC,EAAAA,GAAMC,MAAM,kCACd,GAyD6B6C,CAAarC,EAAQW,IACpCjB,UAAU,wEAAuEC,SAClF,mCApCEK,EAAQW,UA8C3B,C","sources":["pages/Businesses/ProductCatalog.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axiosClient from \"../../api/axiosClient\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction ProductCatalog() {\r\n  const [products, setProducts] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const businessId =\r\n    localStorage.getItem(\"businessId\") ||\r\n    \"11111111-1111-1111-1111-111111111111\";\r\n  const businessNumber =\r\n    localStorage.getItem(\"whatsappNumber\") || \"917082156227\";\r\n\r\n  // ğŸ”„ Fetch products\r\n  useEffect(() => {\r\n    axiosClient\r\n      .get(`/product?businessId=${businessId}`)\r\n      .then(res => setProducts(res.data))\r\n      .catch(() => toast.error(\"âŒ Error fetching products\"));\r\n  }, [businessId]);\r\n\r\n  // ğŸ“¤ Share on WhatsApp\r\n  const shareOnWhatsApp = async product => {\r\n    const trackingPayload = {\r\n      businessId,\r\n      productId: product.id,\r\n      userId: \"customer-001\", // dynamic later\r\n      userName: \"Amit Sharma\",\r\n      userPhone: \"9876543210\",\r\n      botId: \"bot-01\",\r\n      categoryBrowsed: \"Ads\",\r\n      productBrowsed: product.name,\r\n      ctaJourney: \"BuyNow\",\r\n      refMessageId: \"\",\r\n    };\r\n\r\n    try {\r\n      await axiosClient.post(\"/catalog-tracking/log-click\", trackingPayload);\r\n      console.log(\"âœ… Click tracked successfully.\");\r\n    } catch (err) {\r\n      console.error(\"âŒ Failed to track click:\", err);\r\n    }\r\n\r\n    const message = `ğŸ›ï¸ *${product.name}*\\n${product.description}\\nğŸ’° Price: â‚¹${product.price} ${product.currency}`;\r\n    const encoded = encodeURIComponent(message);\r\n    const waLink = `https://wa.me/${businessNumber}?text=${encoded}`;\r\n    window.open(waLink, \"_blank\");\r\n  };\r\n\r\n  // ğŸ—‘ï¸ Delete product\r\n  const handleDelete = async productId => {\r\n    if (!window.confirm(\"Are you sure you want to delete this product?\"))\r\n      return;\r\n\r\n    try {\r\n      await axiosClient.delete(`/product/${productId}`);\r\n      setProducts(prev => prev.filter(p => p.id !== productId));\r\n      toast.success(\"ğŸ—‘ï¸ Product deleted successfully!\");\r\n    } catch (err) {\r\n      toast.error(\"âŒ Failed to delete product\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-800\">\n          ğŸ›’ Product Catalog\r\n        </h2>\r\n        <button\r\n          onClick={() => navigate(\"/app/catalog/form\")}\n          className=\"bg-emerald-600 text-white px-4 py-2 rounded-xl hover:bg-emerald-700 transition text-sm\"\n        >\r\n          â• Add Product\r\n        </button>\r\n      </div>\r\n\r\n      {products.length === 0 ? (\r\n        <p className=\"text-gray-500\">ğŸš« No products found.</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\r\n          {products.map(product => (\r\n            <div\r\n              key={product.id}\r\n              className=\"bg-white rounded-xl shadow p-4 border border-gray-100 hover:shadow-md transition\"\r\n            >\r\n              <img\r\n                src={product.imageUrl}\r\n                alt={product.name}\r\n                className=\"h-40 w-full object-cover rounded mb-3\"\r\n              />\r\n              <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                {product.name}\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500\">{product.description}</p>\r\n              <p className=\"text-emerald-700 font-bold mt-2\">\n                â‚¹{product.price} {product.currency}\r\n              </p>\r\n\r\n              <div className=\"mt-4 flex flex-col gap-2\">\r\n                <button\r\n                  onClick={() => shareOnWhatsApp(product)}\r\n                  className=\"w-full bg-green-500 text-white py-2 rounded-xl hover:bg-green-600 text-sm\"\r\n                >\r\n                  ğŸ“¤ Share on WhatsApp\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() =>\r\n                    navigate(`/app/catalog/form/${product.id}`)\n                  }\n                  className=\"w-full bg-slate-700 text-white py-2 rounded-xl hover:bg-slate-800 text-sm\"\n                >\n                  âœï¸ Edit\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => handleDelete(product.id)}\r\n                  className=\"w-full bg-red-500 text-white py-2 rounded-xl hover:bg-red-600 text-sm\"\r\n                >\r\n                  ğŸ—‘ï¸ Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductCatalog;\r\n"],"names":["products","setProducts","useState","navigate","useNavigate","businessId","localStorage","getItem","businessNumber","useEffect","axiosClient","get","concat","then","res","data","catch","toast","error","_jsxs","className","children","_jsx","onClick","length","map","product","src","imageUrl","alt","name","description","price","currency","async","trackingPayload","productId","id","userId","userName","userPhone","botId","categoryBrowsed","productBrowsed","ctaJourney","refMessageId","post","console","log","err","message","encoded","encodeURIComponent","waLink","window","open","shareOnWhatsApp","confirm","delete","prev","filter","p","success","handleDelete"],"sourceRoot":""}