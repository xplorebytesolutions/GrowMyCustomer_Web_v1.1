/*! For license information please see 178.60229689.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkxbytechat_ui=self.webpackChunkxbytechat_ui||[]).push([[178],{65178:(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var l=t(89379),a=t(65043),i=t(73216),r=t(57488),n=t(46446),o=t(23546);const d=Object.freeze({MESSAGES_PER_MONTH:"MESSAGES_PER_MONTH",CAMPAIGNS_PER_DAY:"CAMPAIGNS_PER_DAY",TEMPLATES_TOTAL:"TEMPLATES_TOTAL",MESSAGES_PER_DAY:"MESSAGES_PER_DAY"}),c=[{key:d.MESSAGES_PER_MONTH,label:"Messages / month",defaultLimit:1e4,defaultPeriod:2},{key:d.CAMPAIGNS_PER_DAY,label:"Campaigns / day",defaultLimit:50,defaultPeriod:1},{key:d.TEMPLATES_TOTAL,label:"Templates total",defaultLimit:100,defaultPeriod:0},{key:d.MESSAGES_PER_DAY,label:"Messages / day",defaultLimit:500,defaultPeriod:1}];var m=t(42489);const x=(0,t(77784).A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var u=t(36210),h=t(81685),p=t(95258),b=t(71360),f=t(92382),v=t(56099),g=t(22024),j=t(76833),N=t(9855),w=t(37719),y=t(73782),A=t(78384),C=t(4596),S=t(39292),P=t(76245),k=t(17347),E=t(9671),M=(t(35870),t(70579));const T={0:"Lifetime",1:"Daily",2:"Monthly"},R=(c.reduce(((e,s)=>(e[s.key]=s.label,e)),{}),e=>{let{className:s}=e;return(0,M.jsx)("div",{className:"animate-pulse bg-slate-200 rounded ".concat(s)})}),_=[{label:"Free Tier",values:{MESSAGES_PER_MONTH:100,CRM_CONTACTS:100,CATALOG_ITEMS:10}},{label:"Business",values:{MESSAGES_PER_MONTH:1e4,CRM_CONTACTS:5e3,CATALOG_ITEMS:200}},{label:"Enterprise",values:{MESSAGES_PER_MONTH:1e5,CRM_CONTACTS:5e4,CATALOG_ITEMS:1e3}},{label:"Unlimited",values:{MESSAGES_PER_MONTH:-1,CRM_CONTACTS:-1,CATALOG_ITEMS:-1}}];function I(e){return-1===e?"\u221e":e>=1e6?"".concat((e/1e6).toFixed(1).replace(/\.0$/,""),"M"):e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,""),"k"):String(e)}function L(e){let{id:s,label:t,active:l,onClick:a}=e;return(0,M.jsxs)("button",{type:"button",onClick:()=>a(s),className:"relative px-2 py-2.5 text-sm font-semibold transition-all outline-none rounded-t-lg hover:bg-slate-50 ".concat(l?"text-emerald-600":"text-slate-500 hover:text-slate-700"),children:[(0,M.jsx)("span",{className:"relative z-10",children:t}),l&&(0,M.jsx)(n.P.div,{layoutId:"activeTabUnderline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-600 rounded-full",transition:{type:"spring",bounce:.2,duration:.6}})]})}function q(){const e=(0,i.Zp)(),[s,t]=(0,a.useState)([]),[d,q]=(0,a.useState)(!1),[F,O]=(0,a.useState)(null),[G,D]=(0,a.useState)("plan"),[H,K]=(0,a.useState)(!1),[U,z]=(0,a.useState)({id:null,name:"",code:"",description:"",isActive:!0}),[Q,Y]=(0,a.useState)(!1),[$,B]=(0,a.useState)(!1),[J,W]=(0,a.useState)([]),[X,Z]=(0,a.useState)(!1),[V,ee]=(0,a.useState)(!1),[se,te]=(0,a.useState)(new Set),[le,ae]=(0,a.useState)(""),[ie,re]=(0,a.useState)(new Set),[ne,oe]=(0,a.useState)([]),[de,ce]=(0,a.useState)(!1),[me,xe]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[pe,be]=(0,a.useState)({}),[fe,ve]=(0,a.useState)([]),[ge,je]=(0,a.useState)(!1),[Ne,we]=(0,a.useState)(""),[ye,Ae]=(0,a.useState)({}),Ce=(0,a.useCallback)((e=>{const s=s=>{const t=e.find((e=>{var t,l;return(null!==(l=null!==(t=e.quotaKey)&&void 0!==t?t:e.QuotaKey)&&void 0!==l?l:"").toString().trim().toUpperCase()===s}));if(!t)return null;const l="number"===typeof t.limit?t.limit:"number"===typeof t.Limit?t.Limit:void 0,a="number"===typeof t.period?t.period:"number"===typeof t.Period?t.Period:void 0;return void 0===l?null:{limit:l,period:a}};return{messagesPerMonth:s("MESSAGES_PER_MONTH"),campaignsPerDay:s("CAMPAIGNS_PER_DAY")}}),[]),Se=(0,a.useCallback)((async e=>{try{const s=await Promise.all(e.map((async e=>{try{var s;const t=await(0,k.Jy)(e.id),l=Array.isArray(t)?t:null!==(s=null===t||void 0===t?void 0:t.data)&&void 0!==s?s:[];return[e.id,Ce(l)]}catch(t){return console.error("Failed to prefetch quotas for plan",e.id,t),[e.id,null]}})));be((e=>{const t=(0,l.A)({},e);for(const[l,a]of s)a&&(t[l]=a);return t}))}catch(s){console.error("Prefetch quota summaries failed",s)}}),[Ce]);(0,a.useEffect)((()=>{Pe(),ke()}),[]);const Pe=(0,a.useCallback)((async()=>{q(!0);try{var e,s;const l=await(0,k.T9)(),a=(Array.isArray(null!==(e=null===l||void 0===l?void 0:l.data)&&void 0!==e?e:l)&&null!==(s=l.data)&&void 0!==s?s:l)||[];t(a),F&&F.id||!(a.length>0)||O(a[0]),Array.isArray(a)&&a.length>0&&Se(a)}catch(l){console.error(l),r.oR.error("Failed to load plans")}finally{q(!1)}}),[F,Se]),ke=(0,a.useCallback)((async()=>{try{var e,s,t,l,a;const i=await(0,E.$j)(),r=null!==(e=null!==(s=null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data)&&void 0!==s?s:null===i||void 0===i?void 0:i.data)&&void 0!==e?e:i,n=null!==(l=null!==(a=null===r||void 0===r?void 0:r.groups)&&void 0!==a?a:r)&&void 0!==l?l:[];W(n);const o=new Set(n.map((e=>{var s,t;return null!==(s=null!==(t=e.group)&&void 0!==t?t:e.Group)&&void 0!==s?s:"Other"})));re(o)}catch(i){console.error(i),r.oR.error("Failed to load permissions catalog")}}),[]),Ee=(0,a.useCallback)((async e=>{if(e){Z(!0);try{var s;const t=await(0,k.jD)(e),l=null!==(s=null===t||void 0===t?void 0:t.data)&&void 0!==s?s:t,a=new Set(l.map((e=>{var s;return null!==(s=e.id)&&void 0!==s?s:e.Id})));te(a)}catch(t){console.error(t),r.oR.error("Failed to load permissions for this plan")}finally{Z(!1)}}else te(new Set)}),[]),Me=(0,a.useCallback)((async e=>{if(void 0!==e&&null!==e){ce(!0);try{var s;const t=await(0,k.Jy)(e),a=(Array.isArray(t)?t:null!==(s=null===t||void 0===t?void 0:t.data)&&void 0!==s?s:[]).map((e=>{var s,t,l,a,i,r;return{id:null!==(s=e.id)&&void 0!==s?s:e.Id,planId:null!==(t=e.planId)&&void 0!==t?t:e.PlanId,quotaKey:(null!==(l=null!==(a=e.quotaKey)&&void 0!==a?a:e.QuotaKey)&&void 0!==l?l:"").toUpperCase(),limit:"number"===typeof e.limit?e.limit:"number"===typeof e.Limit?e.Limit:0,period:"number"===typeof e.period?e.period:"number"===typeof e.Period?e.Period:2,denialMessage:null!==(i=null!==(r=e.denialMessage)&&void 0!==r?r:e.DenialMessage)&&void 0!==i?i:""}}));oe(a),be((s=>(0,l.A)((0,l.A)({},s),{},{[e]:Ce(a)})))}catch(t){console.error(t),r.oR.error("Failed to load plan quotas"),oe([])}finally{ce(!1)}}else oe([])}),[Ce]);(0,a.useEffect)((()=>{null!=(null===F||void 0===F?void 0:F.id)?(Ee(F.id),Me(F.id)):(te(new Set),oe([]))}),[F,Ee,Me]),(0,a.useEffect)((()=>{"assignment"===G&&Te()}),[G]);const Te=async()=>{je(!0);try{var e;const s=await(0,k.C0)();ve(null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:[])}catch(s){console.error(s),r.oR.error("Failed to load businesses")}finally{je(!1)}},Re=()=>{K(!1),z({id:null,name:"",code:"",description:"",isActive:!0}),B(!0)},_e=()=>{B(!1)},Ie=(e,s)=>{z((t=>(0,l.A)((0,l.A)({},t),{},{[e]:s})))},Le=(J.map((e=>{var s,t,l,a;const i=null!==(s=null!==(t=e.group)&&void 0!==t?t:e.Group)&&void 0!==s?s:"Other",r=null!==(l=null!==(a=e.features)&&void 0!==a?a:e.Features)&&void 0!==l?l:[];if(!le.trim())return{name:i,features:r};const n=le.trim().toLowerCase();return{name:i,features:r.filter((e=>{var s,t,l;return"".concat(null!==(s=e.name)&&void 0!==s?s:""," ").concat(null!==(t=e.code)&&void 0!==t?t:""," ").concat(null!==(l=e.description)&&void 0!==l?l:"").toLowerCase().includes(n)}))}})),(e,s,t)=>{oe((a=>{const i=[...a],r=(0,l.A)({},i[e]);if("quotaKey"===s)r.quotaKey=t.toUpperCase();else if("limit"===s){const e=Number(t);r.limit=Number.isNaN(e)?0:e}else"period"===s?r.period=Number(t):"denialMessage"===s&&(r.denialMessage=t);return i[e]=r,i}))}),qe=()=>{null!==F&&void 0!==F&&F.id?oe((e=>[...e,{id:null,planId:F.id,quotaKey:"",limit:0,period:2,denialMessage:""}])):r.oR.warn("Select a plan first")},Fe=async()=>{if(null==(null===F||void 0===F?void 0:F.id))return void r.oR.warn("Select a plan first");const e=ne.filter((e=>{var s;return""!==(null!==(s=e.quotaKey)&&void 0!==s?s:"").trim()})).map((e=>{var s;const t={planId:F.id,quotaKey:e.quotaKey.trim().toUpperCase(),limit:e.limit,period:e.period,denialMessage:(null===(s=e.denialMessage)||void 0===s?void 0:s.trim())||null};return e.id&&(t.id=e.id),t}));if(0===e.length){if(!window.confirm("This will remove all quota rules for this plan. Continue?"))return}xe(!0);try{await(0,k.W9)(F.id,e),r.oR.success("Quotas saved for this plan"),await Me(F.id)}catch(s){console.error(s),r.oR.error("Failed to save plan quotas")}finally{xe(!1)}};return(0,M.jsxs)("div",{className:"relative flex flex-col h-full bg-slate-50/50 overflow-hidden",children:[(0,M.jsxs)("header",{className:"px-8 py-5 border-b border-slate-200/60 bg-white/50 backdrop-blur-sm flex items-center justify-between z-10",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-emerald-600 flex items-center justify-center text-white shadow-lg shadow-emerald-200",children:(0,M.jsx)(y.A,{className:"h-5 w-5"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h1",{className:"text-xl font-bold text-slate-900 tracking-tight leading-none",children:"Plan Management"}),(0,M.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Configure subscription tiers, entitlements, and resource quotas."})]})]}),(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsxs)(n.P.button,{whileHover:{y:-1},whileTap:{y:0},onClick:()=>e("/app/admin/permissions"),className:"px-4 py-2 rounded-xl border border-slate-200 bg-white text-xs font-semibold text-slate-600 hover:text-emerald-600 hover:border-emerald-100 hover:bg-emerald-50/30 transition-all flex items-center gap-2",children:[(0,M.jsx)(A.A,{className:"h-4 w-4"}),"Permissions Catalog"]}),(0,M.jsxs)(n.P.button,{whileHover:{y:-1},whileTap:{y:0},onClick:Re,className:"px-4 py-2 rounded-xl bg-emerald-600 text-xs font-semibold text-white shadow-lg shadow-emerald-100 hover:bg-emerald-700 transition-all flex items-center gap-2",children:[(0,M.jsx)(b.A,{className:"h-4 w-4"}),"Add Plan"]})]})]}),(0,M.jsxs)("main",{className:"flex-1 flex overflow-hidden",children:[(0,M.jsxs)("aside",{className:"w-80 border-r border-slate-200/60 bg-gradient-to-b from-white/40 to-slate-50/40 flex flex-col",children:[(0,M.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between border-b border-slate-200/40",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Available Plans"}),(0,M.jsx)("span",{className:"px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-md text-[10px] font-bold",children:s.length})]}),d&&(0,M.jsx)(g.A,{className:"h-3 w-3 animate-spin text-emerald-400"})]}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-2.5 custom-scrollbar",children:[s.map(((e,s)=>{const t=(null===F||void 0===F?void 0:F.id)===e.id,l=pe[e.id];fe.filter((s=>s.planId===e.id||s.PlanId===e.id)).length,(e=>{const s=e.toLowerCase();s.includes("enterprise")||s.includes("unlimited")||(s.includes("business")||s.includes("pro")||s.includes("premium"))})(e.name);return(0,M.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*s},className:"relative group",children:[(0,M.jsxs)(n.P.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>O(e),className:"w-full px-4 py-3.5 rounded-lg border transition-all text-left flex flex-col gap-2 relative overflow-hidden ".concat(t?"bg-emerald-50 border-emerald-200":"bg-white/40 border-slate-200/60 hover:bg-white hover:border-slate-300"),children:[t&&(0,M.jsx)(n.P.div,{layoutId:"sidebarActiveIndicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-emerald-600 rounded-r-full",transition:{type:"spring",bounce:.2,duration:.6}}),(0,M.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 pl-2",children:[(0,M.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:(0,M.jsx)("span",{className:"text-sm font-semibold truncate ".concat(t?"text-emerald-700":"text-slate-800"),children:e.name})}),t&&(0,M.jsx)("div",{className:"shrink-0",children:(0,M.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-600 animate-pulse"})})]}),(0,M.jsx)("div",{className:"flex items-center gap-2 flex-wrap pl-2",children:(null===l||void 0===l?void 0:l.messagesPerMonth)&&(0,M.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-50 rounded-lg border border-emerald-100",children:[(0,M.jsx)(v.A,{className:"h-3 w-3 text-emerald-500"}),(0,M.jsxs)("span",{className:"text-[10px] font-bold text-emerald-700",children:[I(l.messagesPerMonth.limit),"/mo"]})]})})]}),(0,M.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1 transition-all ".concat("opacity-0 group-hover:opacity-100"),children:[(0,M.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:s=>{s.stopPropagation(),(e=>{var s;K(!0),z({id:e.id,name:e.name,code:e.code,description:null!==(s=e.description)&&void 0!==s?s:"",isActive:e.isActive}),B(!0)})(e)},className:"p-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-400 hover:text-emerald-600 hover:border-emerald-200 shadow-sm transition-colors",title:"Edit Plan",children:(0,M.jsx)(C.A,{className:"h-3 w-3"})}),(0,M.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:s=>{s.stopPropagation(),(async e=>{if(window.confirm('Are you sure you want to delete plan "'.concat(e.name,'"? This will not delete businesses, only the plan definition.')))try{await(0,k.bR)(e.id),r.oR.success("Plan deleted"),await Pe(),(null===F||void 0===F?void 0:F.id)===e.id&&(O(null),te(new Set),oe([]))}catch(s){console.error(s),r.oR.error("Failed to delete plan")}})(e)},className:"p-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-400 hover:text-rose-600 hover:border-rose-200 shadow-sm transition-colors",title:"Delete Plan",children:(0,M.jsx)(N.A,{className:"h-3 w-3"})})]})]},e.id)})),!d&&0===s.length&&(0,M.jsxs)("div",{className:"py-12 px-4 text-center",children:[(0,M.jsx)("div",{className:"w-14 h-14 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,M.jsx)(p.A,{className:"h-7 w-7 text-slate-300"})}),(0,M.jsx)("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:"No plans configured"}),(0,M.jsx)("p",{className:"text-xs text-slate-400 leading-relaxed max-w-[200px] mx-auto",children:"Create your first subscription tier to begin managing entitlements"}),(0,M.jsxs)("button",{onClick:Re,className:"mt-4 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-semibold hover:bg-emerald-100 border border-emerald-200 transition-colors",children:[(0,M.jsx)(b.A,{className:"h-3 w-3 inline mr-1"}),"Create Plan"]})]})]})]}),(0,M.jsx)("section",{className:"flex-1 flex flex-col bg-white overflow-hidden relative",children:F?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"px-8 bg-white border-b border-slate-100 flex items-center justify-between pt-6 pb-0",children:[(0,M.jsxs)("div",{className:"flex items-center gap-8",children:[(0,M.jsx)(L,{id:"plan",label:"Plan Details",active:"plan"===G,onClick:D}),(0,M.jsx)(L,{id:"features",label:"Feature Map",active:"features"===G,onClick:D}),(0,M.jsx)(L,{id:"quotas",label:"Quota Limit",active:"quotas"===G,onClick:D}),(0,M.jsx)(L,{id:"assignment",label:"Plan Assignment",active:"assignment"===G,onClick:D})]}),"features"===G&&(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,M.jsxs)("div",{className:"relative w-64",children:[(0,M.jsx)(S.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400"}),(0,M.jsx)("input",{type:"text",placeholder:"Filter capabilities...",className:"w-full pl-9 pr-3 py-2 rounded-lg border border-slate-200 bg-slate-50/50 text-xs font-semibold focus:bg-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400",value:le,onChange:e=>ae(e.target.value)})]}),(0,M.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{if(null===F||void 0===F||!F.id)return void r.oR.warn("Select a plan first");const e=Array.from(se);ee(!0);try{await(0,k.$9)(F.id,{enabledPermissionIds:e,replaceAll:!0}),r.oR.success("Permissions updated for plan"),await Ee(F.id)}catch(s){console.error("Failed to update plan permissions",s),r.oR.error("Failed to update plan permissions")}finally{ee(!1)}},disabled:V||!F,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-xs font-semibold text-white hover:bg-emerald-700 shadow-sm shadow-emerald-100 transition-all disabled:opacity-50",children:[V?(0,M.jsx)(g.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,M.jsx)(j.A,{className:"h-3.5 w-3.5"}),"Save Map"]})]}),"assignment"===G&&(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,M.jsxs)("div",{className:"relative w-64",children:[(0,M.jsx)(S.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400"}),(0,M.jsx)("input",{type:"text",placeholder:"Search companies...",className:"w-full pl-9 pr-3 py-2 rounded-lg border border-slate-200 bg-slate-50/50 text-xs font-semibold focus:bg-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400",value:Ne,onChange:e=>we(e.target.value)})]}),(0,M.jsx)(n.P.button,{whileHover:{rotate:180},onClick:Te,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-400 hover:text-emerald-600 hover:border-emerald-100 transition-all shadow-sm",title:"Refresh list",children:(0,M.jsx)(h.A,{className:"h-4 w-4 ".concat(ge?"animate-spin":"")})})]})]}),(0,M.jsx)("div",{className:"flex-1 overflow-y-auto px-8 py-8 custom-scrollbar relative",children:(0,M.jsx)(o.N,{mode:"wait",children:(0,M.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full min-h-[400px]",children:["plan"===G&&(()=>{pe[F.id];const e=J.reduce(((e,s)=>{var t,l;return e+(null!==(t=null!==(l=s.features)&&void 0!==l?l:s.Features)&&void 0!==t?t:[]).length}),0),s=se.size,t=e>0?s/e*100:0;return(0,M.jsxs)("div",{className:"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-2 duration-400",children:[(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,M.jsxs)("div",{className:"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500",children:(0,M.jsx)(m.A,{className:"h-5 w-5"})}),(0,M.jsx)("h4",{className:"font-semibold text-slate-900 tracking-tight",children:"Plan Identity"})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[11px] font-semibold text-slate-500",children:"Name"}),(0,M.jsx)("span",{className:"text-sm font-medium text-slate-900",children:F.name})]}),(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[11px] font-semibold text-slate-500",children:"Code"}),(0,M.jsx)("span",{className:"text-xs font-mono font-semibold text-slate-600 bg-slate-100 px-2 py-0.5 rounded border border-slate-200",children:F.code})]}),(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[11px] font-semibold text-slate-500",children:"Status"}),(0,M.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold uppercase tracking-wide border ".concat(F.isActive?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-slate-50 text-slate-500 border-slate-100"),children:F.isActive?"Active":"Inactive"})]})]})]}),(0,M.jsxs)("div",{className:"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"font-semibold text-slate-900 tracking-tight mb-1",children:"Usage Limits"}),(0,M.jsx)("p",{className:"text-xs text-slate-500",children:ne.length>0?"".concat(ne.length," quota rules configured."):"No quotas configured yet."})]}),(0,M.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[(0,M.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,M.jsx)("span",{className:"text-3xl font-bold text-slate-900",children:ne.length}),(0,M.jsx)("span",{className:"text-xs font-medium text-slate-500",children:"total rules"})]}),(0,M.jsxs)("p",{className:"text-[10px] text-slate-400 mt-1",children:["Set limits in the ",(0,M.jsx)("b",{children:"Quotas & usage"})," tab."]})]})]}),(0,M.jsxs)("div",{className:"bg-white border border-slate-200/60 rounded-xl p-6 shadow-sm flex flex-col justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"font-semibold text-slate-900 tracking-tight mb-1",children:"Feature Coverage"}),(0,M.jsxs)("div",{className:"flex items-baseline gap-2 mt-2",children:[(0,M.jsx)("span",{className:"text-2xl font-bold text-emerald-600",children:s}),(0,M.jsxs)("span",{className:"text-xs font-medium text-slate-500",children:["of ",e," features"]})]})]}),(0,M.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,M.jsx)("div",{className:"w-full h-2.5 bg-slate-100 rounded-full overflow-hidden",children:(0,M.jsx)(n.P.div,{initial:{width:0},animate:{width:"".concat(t,"%")},className:"h-full bg-emerald-500"})}),(0,M.jsxs)("p",{className:"text-[10px] text-slate-400 text-right",children:[t.toFixed(0),"% coverage"]})]})]})]}),(0,M.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,M.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-widest pl-1",children:"Quota Breakdown For This Plan"}),0===ne.length?(0,M.jsxs)("div",{className:"bg-slate-50 rounded-xl border border-dashed border-slate-200 p-8 flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("div",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center mb-3",children:(0,M.jsx)(x,{className:"h-5 w-5 text-slate-400"})}),(0,M.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"No Quotas Defined"}),(0,M.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This plan has no specific usage limits."})]}):(0,M.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:ne.map(((e,s)=>(0,M.jsxs)("div",{className:"bg-white border border-slate-200/60 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,M.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,M.jsx)("div",{className:"p-2 rounded-lg bg-emerald-50 text-emerald-600",children:(0,M.jsx)(x,{className:"h-4 w-4"})}),(0,M.jsx)("span",{className:"text-xl font-bold text-slate-900",children:I(e.limit)})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wide truncate",title:e.quotaKey,children:e.quotaKey}),(0,M.jsx)("p",{className:"text-xs font-medium text-slate-600 capitalize mt-0.5",children:T[e.period]})]})]},s)))})]})]})})(),"features"===G&&(()=>{const e=J.map((e=>{var s,t;const a=(null!==(s=null!==(t=e.features)&&void 0!==t?t:e.Features)&&void 0!==s?s:[]).filter((e=>{var s,t;const l=le.toLowerCase();return(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(l))}))||[];return(0,l.A)((0,l.A)({},e),{},{features:a})})).filter((e=>e.features.length>0));return(0,M.jsx)("div",{className:"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400",children:(0,M.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-8 pt-4",children:e.map((e=>{var s;const{name:t,features:l}=e,a=null!==(s=e.group)&&void 0!==s?s:e.Group,i=l.map((e=>{var s;return null!==(s=e.id)&&void 0!==s?s:e.Id})).filter((e=>void 0!==e&&null!==e)),r=i.filter((e=>se.has(e))).length,o=r===i.length;return(0,M.jsxs)("div",{className:"group/section",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-1.5 h-6 bg-emerald-500 rounded-full"}),(0,M.jsxs)("div",{children:[a&&(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,M.jsx)("span",{className:"text-xs font-semibold text-slate-500",children:a}),(0,M.jsxs)("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-100 rounded-md text-[10px] font-semibold shadow-sm",children:[r,"/",i.length," Active"]})]}),(0,M.jsx)("h5",{className:"text-sm font-bold text-slate-900",children:t})]})]}),(0,M.jsx)("button",{type:"button",onClick:()=>((e,s)=>{const t=e.map((e=>{var s;return null!==(s=e.id)&&void 0!==s?s:e.Id})).filter((e=>void 0!==e&&null!==e));te((e=>{const l=new Set(e);return s?t.forEach((e=>l.add(e))):t.forEach((e=>l.delete(e))),l}))})(l,!o),className:"text-[10px] font-semibold text-emerald-600 hover:text-emerald-800 transition-colors",children:o?"Remove All":"Select All"})]}),(0,M.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:l.map((e=>{var s,t;const l=se.has(null!==(s=e.id)&&void 0!==s?s:e.Id);return(0,M.jsxs)(n.P.div,{layout:!0,onClick:()=>{var s,t,a;return t=null!==(s=e.id)&&void 0!==s?s:e.Id,a=!l,void(t&&te((e=>{const s=new Set(e);return a?s.add(t):s.delete(t),s})))},className:"p-4 rounded-lg border transition-all flex items-start gap-4 cursor-pointer select-none group/item ".concat(l?"bg-emerald-600 border-emerald-600 shadow-lg shadow-emerald-600/20":"bg-slate-50 border-slate-200 hover:border-emerald-200 hover:bg-white"),children:[(0,M.jsx)("div",{className:"mt-0.5 h-8 w-8 rounded-lg border flex items-center justify-center transition-all shrink-0 ".concat(l?"bg-emerald-500/30 border-emerald-400/50 text-white":"bg-white border-slate-300 group-hover/item:border-emerald-300 text-slate-300"),children:l&&(0,M.jsx)(u.A,{className:"h-4 w-4 stroke-[3]"})}),(0,M.jsxs)("div",{className:"min-w-0 pt-0.5",children:[(0,M.jsx)("p",{className:"text-sm font-semibold truncate ".concat(l?"text-white":"text-slate-700"),children:e.name}),(0,M.jsx)("p",{className:"text-[10px] mt-0.5 line-clamp-1 font-medium ".concat(l?"text-emerald-100/80":"text-slate-300"),children:e.description||"Description not available"})]})]},null!==(t=e.id)&&void 0!==t?t:e.Id)}))})]},t)}))})})})(),"quotas"===G&&(0,M.jsx)("div",{className:"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400",children:(0,M.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col pt-2",children:de?(0,M.jsxs)("div",{className:"flex-1 p-6 space-y-4",children:[(0,M.jsx)(R,{className:"h-16 w-full rounded-2xl"}),(0,M.jsx)(R,{className:"h-16 w-full rounded-2xl"}),(0,M.jsx)(R,{className:"h-16 w-full rounded-2xl"})]}):0===ne.length?(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-20 bg-slate-50/20 rounded-3xl border border-dashed border-slate-200",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-white rounded-3xl border border-slate-100 flex items-center justify-center shadow-sm mb-6",children:(0,M.jsx)(h.A,{className:"h-8 w-8 text-slate-200"})}),(0,M.jsx)("h4",{className:"text-sm font-semibold text-slate-900",children:"No defined resource limits"}),(0,M.jsx)("p",{className:"text-xs text-slate-500 mt-2 mb-6",children:"System defaults will apply until a specific plan override is configured."}),(0,M.jsx)("button",{onClick:qe,className:"px-6 py-2 bg-white rounded-xl border border-slate-200 text-xs font-semibold text-emerald-600 hover:bg-emerald-50 hover:border-emerald-200 transition-all",children:"Create First Limit"})]}):(0,M.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-white border border-slate-200/60 rounded-3xl shadow-sm overflow-hidden",children:[(0,M.jsxs)("div",{className:"px-8 py-5 border-b border-slate-100 bg-slate-50/30 flex items-center justify-between gap-4",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600",children:(0,M.jsx)(p.A,{className:"h-4 w-4"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-sm font-semibold text-slate-900 leading-none",children:"Limit Configuration Table"}),(0,M.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 font-medium",children:"Define quantity and time window for specific plan features."})]})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsxs)("div",{className:"relative inline-flex rounded-xl shadow-sm",children:[(0,M.jsxs)(n.P.button,{whileHover:{backgroundColor:"#F8FAFC"},whileTap:{backgroundColor:"#F1F5F9"},type:"button",onClick:qe,disabled:!F,className:"relative z-10 inline-flex items-center gap-2 rounded-l-xl bg-white border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all disabled:opacity-50",children:[(0,M.jsx)(b.A,{className:"h-3.5 w-3.5"}),"Add Limit"]}),(0,M.jsx)("button",{type:"button",disabled:!F,onClick:()=>he(!ue),className:"relative z-0 -ml-px inline-flex items-center rounded-r-xl border border-slate-200 bg-slate-50 px-2 py-2 text-sm font-medium text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:z-10 focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 transition-all disabled:opacity-50",children:(0,M.jsx)(f.A,{className:"h-3.5 w-3.5 transition-transform ".concat(ue?"rotate-180":"")})}),(0,M.jsx)(o.N,{children:ue&&(0,M.jsx)(n.P.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute right-0 top-full mt-2 w-48 origin-top-right rounded-xl bg-white shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden",children:(0,M.jsxs)("div",{className:"p-1",children:[(0,M.jsx)("div",{className:"px-3 py-2 text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-1",children:"Use Preset"}),_.map((e=>(0,M.jsxs)("button",{onClick:()=>{var s;s=e.values,null!==F&&void 0!==F&&F.id?(oe((e=>{const t=[...e];return Object.entries(s).forEach((e=>{let[s,a]=e;const i=s.toUpperCase(),r=t.findIndex((e=>{var s;return(null!==(s=e.quotaKey)&&void 0!==s?s:"").toUpperCase()===i}));r>=0?t[r]=(0,l.A)((0,l.A)({},t[r]),{},{limit:a}):t.push({id:null,planId:F.id,quotaKey:i,limit:a,period:i.includes("MONTH")?2:i.includes("DAY")?1:0,denialMessage:""})})),t})),r.oR.info("Preset values applied. Review and Save.")):r.oR.warn("Select a plan first"),he(!1)},className:"flex w-full items-center rounded-lg px-3 py-2 text-xs text-slate-700 hover:bg-emerald-50 hover:text-emerald-700 transition-colors",children:[(0,M.jsx)(v.A,{className:"mr-2 h-3.5 w-3.5 text-slate-400"}),e.label]},e.label)))]})})})]}),(0,M.jsxs)(n.P.button,{whileHover:{y:-1},whileTap:{y:0},type:"button",onClick:Fe,disabled:me||!F,className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold text-white hover:bg-emerald-600 shadow-md shadow-emerald-50 transition-all disabled:opacity-50",children:[me?(0,M.jsx)(g.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,M.jsx)(j.A,{className:"h-3.5 w-3.5"}),"Save"]})]})]}),(0,M.jsx)("div",{className:"flex-1 overflow-y-auto px-8 py-6 custom-scrollbar",children:(0,M.jsxs)("table",{className:"w-full border-separate border-spacing-y-2 -mt-2",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{className:"text-[11px] font-semibold text-slate-400 uppercase tracking-widest",children:[(0,M.jsx)("th",{className:"px-4 py-2 text-left w-[30%]",children:"Capability Key"}),(0,M.jsx)("th",{className:"px-4 py-2 text-left w-[20%]",children:"Time Window"}),(0,M.jsx)("th",{className:"px-4 py-2 text-left w-[15%]",children:"Max Units"}),(0,M.jsx)("th",{className:"px-4 py-2 text-left",children:"UX Context"}),(0,M.jsx)("th",{className:"px-4 py-2 text-right",children:"Action"})]})}),(0,M.jsx)("tbody",{children:ne.map(((e,s)=>{var t;const l=!e.id&&!e.Id;return(0,M.jsxs)(n.P.tr,{initial:!!l&&{opacity:0,x:-10},animate:{opacity:1,x:0},className:"group",children:[(0,M.jsx)("td",{className:"px-3 py-1.5 bg-white border-y border-l border-slate-100 rounded-l-xl group-hover:bg-slate-50/50 transition-colors",children:(0,M.jsxs)("select",{className:"w-full rounded-xl border border-slate-200/60 bg-white/70 px-3 py-2.5 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all",value:e.quotaKey,onChange:e=>Le(s,"quotaKey",e.target.value),children:[(0,M.jsx)("option",{value:"",disabled:!0,children:"Feature Key"}),c.map((e=>(0,M.jsx)("option",{value:e.key,children:e.label},e.key)))]})}),(0,M.jsx)("td",{className:"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors",children:(0,M.jsx)("select",{className:"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all",value:e.period,onChange:e=>Le(s,"period",parseInt(e.target.value,10)),children:Object.entries(T).map((e=>{let[s,t]=e;return(0,M.jsx)("option",{value:s,children:t},s)}))})}),(0,M.jsx)("td",{className:"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors",children:(0,M.jsx)("input",{type:"number",className:"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-semibold text-emerald-600 focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all",value:e.limit,onChange:e=>Le(s,"limit",parseInt(e.target.value,10)),placeholder:"-1 for \u221e"})}),(0,M.jsx)("td",{className:"px-3 py-1.5 bg-white border-y border-slate-100 group-hover:bg-slate-50/50 transition-colors",children:(0,M.jsx)("input",{type:"text",className:"w-full rounded-lg border border-slate-200/60 bg-white/70 px-3 py-2 text-xs font-medium focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all",placeholder:"User-facing denial text...",value:null!==(t=e.denialMessage)&&void 0!==t?t:"",onChange:e=>Le(s,"denialMessage",e.target.value)})}),(0,M.jsx)("td",{className:"px-3 py-1.5 bg-white border-y border-r border-slate-100 rounded-r-xl group-hover:bg-slate-50/50 transition-colors text-right",children:(0,M.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>{return e=s,oe((s=>s.filter(((s,t)=>t!==e)))),void r.oR.success("Quota rule removed. Click \u201cSave quotas\u201d to apply changes.");var e},className:"p-2.5 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all",children:(0,M.jsx)(N.A,{className:"h-4 w-4"})})})]},s)}))})]})}),(0,M.jsxs)("div",{className:"px-8 py-4 bg-amber-50/50 border-t border-amber-100 flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center text-amber-600",children:(0,M.jsx)(w.A,{className:"h-4 w-4"})}),(0,M.jsx)("p",{className:"text-[10px] text-amber-800 font-bold leading-relaxed max-w-2xl",children:"CAUTION: Quotas are enforced in real-time by the Message Engine. Incorrectly low limits can block production traffic. Use presets for safe starting points."})]})]})})}),"assignment"===G&&(()=>{const e=fe.filter((e=>{var s,t;const l=Ne.toLowerCase().trim();return(null===(s=e.companyName)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(t=e.businessEmail)||void 0===t?void 0:t.toLowerCase().includes(l))}));return(0,M.jsx)("div",{className:"flex flex-col gap-6 h-full overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-400",children:(0,M.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col bg-white border border-slate-200/60 rounded-lg shadow-sm",children:(0,M.jsx)("div",{className:"overflow-x-auto custom-scrollbar",children:(0,M.jsxs)("table",{className:"w-full",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{className:"bg-slate-100 border-b border-slate-200 text-[11px] font-semibold text-slate-600 text-left",children:[(0,M.jsx)("th",{className:"px-6 py-3",children:"Organization Profile"}),(0,M.jsx)("th",{className:"px-6 py-3",children:"Current Entitlement"}),(0,M.jsx)("th",{className:"px-6 py-3 text-right",children:"Assignment Action"})]})}),(0,M.jsx)("tbody",{className:"divide-y divide-slate-50",children:ge?Array.from({length:5}).map(((e,s)=>(0,M.jsxs)("tr",{children:[(0,M.jsxs)("td",{className:"px-6 py-3",children:[(0,M.jsx)(R,{className:"h-4 w-40 mb-2"}),(0,M.jsx)(R,{className:"h-3 w-60"})]}),(0,M.jsx)("td",{className:"px-6 py-3",children:(0,M.jsx)(R,{className:"h-7 w-24 rounded-xl"})}),(0,M.jsx)("td",{className:"px-6 py-3 text-right",children:(0,M.jsx)(R,{className:"h-10 w-40 rounded-xl ml-auto"})})]},s))):0===e.length?(0,M.jsx)("tr",{children:(0,M.jsx)("td",{colSpan:3,className:"px-6 py-20 text-center",children:(0,M.jsxs)("div",{className:"flex flex-col items-center gap-4 text-slate-400",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-slate-50 rounded-3xl flex items-center justify-center",children:(0,M.jsx)(p.A,{className:"h-8 w-8 text-slate-200"})}),(0,M.jsx)("p",{className:"text-sm font-semibold text-slate-500",children:"No organizations match your query."}),(0,M.jsx)("p",{className:"text-xs",children:"Try searching for a different company name or administrative email."})]})})}):e.map(((e,t)=>(0,M.jsxs)(n.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.02*t},className:"hover:bg-slate-50/30 transition-colors group",children:[(0,M.jsx)("td",{className:"px-6 py-3",children:(0,M.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,M.jsx)("span",{className:"font-semibold text-slate-900 truncate",children:e.companyName}),(0,M.jsx)("span",{className:"text-[11px] text-slate-400 font-medium truncate",children:e.businessEmail})]})}),(0,M.jsx)("td",{className:"px-6 py-3",children:(0,M.jsx)("div",{className:"flex items-center gap-2",children:(0,M.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold bg-emerald-50 text-emerald-700 border border-emerald-200/60 shadow-sm",children:e.planName||"No Plan"})})}),(0,M.jsx)("td",{className:"px-6 py-3 text-right",children:(0,M.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsxs)("select",{className:"appearance-none rounded-md border border-slate-200/60 bg-white px-5 py-2.5 pr-10 text-xs font-semibold focus:ring-4 focus:ring-emerald-500/5 focus:border-emerald-500 outline-none transition-all cursor-pointer hover:border-emerald-400 shadow-sm",value:e.planId||"",onChange:s=>(async(e,s)=>{if(s){Ae((s=>(0,l.A)((0,l.A)({},s),{},{[e]:!0})));try{await(0,k.QX)(e,s),r.oR.success("Plan assigned successfully"),Te()}catch(i){var t,a;console.error(i),r.oR.error((null===i||void 0===i||null===(t=i.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to assign plan")}finally{Ae((s=>(0,l.A)((0,l.A)({},s),{},{[e]:!1})))}}})(e.id,s.target.value),disabled:ye[e.id],children:[(0,M.jsx)("option",{value:"",disabled:!0,children:"Change Status..."}),s.map((e=>(0,M.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,M.jsx)(f.A,{className:"absolute right-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),ye[e.id]&&(0,M.jsx)(g.A,{className:"h-4 w-4 animate-spin text-emerald-500"})]})})]},e.id)))})]})})})})})()]},"".concat(F.id,"-").concat(G))})})]}):(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-10 text-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 rounded-3xl bg-slate-50 flex items-center justify-center mb-6",children:(0,M.jsx)(v.A,{className:"h-8 w-8 text-slate-200"})}),(0,M.jsx)("h3",{className:"text-lg font-semibold text-slate-800",children:"Ready to manage?"}),(0,M.jsx)("p",{className:"text-sm text-slate-500 max-w-xs mt-2",children:"Select a subscription plan from the sidebar to view its profile, permissions, and system limits."})]})})]}),$&&(0,M.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,M.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-slate-900/50 backdrop-blur-md",onClick:_e}),(0,M.jsxs)(n.P.div,{initial:{opacity:0,scale:.96,y:20},animate:{opacity:1,scale:1,y:0},transition:{type:"spring",bounce:.3},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg border border-slate-200/60 overflow-hidden relative z-10",children:[(0,M.jsx)("div",{className:"px-6 pt-6 pb-4 border-b border-slate-100/80 bg-gradient-to-b from-slate-50/50 to-white",children:(0,M.jsxs)("div",{className:"flex items-start justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-11 h-11 rounded-xl bg-emerald-500 flex items-center justify-center text-white shadow-lg shadow-emerald-200",children:H?(0,M.jsx)(C.A,{className:"h-5 w-5"}):(0,M.jsx)(b.A,{className:"h-5 w-5"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-lg font-semibold text-slate-900 tracking-tight",children:H?"Modify Plan":"Create New Plan"}),(0,M.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:"Configure subscription properties"})]})]}),(0,M.jsx)("button",{type:"button",onClick:_e,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-700 hover:bg-slate-100 transition-all",children:(0,M.jsx)(P.A,{className:"h-4 w-4"})})]})}),(0,M.jsxs)("form",{onSubmit:async e=>{var s,t;if(e.preventDefault(),null!==(s=U.name)&&void 0!==s&&s.trim()&&null!==(t=U.code)&&void 0!==t&&t.trim()){Y(!0);try{if(H&&U.id){var l,a;await(0,k.td)(U.id,{name:U.name.trim(),code:U.code.trim(),description:null!==(l=null===(a=U.description)||void 0===a?void 0:a.trim())&&void 0!==l?l:"",isActive:U.isActive}),r.oR.success("Plan updated")}else{var i,n,o,d;const e=await(0,k.qT)({name:U.name.trim(),code:U.code.trim(),description:null!==(i=null===(n=U.description)||void 0===n?void 0:n.trim())&&void 0!==i?i:"",isActive:U.isActive}),s=null!==(o=null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.id)&&void 0!==o?o:null===e||void 0===e?void 0:e.id;if(r.oR.success("Plan created"),s){var c,m;const e={id:s,name:U.name.trim(),code:U.code.trim(),description:null!==(c=null===(m=U.description)||void 0===m?void 0:m.trim())&&void 0!==c?c:"",isActive:U.isActive};O(e)}}await Pe(),B(!1)}catch(x){console.error(x),r.oR.error("Failed to save plan")}finally{Y(!1)}}else r.oR.warn("Code and Name are required")},className:"px-6 py-5 flex flex-col gap-5",children:[(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Display Name"}),(0,M.jsx)("input",{type:"text",required:!0,placeholder:"e.g. Enterprise Plus",className:"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-semibold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400 placeholder:font-normal",value:U.name,onChange:e=>Ie("name",e.target.value)})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"System Code"}),(0,M.jsx)("input",{type:"text",required:!0,placeholder:"E_PLUS_24",className:"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-semibold uppercase tracking-widest focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all placeholder:text-slate-400 placeholder:font-normal placeholder:normal-case",value:U.code,onChange:e=>Ie("code",e.target.value.toUpperCase())})]})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)("label",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Scope Description"}),(0,M.jsx)("textarea",{rows:3,placeholder:"Summarize the value proposition...",className:"w-full rounded-lg border-2 border-slate-200 bg-white px-3 py-2 text-sm font-medium leading-relaxed focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/10 outline-none transition-all resize-none placeholder:text-slate-400",value:U.description,onChange:e=>Ie("description",e.target.value)})]}),(0,M.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200/60",children:[(0,M.jsx)("div",{className:"w-10 h-6 rounded-full relative transition-all cursor-pointer ".concat(U.isActive?"bg-emerald-500":"bg-slate-300"),onClick:()=>Ie("isActive",!U.isActive),children:(0,M.jsx)(n.P.div,{animate:{x:U.isActive?16:2},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 left-0 w-4 h-4 bg-white rounded-full shadow-md"})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("span",{className:"text-xs font-semibold text-slate-900 block",children:"Make plan active"}),(0,M.jsx)("span",{className:"text-[10px] text-slate-500",children:"Available for assignment"})]})]}),(0,M.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-3 border-t border-slate-100",children:[(0,M.jsx)("button",{type:"button",onClick:_e,className:"px-4 py-2 rounded-lg border-2 border-slate-200 text-xs font-semibold text-slate-600 hover:bg-slate-50 hover:border-slate-300 transition-all",children:"Discard"}),(0,M.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:Q,className:"px-6 py-2 rounded-lg bg-emerald-600 text-xs font-semibold text-white shadow-lg shadow-emerald-200 hover:bg-emerald-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:[Q?(0,M.jsx)(g.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,M.jsx)(j.A,{className:"h-3.5 w-3.5"}),H?"Save Changes":"Create Plan"]})]})]})]})]})]})}}}]);
//# sourceMappingURL=178.60229689.chunk.js.map