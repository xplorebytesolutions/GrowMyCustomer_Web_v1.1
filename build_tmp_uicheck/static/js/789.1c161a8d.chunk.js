/*! For license information please see 789.1c161a8d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkxbytechat_ui=self.webpackChunkxbytechat_ui||[]).push([[789],{91789:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var r=t(89379),o=t(68899);const s=(0,t(77784).A)("message-circle-heart",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]]);var n=t(8145),i=t(67588),l=t(37719),d=t(75686),c=t(81007),m=t(63961),p=t(5244),u=t(73216),g=t(65043),h=t(8927),x=t(65086),f=t(74961),b=t(63610),y=t(70579);const w={"create-template-flow":[f.FK.AUTOMATION_CREATE_TEMPLATE_FLOW],"create-auto-reply-bot":[f.FK.AUTOMATION_CREATE_BOT],"flow-manager":[f.FK.AUTOMATION_VIEW_FLOW_MANAGE],"flow-analytics":[f.FK.AUTOMATION_VIEW_FLOW_ANALYTICS]},v=[{id:"create-template-flow",label:"Create Template Flow",description:"Visually design the flow using a drag-and-drop builder.",path:"/app/cta-flow/visual-builder",icon:(0,y.jsx)(o.A,{size:22}),action:"Create Template Flow"},{id:"create-auto-reply-bot",label:"Create Auto Reply Bot",description:"Design an automated bot to reply to specific keywords, triggers or contacts.",path:"/app/automation/auto-reply-builder",icon:(0,y.jsx)(s,{size:22}),action:"Create Bot"},{id:"flow-manager",label:"Flow Manager",description:"Organize and manage all auto-reply flows.",path:"/app/cta-flow/flow-manager",icon:(0,y.jsx)(n.A,{size:22}),action:"Flow Manager"},{id:"flow-analytics",label:"Flow Analytics",description:"Analyze visual flows and CTA button performance.",path:"/app/campaigns/FlowAnalyticsDashboard",icon:(0,y.jsx)(i.A,{size:22}),action:"Open Dashboard"}];function A(){const e=(0,u.Zp)(),a=(0,u.zy)(),{isLoading:t,can:o,hasAllAccess:s,entLoading:n}=(0,x.h)(),i="1"===new URLSearchParams(a.search||"").get("flyout"),[f,A]=(0,g.useState)(JSON.parse(localStorage.getItem("automation-pinned")||"[]")),[j,N]=(0,g.useState)(JSON.parse(localStorage.getItem("automation-archived")||"[]")),k=(0,g.useMemo)((()=>v.map((e=>e.id))),[]),C=JSON.parse(localStorage.getItem("automation-order")||"null")||[],O=(0,g.useMemo)((()=>{if(!Array.isArray(C)||0===C.length)return k;const e=C.filter((e=>k.includes(e))),a=k.filter((a=>!e.includes(a)));return[...e,...a]}),[k]),[S,T]=(0,g.useState)(O),[F,D]=(0,g.useState)(!1),I=S.map((e=>v.find((a=>a.id===e)))).filter(Boolean).filter((e=>!!F||!j.includes(e.id))).map((e=>{const a=w[e.id]||[],t=s||Array.isArray(a)&&a.some((e=>o(e)));return(0,r.A)((0,r.A)({},e),{},{allowed:t,primaryCode:a[0]||null})})),z=I.length>0,L=I.some((e=>e.allowed));return t||n?(0,y.jsx)("div",{className:"p-10 text-center text-lg text-gray-500",children:"Loading automation features\u2026"}):i?(0,y.jsx)("div",{className:"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]","data-test-id":"automation-root"}):(0,y.jsxs)("div",{className:"p-6 bg-[#f5f6f7] min-h-[calc(100vh-80px)]","data-test-id":"automation-root",children:[(0,y.jsx)("style",{children:"\n        @keyframes drawRight { from { transform: scaleX(0) } to { transform: scaleX(1) } }\n        @keyframes drawDown  { from { transform: scaleY(0) } to { transform: scaleY(1) } }\n        @keyframes drawLeft  { from { transform: scaleX(0) } to { transform: scaleX(1) } }\n        @keyframes drawUp    { from { transform: scaleY(0) } to { transform: scaleY(1) } }\n\n        .tile:hover .topline    { animation: drawRight .9s ease forwards; }\n        .tile:hover .rightline  { animation: drawDown  .9s ease .18s forwards; }\n        .tile:hover .bottomline { animation: drawLeft  .9s ease .36s forwards; }\n        .tile:hover .leftline   { animation: drawUp    .9s ease .54s forwards; }\n      "}),(0,y.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,y.jsx)("h2",{className:"text-2xl font-bold text-emerald-800",children:"\ud83e\udd16 Automation Workspace"}),(0,y.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,y.jsx)("input",{type:"checkbox",checked:F,onChange:()=>D(!F),className:"accent-emerald-600"}),"Show Archived"]})]}),(0,y.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Build template flows, auto-reply bots, manage automations, and analyze performance of your WhatsApp journeys."}),z&&!L&&(0,y.jsxs)("div",{className:"bg-amber-50 text-amber-800 p-4 border-l-4 border-amber-500 rounded-md mb-6 shadow-sm flex items-start gap-3",children:[(0,y.jsx)(l.A,{size:22,className:"mt-1"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Locked automation tools:"})," Your current plan doesn't include these automation features.",(0,y.jsx)("div",{className:"text-sm mt-1 text-gray-600",children:"Try opening a tile to see upgrade options, or contact your administrator."})]})]}),z&&(0,y.jsx)(h.JY,{onDragEnd:e=>{if(!e.destination)return;const a=Array.from(S),[t]=a.splice(e.source.index,1);a.splice(e.destination.index,0,t),T(a),localStorage.setItem("automation-order",JSON.stringify(a))},children:(0,y.jsx)(h.gL,{droppableId:"automation-blocks",direction:"horizontal",children:a=>(0,y.jsxs)("div",(0,r.A)((0,r.A)({className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",ref:a.innerRef},a.droppableProps),{},{children:[I.map(((a,t)=>{const o="tile group relative overflow-hidden rounded-md border bg-white shadow-sm transition duration-200 hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-emerald-300 cursor-pointer",s=a.allowed?o:"".concat(o," ").concat("opacity-70 border-dashed cursor-not-allowed hover:-translate-y-0 hover:shadow-sm"),n=()=>{a.allowed?e(a.path):a.primaryCode&&(0,b.Y)({reason:"feature",code:a.primaryCode,source:"automation.workspace.tile"})},i=t=>{t.stopPropagation(),a.allowed?e(a.path):a.primaryCode&&(0,b.Y)({reason:"feature",code:a.primaryCode,source:"automation.workspace.action"})};return(0,y.jsx)(h.sx,{draggableId:a.id,index:t,children:e=>(0,y.jsxs)("div",(0,r.A)((0,r.A)({ref:e.innerRef},e.draggableProps),{},{role:"button",tabIndex:0,"aria-label":"".concat(a.label,": ").concat(a.action),onKeyDown:e=>{"Enter"===e.key&&n()},onClick:n,className:s,style:{userSelect:"none"},children:[!a.allowed&&(0,y.jsx)("span",{className:"pointer-events-none absolute top-3 right-3 inline-flex items-center gap-1 rounded-full border border-dashed border-amber-500 bg-amber-50 px-2 py-0.5 text-[11px] font-semibold text-amber-700",children:"\ud83d\udd12 Upgrade"}),(0,y.jsx)("span",{"aria-hidden":!0,className:"topline pointer-events-none absolute left-0 -top-[2px] h-[2px] w-full origin-left rounded opacity-0 group-hover:opacity-100",style:{background:"linear-gradient(90deg, #A7F3D0, #34D399, #059669)",transform:"scaleX(0)"}}),(0,y.jsx)("span",{"aria-hidden":!0,className:"rightline pointer-events-none absolute right-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-top rounded opacity-0 group-hover:opacity-100",style:{background:"linear-gradient(180deg, #A7F3D0, #34D399, #059669)",transform:"scaleY(0)"}}),(0,y.jsx)("span",{"aria-hidden":!0,className:"bottomline pointer-events-none absolute left-0 -bottom-[2px] h-[2px] w-full origin-right rounded opacity-0 group-hover:opacity-100",style:{background:"linear-gradient(270deg, #A7F3D0, #34D399, #059669)",transform:"scaleX(0)"}}),(0,y.jsx)("span",{"aria-hidden":!0,className:"leftline pointer-events-none absolute left-0 -top-[2px] h-[calc(100%+4px)] w-[2px] origin-bottom rounded opacity-0 group-hover:opacity-100",style:{background:"linear-gradient(0deg, #A7F3D0, #34D399, #059669)",transform:"scaleY(0)"}}),(0,y.jsxs)("div",{className:"flex items-start gap-4 p-5",children:[(0,y.jsx)("div",{className:"bg-emerald-50 rounded-md p-2 text-emerald-800",children:a.icon}),(0,y.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,y.jsx)("h3",{className:"text-md font-semibold text-emerald-800 truncate group-hover:text-emerald-900",children:a.label}),(0,y.jsx)("p",{className:"text-sm text-slate-600 workspace-tile-desc",children:a.description})]}),(0,y.jsx)("div",(0,r.A)((0,r.A)({},e.dragHandleProps),{},{title:"Drag to re-order",className:"ml-2 rounded p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",onClick:e=>e.stopPropagation(),children:(0,y.jsx)(d.A,{size:16})}))]}),(0,y.jsxs)("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,y.jsxs)("button",{onClick:i,className:"text-sm text-gray-700 font-medium flex items-center gap-1 hover:text-gray-900",children:[a.allowed?a.action:"Upgrade to unlock",(0,y.jsx)(c.A,{size:18})]}),(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("button",{onClick:e=>((e,a)=>{e.stopPropagation();const t=f.includes(a)?f.filter((e=>e!==a)):[...f,a];A(t),localStorage.setItem("automation-pinned",JSON.stringify(t))})(e,a.id),title:f.includes(a.id)?"Unpin":"Pin",children:(0,y.jsx)(m.A,{size:18,className:f.includes(a.id)?"text-red-600":"text-gray-400 hover:text-red-500"})}),(0,y.jsx)("button",{onClick:e=>((e,a)=>{e.stopPropagation();const t=j.includes(a)?j.filter((e=>e!==a)):[...j,a];N(t),localStorage.setItem("automation-archived",JSON.stringify(t))})(e,a.id),title:"Archive this",children:(0,y.jsx)(p.A,{size:18,className:j.includes(a.id)?"text-indigo-600":"text-gray-400 hover:text-indigo-500"})})]})]})]}))},a.id)})),a.placeholder]}))})}),!z&&(0,y.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 border-l-4 border-red-500 rounded-md mt-4 shadow-sm flex items-start gap-3",children:[(0,y.jsx)(l.A,{size:22,className:"mt-1"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"No automation tiles:"})," All automation tools are archived or hidden.",(0,y.jsx)("div",{className:"text-sm mt-1 text-gray-600",children:"Un-archive some tiles to see them here."})]})]})]})}}}]);
//# sourceMappingURL=789.1c161a8d.chunk.js.map